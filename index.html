<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description" content="Where there is a will, there is a way!">
<meta property="og:type" content="website">
<meta property="og:title" content="ZhangYouzhi's Blog">
<meta property="og:url" content="http://zhangyouzhi.com/index.html">
<meta property="og:site_name" content="ZhangYouzhi's Blog">
<meta property="og:description" content="Where there is a will, there is a way!">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZhangYouzhi's Blog">
<meta name="twitter:description" content="Where there is a will, there is a way!">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post',
    motion: true
  };
</script>

  <title> ZhangYouzhi's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">ZhangYouzhi's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
  <section id="posts" class="posts-expand">

    

    
    

    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/29/programming-philosophy/" itemprop="url">
                  编程的智慧（转）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-29T11:58:58+08:00" content="2015-12-29">
              2015-12-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <blockquote>
<p>出处：王垠<br>网址：<a href="http://www.yinwang.org/blog-cn/2015/11/21/programming-philosophy/" target="_blank" rel="external">http://www.yinwang.org/blog-cn/2015/11/21/programming-philosophy/</a></p>
</blockquote>
<p>编程是一种创造性的工作，是一门艺术。精通任何一门艺术，都需要很多的练习和领悟，所以这里提出的“智慧”，并不是号称一天瘦十斤的减肥药，它并不能代替你自己的勤奋。然而由于软件行业喜欢标新立异，喜欢把简单的事情搞复杂，我希望这些文字能给迷惑中的人们指出一些正确的方向，让他们少走一些弯路，基本做到一分耕耘一分收获。</p>
<h3 id="u53CD_u590D_u63A8_u6572_u4EE3_u7801"><a href="#u53CD_u590D_u63A8_u6572_u4EE3_u7801" class="headerlink" title="反复推敲代码"></a>反复推敲代码</h3><hr>
<p>既然“天才是百分之一的灵感，百分之九十九的汗水”，那我先来谈谈这汗水的部分吧。有人问我，提高编程水平最有效的办法是什么？我想了很久，终于发现最有效的办法，其实是反反复复地修改和推敲代码。</p>
<p>在IU的时候，由于Dan Friedman的严格教导，我们以写出冗长复杂的代码为耻。如果你代码多写了几行，这老顽童就会大笑，说：“当年我解决这个问题，只写了5行代码，你回去再想想吧……” 当然，有时候他只是夸张一下，故意刺激你的，其实没有人能只用5行代码完成。然而这种提炼代码，减少冗余的习惯，却由此深入了我的骨髓。</p>
<p>有些人喜欢炫耀自己写了多少多少万行的代码，仿佛代码的数量是衡量编程水平的标准。然而，如果你总是匆匆写出代码，却从来不回头去推敲，修改和提炼，其实是不可能提高编程水平的。你会制造出越来越多平庸甚至糟糕的代码。在这种意义上，很多人所谓的“工作经验”，跟他代码的质量，其实不一定成正比。如果有几十年的工作经验，却从来不回头去提炼和反思自己的代码，那么他也许还不如一个只有一两年经验，却喜欢反复推敲，仔细领悟的人。</p>
<p>有位文豪说得好：“看一个作家的水平，不是看他发表了多少文字，而要看他的废纸篓里扔掉了多少。” 我觉得同样的理论适用于编程。好的程序员，他们删掉的代码，比留下来的还要多很多。如果你看见一个人写了很多代码，却没有删掉多少，那他的代码一定有很多垃圾。</p>
<p>就像文学作品一样，代码是不可能一蹴而就的。灵感似乎总是零零星星，陆陆续续到来的。任何人都不可能一笔呵成，就算再厉害的程序员，也需要经过一段时间，才能发现最简单优雅的写法。有时候你反复提炼一段代码，觉得到了顶峰，没法再改进了，可是过了几个月再回头来看，又发现好多可以改进和简化的地方。这跟写文章一模一样，回头看几个月或者几年前写的东西，你总能发现一些改进。</p>
<p>所以如果反复提炼代码已经不再有进展，那么你可以暂时把它放下。过几个星期或者几个月再回头来看，也许就有焕然一新的灵感。这样反反复复很多次之后，你就积累起了灵感和智慧，从而能够在遇到新问题的时候直接朝正确，或者接近正确的方向前进。</p>
<h3 id="u5199_u4F18_u96C5_u7684_u4EE3_u7801"><a href="#u5199_u4F18_u96C5_u7684_u4EE3_u7801" class="headerlink" title="写优雅的代码"></a>写优雅的代码</h3><hr>
<p>人们都讨厌“面条代码”（spaghetti code），因为它就像面条一样绕来绕去，没法理清头绪。那么优雅的代码一般是什么形状的呢？经过多年的观察，我发现优雅的代码，在形状上有一些明显的特征。</p>
<p>如果我们忽略具体的内容，从大体结构上来看，优雅的代码看起来就像是一些整整齐齐，套在一起的盒子。如果跟整理房间做一个类比，就很容易理解。如果你把所有物品都丢在一个很大的抽屉里，那么它们就会全都混在一起。你就很难整理，很难迅速的找到需要的东西。但是如果你在抽屉里再放几个小盒子，把物品分门别类放进去，那么它们就不会到处乱跑，你就可以比较容易的找到和管理它们。</p>
<p>优雅的代码的另一个特征是，它的逻辑大体上看起来，是枝丫分明的树状结构（tree）。这是因为程序所做的几乎一切事情，都是信息的传递和分支。你可以把代码看成是一个电路，电流经过导线，分流或者汇合。如果你是这样思考的，你的代码里就会比较少出现只有一个分支的if语句，它看起来就会像这个样子：</p>
<pre><code>if (...) {
  if (...) {
    ...
  } else {
    ...
  }
} else if (...) {
  ...
} else {
  ...
}
</code></pre><p>注意到了吗？在我的代码里面，if语句几乎总是有两个分支。它们有可能嵌套，有多层的缩进，而且else分支里面有可能出现少量重复的代码。然而这样的结构，逻辑却非常严密和清晰。在后面我会告诉你为什么if语句最好有两个分支。</p>
<h3 id="u5199_u6A21_u5757_u5316_u7684_u4EE3_u7801"><a href="#u5199_u6A21_u5757_u5316_u7684_u4EE3_u7801" class="headerlink" title="写模块化的代码"></a>写模块化的代码</h3><hr>
<p>有些人吵着闹着要让程序“模块化”，结果他们的做法是把代码分部到多个文件和目录里面，然后把这些目录或者文件叫做“module”。他们甚至把这些目录分放在不同的VCS repo里面。结果这样的作法并没有带来合作的流畅，而是带来了许多的麻烦。这是因为他们其实并不理解什么叫做“模块”，肤浅的把代码切割开来，分放在不同的位置，其实非但不能达到模块化的目的，而且制造了不必要的麻烦。</p>
<p>真正的模块化，并不是文本意义上的，而是逻辑意义上的。一个模块应该像一个电路芯片，它有定义良好的输入和输出。实际上一种很好的模块化方法早已经存在，它的名字叫做“函数”。每一个函数都有明确的输入（参数）和输出（返回值），同一个文件里可以包含多个函数，所以你其实根本不需要把代码分开在多个文件或者目录里面，同样可以完成代码的模块化。我可以把代码全都写在同一个文件里，却仍然是非常模块化的代码。</p>
<p>想要达到很好的模块化，你需要做到以下几点：</p>
<ul>
<li><p>避免写太长的函数。如果发现函数太大了，就应该把它拆分成几个更小的。通常我写的函数长度都不超过40行。对比一下，一般笔记本电脑屏幕所能容纳的代码行数是50行。我可以一目了然的看见一个40行的函数，而不需要滚屏。只有40行而不是50行的原因是，我的眼球不转的话，最大的视角只看得到40行代码。<br>如果我看代码不转眼球的话，我就能把整片代码完整的映射到我的视觉神经里，这样就算忽然闭上眼睛，我也能看得见这段代码。我发现闭上眼睛的时候，大脑能够更加有效地处理代码，你能想象这段代码可以变成什么其它的形状。40行并不是一个很大的限制，因为函数里面比较复杂的部分，往往早就被我提取出去，做成了更小的函数，然后从原来的函数里面调用。</p>
</li>
<li><p>制造小的工具函数。如果你仔细观察代码，就会发现其实里面有很多的重复。这些常用的代码，不管它有多短，提取出去做成函数，都可能是会有好处的。有些帮助函数也许就只有两行，然而它们却能大大简化主要函数里面的逻辑。<br>有些人不喜欢使用小的函数，因为他们想避免函数调用的开销，结果他们写出几百行之大的函数。这是一种过时的观念。现代的编译器都能自动的把小的函数内联（inline）到调用它的地方，所以根本不产生函数调用，也就不会产生任何多余的开销。<br>同样的一些人，也爱使用宏（macro）来代替小函数，这也是一种过时的观念。在早期的C语言编译器里，只有宏是静态“内联”的，所以他们使用宏，其实是为了达到内联的目的。然而能否内联，其实并不是宏与函数的根本区别。宏与函数有着巨大的区别（这个我以后再讲），应该尽量避免使用宏。为了内联而使用宏，其实是滥用了宏，这会引起各种各样的麻烦，比如使程序难以理解，难以调试，容易出错等等。</p>
</li>
<li><p>每个函数只做一件简单的事情。有些人喜欢制造一些“通用”的函数，既可以做这个又可以做那个，它的内部依据某些变量和条件，来“选择”这个函数所要做的事情。比如，你也许写出这样的函数：</p>
<pre><code>void foo() {
  if (getOS().equals(&quot;MacOS&quot;)) {
    a();
  } else {
    b();
  }
  c();
  if (getOS().equals(&quot;MacOS&quot;)) {
    d();
  } else {
    e();
  }
}  
</code></pre><p>写这个函数的人，根据系统是否为“MacOS”来做不同的事情。你可以看出这个函数里，其实只有c()是两种系统共有的，而其它的a(), b(), d(), e()都属于不同的分支。<br>这种“复用”其实是有害的。如果一个函数可能做两种事情，它们之间共同点少于它们的不同点，那你最好就写两个不同的函数，否则这个函数的逻辑就不会很清晰，容易出现错误。其实，上面这个函数可以改写成两个函数：</p>
<pre><code>void fooMacOS() {
  a();
  c();
  d();
}
</code></pre><p>和</p>
<pre><code>void fooOther() {
  b();
  c();
  e();
}
</code></pre><p>如果你发现两件事情大部分内容相同，只有少数不同，多半时候你可以把相同的部分提取出去，做成一个辅助函数。比如，如果你有个函数是这样：</p>
<pre><code>void foo() {
  a();
  b()
  c();
  if (getOS().equals(&quot;MacOS&quot;)) {
    d();
  } else {
    e();
  }
}
</code></pre><p>其中a()，b()，c()都是一样的，只有d()和e()根据系统有所不同。那么你可以把a()，b()，c()提取出去：</p>
<pre><code>void preFoo() {
  a();
  b()
  c();
</code></pre><p>然后制造两个函数：</p>
<pre><code>void fooMacOS() {
  preFoo();
  d();
}
</code></pre><p>和</p>
<pre><code>void fooOther() {
  preFoo();
  e();
}
</code></pre><p>这样一来，我们既共享了代码，又做到了每个函数只做一件简单的事情。这样的代码，逻辑就更加清晰。</p>
</li>
<li><p>避免使用全局变量和类成员（class member）来传递信息，尽量使用局部变量和参数。有些人写代码，经常用类成员来传递信息，就像这样：</p>
<pre><code>class A {
  String x;

  void findX() {
     ...
     x = ...;
  }

  void foo() {
    findX();
    ...
    print(x);
  }
}
</code></pre><p>首先，他使用findX()，把一个值写入成员x。然后，使用x的值。这样，x就变成了findX和print之间的数据通道。由于x属于class A，这样程序就失去了模块化的结构。由于这两个函数依赖于成员x，它们不再有明确的输入和输出，而是依赖全局的数据。findX和foo不再能够离开class A而存在，而且由于类成员还有可能被其他代码改变，代码变得难以理解，难以确保正确性。<br>如果你使用局部变量而不是类成员来传递信息，那么这两个函数就不需要依赖于某一个class，而且更加容易理解，不易出错：</p>
<pre><code>String findX() {
   ...
   x = ...;
   return x;
}
void foo() {
  int x = findX();
  print(x);
}
</code></pre></li>
</ul>
<h3 id="u5199_u53EF_u8BFB_u7684_u4EE3_u7801"><a href="#u5199_u53EF_u8BFB_u7684_u4EE3_u7801" class="headerlink" title="写可读的代码"></a>写可读的代码</h3><hr>
<p>有些人以为写很多注释就可以让代码更加可读，然而却发现事与愿违。注释不但没能让代码变得可读，反而由于大量的注释充斥在代码中间，让程序变得障眼难读。而且代码的逻辑一旦修改，就会有很多的注释变得过时，需要更新。修改注释是相当大的负担，所以大量的注释，反而成为了妨碍改进代码的绊脚石。</p>
<p>实际上，真正优雅可读的代码，是几乎不需要注释的。如果你发现需要写很多注释，那么你的代码肯定是含混晦涩，逻辑不清晰的。其实，程序语言相比自然语言，是更加强大而严谨的，它其实具有自然语言最主要的元素：主语，谓语，宾语，名词，动词，如果，那么，否则，是，不是，…… 所以如果你充分利用了程序语言的表达能力，你完全可以用程序本身来表达它到底在干什么，而不需要自然语言的辅助。</p>
<p>有少数的时候，你也许会为了绕过其他一些代码的设计问题，采用一些违反直觉的作法。这时候你可以使用很短注释，说明为什么要写成那奇怪的样子。这样的情况应该少出现，否则这意味着整个代码的设计都有问题。</p>
<p>如果没能合理利用程序语言提供的优势，你会发现程序还是很难懂，以至于需要写注释。所以我现在告诉你一些要点，也许可以帮助你大大减少写注释的必要：</p>
<ol>
<li><p>使用有意义的函数和变量名字。如果你的函数和变量的名字，能够切实的描述它们的逻辑，那么你就不需要写注释来解释它在干什么。比如：</p>
<pre><code>// put elephant1 into fridge2
put(elephant1, fridge2);
</code></pre><p>由于我的函数名put，加上两个有意义的变量名elephant1和fridge2，已经说明了这是在干什么（把大象放进冰箱），所以上面那句注释完全没有必要。</p>
</li>
<li><p>局部变量应该尽量接近使用它的地方。有些人喜欢在函数最开头定义很多局部变量，然后在下面很远的地方使用它，就像这个样子：</p>
<pre><code>void foo() {
  int index = ...;
  ...
  ...
  bar(index);
  ...
}
</code></pre><p>由于这中间都没有使用过index，也没有改变过它所依赖的数据，所以这个变量定义，其实可以挪到接近使用它的地方：</p>
<pre><code>void foo() {
  ...
  ...
  int index = ...;
  bar(index);
  ...
}
</code></pre><p>这样读者看到bar(index)，不需要向上看很远就能发现index是如何算出来的。而且这种短距离，可以加强读者对于这里的“计算顺序”的理解。否则如果index在顶上，读者可能会怀疑，它其实保存了某种会变化的数据，或者它后来又被修改过。如果index放在下面，读者就清楚的知道，index并不是保存了什么可变的值，而且它算出来之后就没变过。</p>
<p>如果你看透了局部变量的本质——它们就是电路里的导线，那你就能更好的理解近距离的好处。变量定义离用的地方越近，导线的长度就越短。你不需要摸着一根导线，绕来绕去找很远，就能发现接收它的端口，这样的电路就更容易理解。</p>
</li>
<li><p>局部变量名字应该简短。这貌似跟第一点相冲突，简短的变量名怎么可能有意义呢？注意我这里说的是局部变量，因为它们处于局部，再加上第2点已经把它放到离使用位置尽量近的地方，所以根据上下文你就会容易知道它的意思：</p>
<p>比如，你有一个局部变量，表示一个操作是否成功：</p>
<pre><code>boolean successInDeleteFile = deleteFile(&quot;foo.txt&quot;);
if (successInDeleteFile) {
  ...
} else {
  ...
}
</code></pre><p>这个局部变量successInDeleteFile大可不必这么啰嗦。因为它只用过一次，而且用它的地方就在下面一行，所以读者可以轻松发现它是deleteFile返回的结果。如果你把它改名为success，其实读者根据一点上下文，也知道它表示”success in deleteFile”。所以你可以把它改成这样：</p>
<pre><code>boolean success = deleteFile(&quot;foo.txt&quot;);
if (success) {
  ...
} else {
  ...
}
</code></pre><p>这样的写法不但没漏掉任何有用的语义信息，而且更加易读。successInDeleteFile这种”camelCase”，如果超过了三个单词连在一起，其实是很碍眼的东西，所以如果你能用一个单词表示同样的意义，那当然更好。</p>
</li>
<li><p>不要重用局部变量。很多人写代码不喜欢定义新的局部变量，而喜欢“重用”同一个局部变量，通过反复对它们进行赋值，来表示完全不同意思。比如这样写：</p>
<pre><code>String msg;
if (...) {
  msg = &quot;succeed&quot;;
  log.info(msg);
} else {
  msg = &quot;failed&quot;;
  log.info(msg);
}
</code></pre><p>虽然这样在逻辑上是没有问题的，然而却不易理解，容易混淆。变量msg两次被赋值，表示完全不同的两个值。它们立即被log.info使用，没有传递到其它地方去。这种赋值的做法，把局部变量的作用域不必要的增大，让人以为它可能在将来改变，也许会在其它地方被使用。更好的做法，其实是定义两个变量：</p>
<pre><code>if (...) {
  String msg = &quot;succeed&quot;;
  log.info(msg);
} else {
  String msg = &quot;failed&quot;;
  log.info(msg);
}
</code></pre><p>由于这两个msg变量的作用域仅限于它们所处的if语句分支，你可以很清楚的看到这两个msg被使用的范围，而且知道它们之间没有任何关系。</p>
</li>
<li><p>把复杂的逻辑提取出去，做成“帮助函数”。有些人写的函数很长，以至于看不清楚里面的语句在干什么，所以他们误以为需要写注释。如果你仔细观察这些代码，就会发现不清晰的那片代码，往往可以被提取出去，做成一个函数，然后在原来的地方调用。由于函数有一个名字，这样你就可以使用有意义的函数名来代替注释。举一个例子：</p>
<pre><code>...
// put elephant1 into fridge2
openDoor(fridge2);
if (elephant1.alive()) {
  ...
} else {
   ...
}
closeDoor(fridge2);
...
</code></pre><p>如果你把这片代码提出去定义成一个函数：</p>
<pre><code>void put(Elephant elephant, Fridge fridge) {
  openDoor(fridge);
  if (elephant.alive()) {
    ...
  } else {
     ...
  }
  closeDoor(fridge);
}
</code></pre><p>这样原来的代码就可以改成：</p>
<pre><code>...
put(elephant1, fridge2);
...
</code></pre><p>更加清晰，而且注释也没必要了。</p>
</li>
<li><p>把复杂的表达式提取出去，做成中间变量。有些人听说“函数式编程”是个好东西，也不理解它的真正含义，就在代码里使用大量嵌套的函数。像这样：</p>
<pre><code>Pizza pizza = makePizza(crust(salt(), butter()),
   topping(onion(), tomato(), sausage()));
</code></pre><p>这样的代码一行太长，而且嵌套太多，不容易看清楚。其实训练有素的函数式程序员，都知道中间变量的好处，不会盲目的使用嵌套的函数。他们会把这代码变成这样：</p>
<pre><code>Crust crust = crust(salt(), butter());
Topping topping = topping(onion(), tomato(), sausage());
Pizza pizza = makePizza(crust, topping);
</code></pre><p>这样写，不但有效地控制了单行代码的长度，而且由于引入的中间变量具有“意义”，步骤清晰，变得很容易理解。</p>
</li>
<li><p>在合理的地方换行。对于绝大部分的程序语言，代码的逻辑是和空白字符无关的，所以你可以在几乎任何地方换行，你也可以不换行。这样的语言设计，是一个好东西，因为它给了程序员自由控制自己代码格式的能力。然而，它也引起了一些问题，因为很多人不知道如何合理的换行。</p>
<p>有些人喜欢利用IDE的自动换行机制，编辑之后用一个热键把整个代码重新格式化一遍，IDE就会把超过行宽限制的代码自动折行。可是这种自动这行，往往没有根据代码的逻辑来进行，不能帮助理解代码。自动换行之后可能产生这样的代码：</p>
<pre><code>if (someLongCondition1() &amp;&amp; someLongCondition2() &amp;&amp; someLongCondition3() &amp;&amp; 
  someLongCondition4()) {
  ...
}
</code></pre><p>由于someLongCondition4()超过了行宽限制，被编辑器自动换到了下面一行。虽然满足了行宽限制，换行的位置却是相当任意的，它并不能帮助人理解这代码的逻辑。这几个boolean表达式，全都用&amp;&amp;连接，所以它们其实处于平等的地位。为了表达这一点，当需要折行的时候，你应该把每一个表达式都放到新的一行，就像这个样子：</p>
<pre><code>if (someLongCondition1() &amp;&amp; 
    someLongCondition2() &amp;&amp; 
    someLongCondition3() &amp;&amp; 
    someLongCondition4()) {
  ...
}
</code></pre><p>这样每一个条件都对齐，里面的逻辑就很清楚了。再举个例子：</p>
<pre><code>log.info(&quot;failed to find file {} for command {}, with exception {}&quot;, file, command,
  exception);
</code></pre><p>这行因为太长，被自动折行成这个样子。file，command和exception本来是同一类东西，却有两个留在了第一行，最后一个被折到第二行。它就不如手动换行成这个样子：</p>
<pre><code>log.info(&quot;failed to find file {} for command {}, with exception {}&quot;,
  file, command, exception);
</code></pre><p>把格式字符串单独放在一行，而把它的参数一并放在另外一行，这样逻辑就更加清晰。</p>
<p>为了避免IDE把这些手动调整好的换行弄乱，很多IDE（比如IntelliJ）的自动格式化设定里都有“保留原来的换行符”的设定。如果你发现IDE的换行不符合逻辑，你可以修改这些设定，然后在某些地方保留你自己的手动换行。</p>
<p>说到这里，我必须警告你，这里所说的“不需注释，让代码自己解释自己”，并不是说要让代码看起来像某种自然语言。有个叫Chai的JavaScript测试工具，可以让你这样写代码：</p>
<pre><code>expect(foo).to.be.a(&apos;string&apos;);
expect(foo).to.equal(&apos;bar&apos;);
expect(foo).to.have.length(3);
expect(tea).to.have.property(&apos;flavors&apos;).with.length(3);
</code></pre><p>这种做法是极其错误的。程序语言本来就比自然语言简单清晰，这种写法让它看起来像自然语言的样子，反而变得复杂难懂了。</p>
</li>
</ol>
<h3 id="u5199_u7B80_u5355_u7684_u4EE3_u7801"><a href="#u5199_u7B80_u5355_u7684_u4EE3_u7801" class="headerlink" title="写简单的代码"></a>写简单的代码</h3><hr>
<p>程序语言都喜欢标新立异，提供这样那样的“特性”，然而有些特性其实并不是什么好东西。很多特性都经不起时间的考验，最后带来的麻烦，比解决的问题还多。很多人盲目的追求“短小”和“精悍”，或者为了显示自己头脑聪明，学得快，所以喜欢利用语言里的一些特殊构造，写出过于“聪明”，难以理解的代码。</p>
<p>并不是语言提供什么，你就一定要把它用上的。实际上你只需要其中很小的一部分功能，就能写出优秀的代码。我一向反对“充分利用”程序语言里的所有特性。实际上，我心目中有一套最好的构造。不管语言提供了多么“神奇”的，“新”的特性，我基本都只用经过千锤百炼，我觉得值得信奈的那一套。</p>
<p>现在针对一些有问题的语言特性，我介绍一些我自己使用的代码规范，并且讲解一下为什么它们能让代码更简单。</p>
<ul>
<li><p>避免使用自增减表达式（i++，++i，i–，–i）。这种自增减操作表达式其实是历史遗留的设计失误。它们含义蹊跷，非常容易弄错。它们把读和写这两种完全不同的操作，混淆缠绕在一起，把语义搞得乌七八糟。含有它们的表达式，结果可能取决于求值顺序，所以它可能在某种编译器下能正确运行，换一个编译器就出现离奇的错误。</p>
<p>其实这两个表达式完全可以分解成两步，把读和写分开：一步更新i的值，另外一步使用i的值。比如，如果你想写foo(i++)，你完全可以把它拆成int t = i; i += 1; foo(t);。如果你想写foo(++i)，可以拆成i += 1; foo(i); 拆开之后的代码，含义完全一致，却清晰很多。到底更新是在取值之前还是之后，一目了然。</p>
<p>有人也许以为i++或者++i的效率比拆开之后要高，这只是一种错觉。这些代码经过基本的编译器优化之后，生成的机器代码是完全没有区别的。自增减表达式只有在两种情况下才可以安全的使用。一种是在for循环的update部分，比如for(int i = 0; i &lt; 5; i++)。另一种情况是写成单独的一行，比如i++;。这两种情况是完全没有歧义的。你需要避免其它的情况，比如用在复杂的表达式里面，比如foo(i++)，foo(++i) + foo(i)，…… 没有人应该知道，或者去追究这些是什么意思</p>
</li>
<li><p>永远不要省略花括号。很多语言允许你在某种情况下省略掉花括号，比如C，Java都允许你在if语句里面只有一句话的时候省略掉花括号：</p>
<pre><code>if (...) 
  action1();
</code></pre><p>咋一看少打了两个字，多好。可是这其实经常引起奇怪的问题。比如，你后来想要加一句话action2()到这个if里面，于是你就把代码改成：</p>
<pre><code>if (...) 
  action1();
  action2();
</code></pre><p>为了美观，你很小心的使用了action1()的缩进。咋一看它们是在一起的，所以你下意识里以为它们只会在if的条件为真的时候执行，然而action2()却其实在if外面，它会被无条件的执行。我把这种现象叫做“光学幻觉”（optical illusion），理论上每个程序员都应该发现这个错误，然而实际上却容易被忽视。</p>
<p>那么你问，谁会这么傻，我在加入action2()的时候加上花括号不就行了？可是从设计的角度来看，这样其实并不是合理的作法。首先，也许你以后又想把action2()去掉，这样你为了样式一致，又得把花括号拿掉，烦不烦啊？其次，这使得代码样式不一致，有的if有花括号，有的又没有。况且，你为什么需要记住这个规则？如果你不问三七二十一，只要是if-else语句，把花括号全都打上，就可以想都不用想了，就当C和Java没提供给你这个特殊写法。这样就可以保持完全的一致性，减少不必要的思考。</p>
<p>有人可能会说，全都打上花括号，只有一句话也打上，多碍眼啊？然而经过实行这种编码规范几年之后，我并没有发现这种写法更加碍眼，反而由于花括号的存在，使得代码界限明确，让我的眼睛负担更小了。</p>
</li>
<li><p>合理使用括号，不要盲目依赖操作符优先级。利用操作符的优先级来减少括号，对于1 + 2 <em> 3这样常见的算数表达式，是没问题的。然而有些人如此的仇恨括号，以至于他们会写出2 &lt;&lt; 7 - 2 </em> 3这样的表达式，而完全不用括号。</p>
<p>这里的问题，在于移位操作&lt;&lt;的优先级，是很多人不熟悉，而且是违反常理的。由于x &lt;&lt; 1相当于把x乘以2，很多人误以为这个表达式相当于(2 &lt;&lt; 7) - (2 <em> 3)，所以等于250。然而实际上&lt;&lt;的优先级比加法+还要低，所以这表达式其实相当于2 &lt;&lt; (7 - 2 </em> 3)，所以等于4！</p>
<p>解决这个问题的办法，不是要每个人去把操作符优先级表给硬背下来，而是合理的加入括号。比如上面的例子，最好直接加上括号写成2 &lt;&lt; (7 - 2 * 3)。虽然没有括号也表示同样的意思，但是加上括号就更加清晰，读者不再需要死记&lt;&lt;的优先级就能理解代码。</p>
</li>
<li><p>避免使用continue和break。循环语句（for，while）里面出现return是没问题的，然而如果你使用了continue或者break，就会让循环的逻辑和终止条件变得复杂，难以确保正确。</p>
<p>出现continue或者break的原因，往往是对循环的逻辑没有想清楚。如果你考虑周全了，应该是几乎不需要continue或者break的。如果你的循环里出现了continue或者break，你就应该考虑改写这个循环。改写循环的办法有多种：</p>
<ol>
<li>如果出现了continue，你往往只需要把continue的条件反向，就可以消除continue。</li>
<li>如果出现了break，你往往可以把break的条件，合并到循环头部的终止条件里，从而去掉break。</li>
<li>有时候你可以把break替换成return，从而去掉break。</li>
<li>如果以上都失败了，你也许可以把循环里面复杂的部分提取出来，做成函数调用，之后continue或者break就可以去掉了。</li>
</ol>
<p>下面我对这些情况举一些例子。</p>
<p>情况1：下面这段代码里面有一个continue：</p>
<pre><code>List&lt;String&gt; goodNames = new ArrayList&lt;&gt;();
for (String name: names) {
  if (name.contains(&quot;bad&quot;)) {
    continue;
  }
  goodNames.add(name);
  ...
}  
</code></pre><p>它说：“如果name含有’bad’这个词，跳过后面的循环代码……” 注意，这是一种“负面”的描述，它不是在告诉你什么时候“做”一件事，而是在告诉你什么时候“不做”一件事。为了知道它到底在干什么，你必须搞清楚continue会导致哪些语句被跳过了，然后脑子里把逻辑反个向，你才能知道它到底想做什么。这就是为什么含有continue和break的循环不容易理解，它们依靠“控制流”来描述“不做什么”，“跳过什么”，结果到最后你也没搞清楚它到底“要做什么”。</p>
<p>其实，我们只需要把continue的条件反向，这段代码就可以很容易的被转换成等价的，不含continue的代码：</p>
<pre><code>List&lt;String&gt; goodNames = new ArrayList&lt;&gt;();
for (String name: names) {
  if (!name.contains(&quot;bad&quot;)) {
    goodNames.add(name);
    ...
  }
}  
</code></pre><p>goodNames.add(name);和它之后的代码全部被放到了if里面，多了一层缩进，然而continue却没有了。你再读这段代码，就会发现更加清晰。因为它是一种更加“正面”地描述。它说：“在name不含有’bad’这个词的时候，把它加到goodNames的链表里面……”</p>
<p>情况2：for和while头部都有一个循环的“终止条件”，那本来应该是这个循环唯一的退出条件。如果你在循环中间有break，它其实给这个循环增加了一个退出条件。你往往只需要把这个条件合并到循环头部，就可以去掉break。</p>
<p>比如下面这段代码：</p>
<pre><code>while (condition1) {
  ...
  if (condition2) {
    break;
  }
}
</code></pre><p>当condition成立的时候，break会退出循环。其实你只需要把condition2反转之后，放到while头部的终止条件，就可以去掉这种break语句。改写后的代码如下：</p>
<pre><code>while (condition1 &amp;&amp; !condition2) {
  ...
}
</code></pre><p>这种情况表面上貌似只适用于break出现在循环开头或者末尾的时候，然而其实大部分时候，break都可以通过某种方式，移动到循环的开头或者末尾。具体的例子我暂时没有，等出现的时候再加进来。</p>
<p>情况3：很多break退出循环之后，其实接下来就是一个return。这种break往往可以直接换成return。比如下面这个例子：</p>
<pre><code>public boolean hasBadName(List&lt;String&gt; names) {
    boolean result = false;

    for (String name: names) {
        if (name.contains(&quot;bad&quot;)) {
            result = true;
            break;
        }
    }
    return result;
}
</code></pre><p>这个函数检查names链表里是否存在一个名字，包含“bad”这个词。它的循环里包含一个break语句。这个函数可以被改写成：</p>
<pre><code>public boolean hasBadName(List&lt;String&gt; names) {
    for (String name: names) {
        if (name.contains(&quot;bad&quot;)) {
            return true;
        }
    }
    return false;
}
</code></pre><p>改进后的代码，在name里面含有“bad”的时候，直接用return true返回，而不是对result变量赋值，break出去，最后才返回。如果循环结束了还没有return，那就返回false，表示没有找到这样的名字。使用return来代替break，这样break语句和result这个变量，都一并被消除掉了。</p>
<p>我曾经见过很多其他使用continue和break的例子，几乎无一例外的可以被消除掉，变换后的代码变得清晰很多。我的经验是，99%的break和continue，都可以通过替换成return语句，或者翻转if条件的方式来消除掉。剩下的1%含有复杂的逻辑，但也可以通过提取一个帮助函数来消除掉。修改之后的代码变得容易理解，容易确保正确。</p>
</li>
</ul>
<h3 id="u5199_u76F4_u89C2_u7684_u4EE3_u7801"><a href="#u5199_u76F4_u89C2_u7684_u4EE3_u7801" class="headerlink" title="写直观的代码"></a>写直观的代码</h3><hr>
<p>我写代码有一条重要的原则：如果有更加直接，更加清晰的写法，就选择它，即使它看起来更长，更笨，也一样选择它。比如，Unix命令行有一种“巧妙”的写法是这样：</p>
<pre><code>command1 &amp;&amp; command2 &amp;&amp; command3
</code></pre><p>由于Shell语言的逻辑操作a &amp;&amp; b具有“短路”的特性，如果a等于false，那么b就没必要执行了。这就是为什么当command1成功，才会执行command2，当command2成功，才会执行command3。同样，</p>
<pre><code>command1 || command2 || command3
</code></pre><p>操作符||也有类似的特性。上面这个命令行，如果command1成功，那么command2和command3都不会被执行。如果command1失败，command2成功，那么command3就不会被执行。</p>
<p>这比起用if语句来判断失败，似乎更加巧妙和简洁，所以有人就借鉴了这种方式，在程序的代码里也使用这种方式。比如他们可能会写这样的代码：</p>
<pre><code>if (action1() || action2() &amp;&amp; action3()) {
  ...
}
</code></pre><p>你看得出来这代码是想干什么吗？action2和action3什么条件下执行，什么条件下不执行？也许稍微想一下，你知道它在干什么：“如果action1失败了，执行action2，如果action2成功了，执行action3”。然而那种语义，并不是直接的“映射”在这代码上面的。比如“失败”这个词，对应了代码里的哪一个字呢？你找不出来，因为它包含在了||的语义里面，你需要知道||的短路特性，以及逻辑或的语义才能知道这里面在说“如果action1失败……”。每一次看到这行代码，你都需要思考一下，这样积累起来的负荷，就会让人很累。</p>
<p>其实，这种写法是滥用了逻辑操作&amp;&amp;和||的短路特性。这两个操作符可能不执行右边的表达式，原因是为了机器的执行效率，而不是为了给人提供这种“巧妙”的用法。这两个操作符的本意，只是作为逻辑操作，它们并不是拿来给你代替if语句的。也就是说，它们只是碰巧可以达到某些if语句的效果，但你不应该因此就用它来代替if语句。如果你这样做了，就会让代码晦涩难懂。</p>
<p>上面的代码写成笨一点的办法，就会清晰很多：</p>
<pre><code>if (!action1()) {
  if (action2()) {
    action3();
  }
}
</code></pre><p>这里我很明显的看出这代码在说什么，想都不用想：如果action1()失败了，那么执行action2()，如果action2()成功了，执行action3()。你发现这里面的一一对应关系吗？if=如果，!=失败，…… 你不需要利用逻辑学知识，就知道它在说什么。</p>
<h3 id="u5199_u65E0_u61C8_u53EF_u51FB_u7684_u4EE3_u7801"><a href="#u5199_u65E0_u61C8_u53EF_u51FB_u7684_u4EE3_u7801" class="headerlink" title="写无懈可击的代码"></a>写无懈可击的代码</h3><hr>
<p>在之前一节里，我提到了自己写的代码里面很少出现只有一个分支的if语句。我写出的if语句，大部分都有两个分支，所以我的代码很多看起来是这个样子：</p>
<pre><code>if (...) {
  if (...) {
    ...
    return false;
  } else {
    return true;
  }
} else if (...) {
  ...
  return false;
} else {
  return true;
}
</code></pre><p>使用这种方式，其实是为了无懈可击的处理所有可能出现的情况，避免漏掉corner case。每个if语句都有两个分支的理由是：如果if的条件成立，你做某件事情；但是如果if的条件不成立，你应该知道要做什么另外的事情。不管你的if有没有else，你终究是逃不掉，必须得思考这个问题的。</p>
<p>很多人写if语句喜欢省略else的分支，因为他们觉得有些else分支的代码重复了。比如我的代码里，两个else分支都是return true。为了避免重复，他们省略掉那两个else分支，只在最后使用一个return true。这样，缺了else分支的if语句，控制流自动“掉下去”，到达最后的return true。他们的代码看起来像这个样子：</p>
<pre><code>if (...) {
  if (...) {
    ...
    return false;
  } 
} else if (...) {
  ...
  return false;
} 
return true;
</code></pre><p>这种写法看似更加简洁，避免了重复，然而却很容易出现疏忽和漏洞。嵌套的if语句省略了一些else，依靠语句的“控制流”来处理else的情况，是很难正确的分析和推理的。如果你的if条件里使用了&amp;&amp;和||之类的逻辑运算，就更难看出是否涵盖了所有的情况。</p>
<p>由于疏忽而漏掉的分支，全都会自动“掉下去”，最后返回意想不到的结果。即使你看一遍之后确信是正确的，每次读这段代码，你都不能确信它照顾了所有的情况，又得重新推理一遍。这简洁的写法，带来的是反复的，沉重的头脑开销。这就是所谓“面条代码”，因为程序的逻辑分支，不是像一棵枝叶分明的树，而是像面条一样绕来绕去。</p>
<p>另外一种省略else分支的情况是这样：</p>
<pre><code>String s = &quot;&quot;;
if (x &lt; 5) {
  s = &quot;ok&quot;;
}
</code></pre><p>写这段代码的人，脑子里喜欢使用一种“缺省值”的做法。s缺省为null，如果x&lt;5，那么把它改变（mutate）成“ok”。这种写法的缺点是，当x&lt;5不成立的时候，你需要往上面看，才能知道s的值是什么。这还是你运气好的时候，因为s就在上面不远。很多人写这种代码的时候，s的初始值离判断语句有一定的距离，中间还有可能插入一些其它的逻辑和赋值操作。这样的代码，把变量改来改去的，看得人眼花，就容易出错。</p>
<p>现在比较一下我的写法：</p>
<pre><code>String s;
if (x &lt; 5) {
  s = &quot;ok&quot;;
} else {
  s = &quot;&quot;;
}
</code></pre><p>这种写法貌似多打了一两个字，然而它却更加清晰。这是因为我们明确的指出了x&lt;5不成立的时候，s的值是什么。它就摆在那里，它是””（空字符串）。注意，虽然我也使用了赋值操作，然而我并没有“改变”s的值。s一开始的时候没有值，被赋值之后就再也没有变过。我的这种写法，通常被叫做更加“函数式”，因为我只赋值一次。</p>
<p>如果我漏写了else分支，Java编译器是不会放过我的。它会抱怨：“在某个分支，s没有被初始化。”这就强迫我清清楚楚的设定各种条件下s的值，不漏掉任何一种情况。</p>
<p>当然，由于这个情况比较简单，你还可以把它写成这样：</p>
<pre><code>String s = x &lt; 5 ? &quot;ok&quot; : &quot;&quot;;
</code></pre><p>对于更加复杂的情况，我建议还是写成if语句为好。</p>
<h3 id="u6B63_u786E_u7684_u5904_u7406_u9519_u8BEF"><a href="#u6B63_u786E_u7684_u5904_u7406_u9519_u8BEF" class="headerlink" title="正确的处理错误"></a>正确的处理错误</h3><hr>
<p>使用有两个分支的if语句，只是我的代码可以达到无懈可击的其中一个原因。这样写if语句的思路，其实包含了使代码可靠的一种通用思想：穷举所有的情况，不漏掉任何一个。</p>
<p>程序的绝大部分功能，是进行信息处理。从一堆纷繁复杂，模棱两可的信息中，排除掉绝大部分“干扰信息”，找到自己需要的那一个。正确地对所有的“可能性”进行推理，就是写出无懈可击代码的核心思想。这一节我来讲一讲，如何把这种思想用在错误处理上。</p>
<p>错误处理是一个古老的问题，可是经过了几十年，还是很多人没搞明白。Unix的系统API手册，一般都会告诉你可能出现的返回值和错误信息。比如，Linux的read系统调用手册里面有如下内容：</p>
<pre><code>RETURN VALUE 
On success, the number of bytes read is returned... 

On error, -1 is returned, and errno is set appropriately.


ERRORS

EAGAIN, EBADF, EFAULT, EINTR, EINVAL, ...
</code></pre><p>很多初学者，都会忘记检查read的返回值是否为-1，觉得每次调用read都得检查返回值真繁琐，不检查貌似也相安无事。这种想法其实是很危险的。如果函数的返回值告诉你，要么返回一个正数，表示读到的数据长度，要么返回-1，那么你就必须要对这个-1作出相应的，有意义的处理。千万不要以为你可以忽视这个特殊的返回值，因为它是一种“可能性”。代码漏掉任何一种可能出现的情况，都可能产生意想不到的灾难性结果。</p>
<p>对于Java来说，这相对方便一些。Java的函数如果出现问题，一般通过异常（exception）来表示。你可以把异常加上函数本来的返回值，看成是一个“union类型”。比如：</p>
<pre><code>String foo() throws MyException {
  ...
}
</code></pre><p>这里MyException是一个错误返回。你可以认为这个函数返回一个union类型：{String, MyException}。任何调用foo的代码，必须对MyException作出合理的处理，才有可能确保程序的正确运行。Union类型是一种相当先进的类型，目前只有极少数语言（比如Typed Racket）具有这种类型，我在这里提到它，只是为了方便解释概念。掌握了概念之后，你其实可以在头脑里实现一个union类型系统，这样使用普通的语言也能写出可靠的代码。</p>
<p>由于Java的类型系统强制要求函数在类型里面声明可能出现的异常，而且强制调用者处理可能出现的异常，所以基本上不可能出现由于疏忽而漏掉的情况。但有些Java程序员有一种恶习，使得这种安全机制几乎完全失效。每当编译器报错，说“你没有catch这个foo函数可能出现的异常”时，有些人想都不想，直接把代码改成这样：</p>
<pre><code>try {
  foo();
} catch (Exception e) {}
</code></pre><p>或者最多在里面放个log，或者干脆把自己的函数类型上加上throws Exception，这样编译器就不再抱怨。这些做法貌似很省事，然而都是错误的，你终究会为此付出代价。</p>
<p>如果你把异常catch了，忽略掉，那么你就不知道foo其实失败了。这就像开车时看到路口写着“前方施工，道路关闭”，还继续往前开。这当然迟早会出问题，因为你根本不知道自己在干什么。</p>
<p>catch异常的时候，你不应该使用Exception这么宽泛的类型。你应该正好catch可能发生的那种异常A。使用宽泛的异常类型有很大的问题，因为它会不经意的catch住另外的异常（比如B）。你的代码逻辑是基于判断A是否出现，可你却catch所有的异常（Exception类），所以当其它的异常B出现的时候，你的代码就会出现莫名其妙的问题，因为你以为A出现了，而其实它没有。这种bug，有时候甚至使用debugger都难以发现。</p>
<p>如果你在自己函数的类型加上throws Exception，那么你就不可避免的需要在调用它的地方处理这个异常，如果调用它的函数也写着throws Exception，这毛病就传得更远。我的经验是，尽量在异常出现的当时就作出处理。否则如果你把它返回给你的调用者，它也许根本不知道该怎么办了。</p>
<p>另外，try { … } catch里面，应该包含尽量少的代码。比如，如果foo和bar都可能产生异常A，你的代码应该尽可能写成：</p>
<pre><code>try {
  foo();
} catch (A e) {...}

try {
  bar();
} catch (A e) {...}
</code></pre><p>而不是</p>
<pre><code>try {
  foo();
  bar();
} catch (A e) {...}
</code></pre><p>第一种写法能明确的分辨是哪一个函数出了问题，而第二种写法全都混在一起。明确的分辨是哪一个函数出了问题，有很多的好处。比如，如果你的catch代码里面包含log，它可以提供给你更加精确的错误信息，这样会大大地加速你的调试过程。</p>
<h3 id="u6B63_u786E_u5904_u7406null_u6307_u9488"><a href="#u6B63_u786E_u5904_u7406null_u6307_u9488" class="headerlink" title="正确处理null指针"></a>正确处理null指针</h3><hr>
<p>穷举的思想是如此的有用，依据这个原理，我们可以推出一些基本原则，它们可以让你无懈可击的处理null指针。</p>
<p>首先你应该知道，许多语言（C，C++，Java，C#，……）的类型系统对于null的处理，其实是完全错误的。这个错误源自于Tony Hoare最早的设计，Hoare把这个错误称为自己的“billion dollar mistake”，因为由于它所产生的财产和人力损失，远远超过十亿美元。</p>
<p>这些语言的类型系统允许null出现在任何对象（指针）类型可以出现的地方，然而null其实根本不是一个合法的对象。它不是一个String，不是一个Integer，也不是一个自定义的类。null的类型本来应该是NULL，也就是null自己。根据这个基本观点，我们推导出以下原则：</p>
<ul>
<li><p>尽量不要产生null指针。尽量不要用null来初始化变量，函数尽量不要返回null。如果你的函数要返回“没有”，“出错了”之类的结果，尽量使用Java的异常机制。虽然写法上有点别扭，然而Java的异常，和函数的返回值合并在一起，基本上可以当成union类型来用。比如，如果你有一个函数find，可以帮你找到一个String，也有可能什么也找不到，你可以这样写：</p>
<pre><code>public String find() throws NotFoundException {
  if (...) {
    return ...;
  } else {
    throw new NotFoundException();
  }
}
</code></pre><p>Java的类型系统会强制你catch这个NotFoundException，所以你不可能像漏掉检查null一样，漏掉这种情况。Java的异常也是一个比较容易滥用的东西，不过我已经在上一节告诉你如何正确的使用异常。</p>
<p>Java的try…catch语法相当的繁琐和蹩脚，所以如果你足够小心的话，像find这类函数，也可以返回null来表示“没找到”。这样稍微好看一些，因为你调用的时候不必用try…catch。很多人写的函数，返回null来表示“出错了”，这其实是对null的误用。“出错了”和“没有”，其实完全是两码事。“没有”是一种很常见，正常的情况，比如查哈希表没找到，很正常。“出错了”则表示罕见的情况，本来正常情况下都应该存在有意义的值，偶然出了问题。如果你的函数要表示“出错了”，应该使用异常，而不是null。</p>
</li>
<li><p>不要把null放进“容器数据结构”里面。所谓容器（collection），是指一些对象以某种方式集合在一起，所以null不应该被放进Array，List，Set等结构，不应该出现在Map的key或者value里面。把null放进容器里面，是一些莫名其妙错误的来源。因为对象在容器里的位置一般是动态决定的，所以一旦null从某个入口跑进去了，你就很难再搞明白它去了哪里，你就得被迫在所有从这个容器里取值的位置检查null。你也很难知道到底是谁把它放进去的，代码多了就导致调试极其困难。</p>
<p>解决方案是：如果你真要表示“没有”，那你就干脆不要把它放进去（Array，List，Set没有元素，Map根本没那个entry），或者你可以指定一个特殊的，真正合法的对象，用来表示“没有”。</p>
<p>需要指出的是，类对象并不属于容器。所以null在必要的时候，可以作为对象成员的值，表示它不存在。比如：</p>
<pre><code>class A {
  String name = null;
  ...
}
</code></pre><p>之所以可以这样，是因为null只可能在A对象的name成员里出现，你不用怀疑其它的成员因此成为null。所以你每次访问name成员时，检查它是否是null就可以了，不需要对其他成员也做同样的检查。</p>
</li>
<li><p>函数调用者：明确理解null所表示的意义，尽早检查和处理null返回值，减少它的传播。null很讨厌的一个地方，在于它在不同的地方可能表示不同的意义。有时候它表示“没有”，“没找到”。有时候它表示“出错了”，“失败了”。有时候它甚至可以表示“成功了”，…… 这其中有很多误用之处，不过无论如何，你必须理解每一个null的意义，不能给混淆起来。</p>
<p>如果你调用的函数有可能返回null，那么你应该在第一时间对null做出“有意义”的处理。比如，上述的函数find，返回null表示“没找到”，那么调用find的代码就应该在它返回的第一时间，检查返回值是否是null，并且对“没找到”这种情况，作出有意义的处理。</p>
<p>“有意义”是什么意思呢？我的意思是，使用这函数的人，应该明确的知道在拿到null的情况下该怎么做，承担起责任来。他不应该只是“向上级汇报”，把责任踢给自己的调用者。如果你违反了这一点，就有可能采用一种不负责任，危险的写法：</p>
<pre><code>public String foo() {
  String found = find();
  if (found == null) {
    return null;
  }
}
</code></pre><p>当看到find()返回了null，foo自己也返回null。这样null就从一个地方，游走到了另一个地方，而且它表示另外一个意思。如果你不假思索就写出这样的代码，最后的结果就是代码里面随时随地都可能出现null。到后来为了保护自己，你的每个函数都会写成这样：</p>
<pre><code>public void foo(A a, B b, C c) {
  if (a == null) { ... }
  if (b == null) { ... }
  if (c == null) { ... }
  ...
}
</code></pre></li>
<li><p>函数作者：明确声明不接受null参数，当参数是null时立即崩溃。不要试图对null进行“容错”，不要让程序继续往下执行。如果调用者使用了null作为参数，那么调用者（而不是函数作者）应该对程序的崩溃负全责。</p>
<p>上面的例子之所以成为问题，就在于人们对于null的“容忍态度”。这种“保护式”的写法，试图“容错”，试图“优雅的处理null”，其结果是让调用者更加肆无忌惮的传递null给你的函数。到后来，你的代码里出现一堆堆nonsense的情况，null可以在任何地方出现，都不知道到底是哪里产生出来的。谁也不知道出现了null是什么意思，该做什么，所有人都把null踢给其他人。最后这null像瘟疫一样蔓延开来，到处都是，成为一场噩梦。</p>
<p>正确的做法，其实是强硬的态度。你要告诉函数的使用者，我的参数全都不能是null，如果你给我null，程序崩溃了该你自己负责。至于调用者代码里有null怎么办，他自己该知道怎么处理（参考以上几条），不应该由函数作者来操心。</p>
<p>采用强硬态度一个很简单的做法是使用Objects.requireNonNull()。它的定义很简单：</p>
<pre><code>public static &lt;T&gt; T requireNonNull(T obj) {
  if (obj == null) {
    throw new NullPointerException();
  } else {
    return obj;
  }
}
</code></pre><p>你可以用这个函数来检查不想接受null的每一个参数，只要传进来的参数是null，就会立即触发NullPointerException崩溃掉，这样你就可以有效地防止null指针不知不觉传递到其它地方去。</p>
</li>
<li><p>使用@NotNull和@Nullable标记。IntelliJ提供了@NotNull和@Nullable两种标记，加在类型前面，这样可以比较简洁可靠地防止null指针的出现。IntelliJ本身会对含有这种标记的代码进行静态分析，指出运行时可能出现NullPointerException的地方。在运行时，会在null指针不该出现的地方产生IllegalArgumentException，即使那个null指针你从来没有deference。这样你可以在尽量早期发现并且防止null指针的出现。</p>
</li>
<li><p>使用Optional类型。Java 8和Swift之类的语言，提供了一种叫Optional的类型。正确的使用这种类型，可以在很大程度上避免null的问题。null指针的问题之所以存在，是因为你可以在没有“检查”null的情况下，“访问”对象的成员。</p>
<p>Optional类型的设计原理，就是把“检查”和“访问”这两个操作合二为一，成为一个“原子操作”。这样你没法只访问，而不进行检查。这种做法其实是ML，Haskell等语言里的模式匹配（pattern matching）的一个特例。模式匹配使得类型判断和访问成员这两种操作合二为一，所以你没法犯错。</p>
<p>比如，在Swift里面，你可以这样写：</p>
<pre><code>let found = find()
if let content = found {
  print(&quot;found: &quot; + content)
}
</code></pre><p>你从find()函数得到一个Optional类型的值found。假设它的类型是String?，那个问号表示它可能包含一个String，也可能是nil。然后你就可以用一种特殊的if语句，同时进行null检查和访问其中的内容。这个if语句跟普通的if语句不一样，它的条件不是一个Bool，而是一个变量绑定let content = found。</p>
<p>我不是很喜欢这语法，不过这整个语句的含义是：如果found是nil，那么整个if语句被略过。如果它不是nil，那么变量content被绑定到found里面的值（unwrap操作），然后执行print(“found: “ + content)。由于这种写法把检查和访问合并在了一起，你没法只进行访问而不检查。</p>
<p>Java 8的做法比较蹩脚一些。如果你得到一个Optional类型的值found，你必须使用“函数式编程”的方式，来写这之后的代码：</p>
<pre><code>Optional&lt;String&gt; found = find();
found.ifPresent(content -&gt; System.out.println(&quot;found: &quot; + content));
</code></pre><p>这段Java代码跟上面的Swift代码等价，它包含一个“判断”和一个“取值”操作。ifPresent先判断found是否有值（相当于判断是不是null）。如果有，那么将其内容“绑定”到lambda表达式的content参数（unwrap操作），然后执行lambda里面的内容，否则如果found没有内容，那么ifPresent里面的lambda不执行。</p>
<p>Java的这种设计有个问题。判断null之后分支里的内容，全都得写在lambda里面。在函数式编程里，这个lambda叫做“continuation”，Java把它叫做 “Consumer”，它表示“如果found不是null，拿到它的值，然后应该做什么”。由于lambda是个函数，你不能在里面写return语句返回出外层的函数。比如，如果你要改写下面这个函数（含有null）：</p>
<pre><code>public static String foo() {
  String found = find();
  if (found != null) {
    return found;
  } else {
    return &quot;&quot;;
  }
}
</code></pre><p>就会比较麻烦。因为如果你写成这样：</p>
<pre><code>public static String foo() {
  Optional&lt;String&gt; found = find();
  found.ifPresent(content -&gt; {
    return content;    // can&apos;t return from foo here
  });
  return &quot;&quot;;
}
</code></pre><p>里面的return a，并不能从函数foo返回出去。它只会从lambda返回，而且由于那个lambda（Consumer.accept）的返回类型必须是void，编译器会报错，说你返回了String。由于Java里closure的自由变量是只读的，你没法对lambda外面的变量进行赋值，所以你也不能采用这种写法：</p>
<pre><code>public static String foo() {
  Optional&lt;String&gt; found = find();
  String result = &quot;&quot;;
  found.ifPresent(content -&gt; {
    result = content;    // can&apos;t assign to result
  });
  return result;
}
</code></pre><p>所以，虽然你在lambda里面得到了found的内容，如何使用这个值，如何返回一个值，却让人摸不着头脑。你平时的那些Java编程手法，在这里几乎完全废掉了。实际上，判断null之后，你必须使用Java 8提供的一系列古怪的函数式编程操作：map, flatMap, orElse之类，想法把它们组合起来，才能表达出原来代码的意思。比如之前的代码，只能改写成这样：</p>
<pre><code>public static String foo() {
  Optional&lt;String&gt; found = find();
  return found.orElse(&quot;&quot;);
}
</code></pre><p>这简单的情况还好。复杂一点的代码，我还真不知道怎么表达，我怀疑Java 8的Optional类型的方法，到底有没有提供足够的表达力。那里面少数几个东西表达能力不咋的，论工作原理，却可以扯到functor，continuation，甚至monad等高深的理论…… 仿佛用了Optional之后，这语言就不再是Java了一样。</p>
<p>所以Java虽然提供了Optional，但我觉得可用性其实比较低，难以被人接受。相比之下，Swift的设计更加简单直观，接近普通的过程式编程。你只需要记住一个特殊的语法if let content = found {…}，里面的代码写法，跟普通的过程式语言没有任何差别。</p>
<p>总之你只要记住，使用Optional类型，要点在于“原子操作”，使得null检查与取值合二为一。这要求你必须使用我刚才介绍的特殊写法。如果你违反了这一原则，把检查和取值分成两步做，还是有可能犯错误。比如在Java 8里面，你可以使用found.get()这样的方式直接访问found里面的内容。在Swift里你也可以使用found!来直接访问而不进行检查。</p>
<p>你可以写这样的Java代码来使用Optional类型：</p>
<pre><code>Option&lt;String&gt; found = find();
if (found.isPresent()) {
  System.out.println(&quot;found: &quot; + found.get());
}
</code></pre><p>如果你使用这种方式，把检查和取值分成两步做，就可能会出现运行时错误。if (found.isPresent())本质上跟普通的null检查，其实没什么两样。如果你忘记判断found.isPresent()，直接进行found.get()，就会出现NoSuchElementException。这跟NullPointerException本质上是一回事。所以这种写法，比起普通的null的用法，其实换汤不换药。如果你要用Optional类型而得到它的益处，请务必遵循我之前介绍的“原子操作”写法。</p>
</li>
</ul>
<h3 id="u9632_u6B62_u8FC7_u5EA6_u5DE5_u7A0B"><a href="#u9632_u6B62_u8FC7_u5EA6_u5DE5_u7A0B" class="headerlink" title="防止过度工程"></a>防止过度工程</h3><hr>
<p>人的脑子真是奇妙的东西。虽然大家都知道过度工程（over-engineering）不好，在实际的工程中却经常不由自主的出现过度工程。我自己也犯过好多次这种错误，所以觉得有必要分析一下，过度工程出现的信号和兆头，这样可以在初期的时候就及时发现并且避免。</p>
<p>过度工程即将出现的一个重要信号，就是当你过度的思考“将来”，考虑一些还没有发生的事情，还没有出现的需求。比如，“如果我们将来有了上百万行代码，有了几千号人，这样的工具就支持不了了”，“将来我可能需要这个功能，所以我现在就把代码写来放在那里”，“将来很多人要扩充这片代码，所以现在我们就让它变得可重用”……</p>
<p>这就是为什么很多软件项目如此复杂。实际上没做多少事情，却为了所谓的“将来”，加入了很多不必要的复杂性。眼前的问题还没解决呢，就被“将来”给拖垮了。人们都不喜欢目光短浅的人，然而在现实的工程中，有时候你就是得看近一点，把手头的问题先搞定了，再谈以后扩展的问题。</p>
<p>另外一种过度工程的来源，是过度的关心“代码重用”。很多人“可用”的代码还没写出来呢，就在关心“重用”。为了让代码可以重用，最后被自己搞出来的各种框架捆住手脚，最后连可用的代码就没写好。如果可用的代码都写不好，又何谈重用呢？很多一开头就考虑太多重用的工程，到后来被人完全抛弃，没人用了，因为别人发现这些代码太难懂了，自己从头开始写一个，反而省好多事。</p>
<p>过度地关心“测试”，也会引起过度工程。有些人为了测试，把本来很简单的代码改成“方便测试”的形式，结果引入很多复杂性，以至于本来一下就能写对的代码，最后复杂不堪，出现很多bug。</p>
<p>世界上有两种“没有bug”的代码。一种是“没有明显的bug的代码”，另一种是“明显没有bug的代码”。第一种情况，由于代码复杂不堪，加上很多测试，各种coverage，貌似测试都通过了，所以就认为代码是正确的。第二种情况，由于代码简单直接，就算没写很多测试，你一眼看去就知道它不可能有bug。你喜欢哪一种“没有bug”的代码呢？</p>
<p>根据这些，我总结出来的防止过度工程的原则如下：</p>
<ol>
<li>先把眼前的问题解决掉，解决好，再考虑将来的扩展问题。</li>
<li>先写出可用的代码，反复推敲，再考虑是否需要重用的问题。</li>
<li>先写出可用，简单，明显没有bug的代码，再考虑测试的问题。</li>
</ol>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/16/zendstudio-install-emmet/" itemprop="url">
                  ZendStudio 安装 Emmet
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-03-16T16:58:58+08:00" content="2015-03-16">
              2015-03-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h3 id="u5DE5_u5177/_u539F_u6599"><a href="#u5DE5_u5177/_u539F_u6599" class="headerlink" title="工具/原料"></a>工具/原料</h3><h4 id="1-_zendstudio_u73AF_u5883"><a href="#1-_zendstudio_u73AF_u5883" class="headerlink" title="1. zendstudio环境"></a>1. zendstudio环境</h4><h4 id="2-__u7535_u8111"><a href="#2-__u7535_u8111" class="headerlink" title="2. 电脑"></a>2. 电脑</h4><h3 id="u65B9_u6CD5/_u6B65_u9AA4"><a href="#u65B9_u6CD5/_u6B65_u9AA4" class="headerlink" title="方法/步骤"></a>方法/步骤</h3><h4 id="1-__u6253_u5F00zendstudio_uFF0C_u4EE5_u4E0B_u7B80_u79F0zd_2C_u6700_u4E0A_u9762_u7684_u5BFC_u822A_u4E2D_u70B9_u51FB_u201DHelp_u201D_u2014-_26gt_3B_u201DInstall_New_Software_u201D"><a href="#1-__u6253_u5F00zendstudio_uFF0C_u4EE5_u4E0B_u7B80_u79F0zd_2C_u6700_u4E0A_u9762_u7684_u5BFC_u822A_u4E2D_u70B9_u51FB_u201DHelp_u201D_u2014-_26gt_3B_u201DInstall_New_Software_u201D" class="headerlink" title="1. 打开zendstudio，以下简称zd,最上面的导航中点击”Help”—-&gt;”Install New Software”"></a>1. 打开zendstudio，以下简称zd,最上面的导航中点击”Help”—-&gt;”Install New Software”</h4><p><img src="http://ww3.sinaimg.cn/mw690/6ba3371bjw1eq9ncrk7oyj20dc09kgmv.jpg" alt=""></p>
<h4 id="2-__u5728_u201DWork_with_3A_u201D_u540E_u9762_u7684_u8F93_u5165_u6846_u4E2D_u8F93_u5165_u7F51_u5740_uFF0C_u7F51_u5740_u5728_u56FE_u7247_u4E2D_uFF0C_u767E_u5EA6_u4E0D_u8BA9_u63D0_u4EA4_u7F51_u5740_uFF0C_u8F93_u5165_u7F51_u5740_u540E_u9700_u8981_u7B49_u4E00_u4F1A_2Czd_u5728_u5E2E_u4F60_u627E_u8F6F_u4EF6_uFF0C_u5982_u679C_u9009_u62E9_u540E_uFF0C_u4E0B_u4E00_u6B65"><a href="#2-__u5728_u201DWork_with_3A_u201D_u540E_u9762_u7684_u8F93_u5165_u6846_u4E2D_u8F93_u5165_u7F51_u5740_uFF0C_u7F51_u5740_u5728_u56FE_u7247_u4E2D_uFF0C_u767E_u5EA6_u4E0D_u8BA9_u63D0_u4EA4_u7F51_u5740_uFF0C_u8F93_u5165_u7F51_u5740_u540E_u9700_u8981_u7B49_u4E00_u4F1A_2Czd_u5728_u5E2E_u4F60_u627E_u8F6F_u4EF6_uFF0C_u5982_u679C_u9009_u62E9_u540E_uFF0C_u4E0B_u4E00_u6B65" class="headerlink" title="2. 在”Work with:”后面的输入框中输入网址，网址在图片中，百度不让提交网址，输入网址后需要等一会,zd在帮你找软件，如果选择后，下一步"></a>2. 在”Work with:”后面的输入框中输入网址，网址在图片中，百度不让提交网址，输入网址后需要等一会,zd在帮你找软件，如果选择后，下一步</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://emmet.io/eclipse/updates/site.xml</span><br></pre></td></tr></table></figure>
<p><img src="http://ww2.sinaimg.cn/mw690/6ba3371bjw1eq9ncv48tjj20dc09bmy9.jpg" alt=""></p>
<h4 id="3-__u518D_u201Dnext_u201D"><a href="#3-__u518D_u201Dnext_u201D" class="headerlink" title="3. 再”next”"></a>3. 再”next”</h4><p><img src="http://ww4.sinaimg.cn/mw690/6ba3371bjw1eq9ncvfuf1j20k70kk40j.jpg" alt=""></p>
<h4 id="4-__u9009_u62E9_u201DI_agree_u2026_u2026_u201D_uFF0C_u518D_u201Dfinish_u201D"><a href="#4-__u9009_u62E9_u201DI_agree_u2026_u2026_u201D_uFF0C_u518D_u201Dfinish_u201D" class="headerlink" title="4. 选择”I agree……”，再”finish”"></a>4. 选择”I agree……”，再”finish”</h4><p><img src="http://ww3.sinaimg.cn/mw690/6ba3371bjw1eq9ncvs10bj20k40kfq9u.jpg" alt=""></p>
<h4 id="5-__u8FD9_u65F6_u4F1A_u770B_u5230_uFF0C_u5B89_u88C5_u754C_u9762"><a href="#5-__u8FD9_u65F6_u4F1A_u770B_u5230_uFF0C_u5B89_u88C5_u754C_u9762" class="headerlink" title="5. 这时会看到，安装界面"></a>5. 这时会看到，安装界面</h4><p><img src="http://ww4.sinaimg.cn/mw690/6ba3371bjw1eq9ncw9jb1j20j40bhdh9.jpg" alt=""></p>
<h4 id="6-__u5B89_u88C5_u8FC7_u7A0B_u4E2D_u4F1A_u8DF3_u8F6C_u51FA_u8FD9_u6837_u7684_u5BF9_u8BDD_u6846_uFF0C_u76F4_u63A5_u201DOK_u201D"><a href="#6-__u5B89_u88C5_u8FC7_u7A0B_u4E2D_u4F1A_u8DF3_u8F6C_u51FA_u8FD9_u6837_u7684_u5BF9_u8BDD_u6846_uFF0C_u76F4_u63A5_u201DOK_u201D" class="headerlink" title="6. 安装过程中会跳转出这样的对话框，直接”OK”"></a>6. 安装过程中会跳转出这样的对话框，直接”OK”</h4><p><img src="http://ww4.sinaimg.cn/mw690/6ba3371bjw1eq9ncwk7qij20ku0dcjt3.jpg" alt=""></p>
<h4 id="7-__u5B89_u88C5_u6210_u529F_u540E_u4F1A_u63D0_u793A_u662F_u5426_u8BA9zd_u91CD_u542F_u4E0B_uFF0C_u91CD_u542F_u4E0Bemmet_u5C31_u751F_u6548_u4E86_uFF0C_u9009_u62E9_u7B2C_u4E00_u9879_u91CD_u542F"><a href="#7-__u5B89_u88C5_u6210_u529F_u540E_u4F1A_u63D0_u793A_u662F_u5426_u8BA9zd_u91CD_u542F_u4E0B_uFF0C_u91CD_u542F_u4E0Bemmet_u5C31_u751F_u6548_u4E86_uFF0C_u9009_u62E9_u7B2C_u4E00_u9879_u91CD_u542F" class="headerlink" title="7. 安装成功后会提示是否让zd重启下，重启下emmet就生效了，选择第一项重启"></a>7. 安装成功后会提示是否让zd重启下，重启下emmet就生效了，选择第一项重启</h4><p><img src="http://ww2.sinaimg.cn/mw690/6ba3371bjw1eq9ncww2o0j20nh0coabo.jpg" alt=""></p>
<h4 id="8-__u8FD9_u65F6_u5EFA_u7ACB_u4E00_u4E2A_u6D4B_u8BD5_u9875_u9762_uFF0C_u5728_u91CC_u9762_u8F93_u5165_u4E00_u4E2A_u611F_u53F9_u53F7_u201C_uFF01_u201D_2C_u518D_u6309_u4E0B_u201Dtab_u201D_u952E_uFF0C_u4F60_u4F1A_u770B_u5230_u81EA_u52A8_u751F_u6210_u7684_u4EE3_u7801_uFF0C_u5173_u4E8E_u5982_u679C_u4F7F_u7528emmet_uFF0C_u4E0B_u4E00_u7BC7_u4F1A_u63D0_u5230"><a href="#8-__u8FD9_u65F6_u5EFA_u7ACB_u4E00_u4E2A_u6D4B_u8BD5_u9875_u9762_uFF0C_u5728_u91CC_u9762_u8F93_u5165_u4E00_u4E2A_u611F_u53F9_u53F7_u201C_uFF01_u201D_2C_u518D_u6309_u4E0B_u201Dtab_u201D_u952E_uFF0C_u4F60_u4F1A_u770B_u5230_u81EA_u52A8_u751F_u6210_u7684_u4EE3_u7801_uFF0C_u5173_u4E8E_u5982_u679C_u4F7F_u7528emmet_uFF0C_u4E0B_u4E00_u7BC7_u4F1A_u63D0_u5230" class="headerlink" title="8. 这时建立一个测试页面，在里面输入一个感叹号“！”,再按下”tab”键，你会看到自动生成的代码，关于如果使用emmet，下一篇会提到"></a>8. 这时建立一个测试页面，在里面输入一个感叹号“！”,再按下”tab”键，你会看到自动生成的代码，关于如果使用emmet，下一篇会提到</h4><p><img src="http://ww3.sinaimg.cn/mw690/6ba3371bjw1eq9ncx6sd7j20ag05wt9b.jpg" alt=""></p>
<p><img src="http://ww1.sinaimg.cn/mw690/6ba3371bjw1eq9ncxg30vj20ag07hq41.jpg" alt=""></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/14/programmers-must-know-10-basis algorithm/" itemprop="url">
                  程序员必须知道的10大基础实用算法及其讲解 (转)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-03-14T16:18:18+08:00" content="2015-03-14">
              2015-03-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p><img src="http://ww2.sinaimg.cn/mw690/6ba3371bjw1eq5bhdyjjuj20hs0boab9.jpg" alt=""></p>
<h3 id="u7B97_u6CD5_u4E00_uFF1A_u5FEB_u901F_u6392_u5E8F_u7B97_u6CD5"><a href="#u7B97_u6CD5_u4E00_uFF1A_u5FEB_u901F_u6392_u5E8F_u7B97_u6CD5" class="headerlink" title="算法一：快速排序算法"></a>算法一：快速排序算法</h3><p>快速排序是由东尼·霍尔所发展的一种排序算法。在平均状况下，排序 n 个项目要Ο(n log n)次比较。在最坏状况下则需要Ο(n2)次比较，但这种状况并不常见。事实上，快速排序通常明显比其他Ο(n log n) 算法更快，因为它的内部循环(inner loop)可以在大部分的架构上很有效率地被实现出来。</p>
<p>快速排序使用分治法(Divide and conquer)策略来把一个串行(list)分为两个子串行(sub-lists)。</p>
<p><img src="http://ww1.sinaimg.cn/mw690/6ba3371bjw1eq5bhepmzlj207s05yweg.jpg" alt=""></p>
<p>算法步骤：</p>
<ol>
<li>从数列中挑出一个元素，称为 “基准”(pivot)。</li>
<li>重新排序数列，所有元素比基准值小的摆放在基准前面，所有元素比基准值大的摆在基准的后面(相同的数可以到任一边)。在这个分区退出之后，该基准就处于数列的中间位置。这个称为分区(partition)操作。</li>
<li>递归地(recursive)把小于基准值元素的子数列和大于基准值元素的子数列排序。</li>
</ol>
<p>递归的最底部情形，是数列的大小是零或一，也就是永远都已经被排序好了。虽然一直递归下去，但是这个算法总会退出，因为在每次的迭代(iteration)中，它至少会把一个元素摆到它最后的位置去。</p>
<h3 id="u7B97_u6CD5_u4E8C_uFF1A_u5806_u6392_u5E8F_u7B97_u6CD5"><a href="#u7B97_u6CD5_u4E8C_uFF1A_u5806_u6392_u5E8F_u7B97_u6CD5" class="headerlink" title="算法二：堆排序算法"></a>算法二：堆排序算法</h3><p>堆排序(Heapsort)是指利用堆这种数据结构所设计的一种排序算法。堆积是一个近似完全二叉树的结构，并同时满足堆积的性质：即子结点的键值或索引总是小于(或者大于)它的父节点。</p>
<p>堆排序的平均时间复杂度为Ο(nlogn) 。</p>
<p><img src="http://ww1.sinaimg.cn/mw690/6ba3371bjw1eq5bheuw6gj207s05yt8o.jpg" alt=""></p>
<p>算法步骤：</p>
<ol>
<li>创建一个堆H[0..n-1]。</li>
<li>把堆首(最大值)和堆尾互换。</li>
<li>把堆的尺寸缩小1，并调用shift_down(0),目的是把新的数组顶端数据调整到相应位置。</li>
<li>重复步骤2，直到堆的尺寸为1。</li>
</ol>
<h3 id="u7B97_u6CD5_u4E09_uFF1A_u5F52_u5E76_u6392_u5E8F"><a href="#u7B97_u6CD5_u4E09_uFF1A_u5F52_u5E76_u6392_u5E8F" class="headerlink" title="算法三：归并排序"></a>算法三：归并排序</h3><p>归并排序(Merge sort，台湾译作：合并排序)是建立在归并操作上的一种有效的排序算法。该算法是采用分治法(Divide and Conquer)的一个非常典型的应用。</p>
<p>算法步骤</p>
<ol>
<li>申请空间，使其大小为两个已经排序序列之和，该空间用来存放合并后的序列。</li>
<li>设定两个指针，最初位置分别为两个已经排序序列的起始位置。</li>
<li>比较两个指针所指向的元素，选择相对小的元素放入到合并空间，并移动指针到下一位置。</li>
<li>重复步骤3直到某一指针达到序列尾。</li>
<li>将另一序列剩下的所有元素直接复制到合并序列尾。</li>
</ol>
<p><img src="http://ww1.sinaimg.cn/mw690/6ba3371bjw1eq67id0jzfj20kk0cz40z.jpg" alt=""></p>
<p><img src="http://ww2.sinaimg.cn/mw690/6ba3371bjw1eq5bhfbb0hj208606k3yt.jpg" alt=""></p>
<h3 id="u7B97_u6CD5_u56DB_uFF1A_u4E8C_u5206_u67E5_u627E_u7B97_u6CD5"><a href="#u7B97_u6CD5_u56DB_uFF1A_u4E8C_u5206_u67E5_u627E_u7B97_u6CD5" class="headerlink" title="算法四：二分查找算法"></a>算法四：二分查找算法</h3><p>二分查找算法是一种在有序数组中查找某一特定元素的搜索算法。搜素过程从数组的中间元素开始，如果中间元素正好是要查找的元素，则搜素过程结束;如果某一特定元素大于或者小于中间元素，则在数组大于或小于中间元素的那一半中查找，而且跟开始一样从中间元素开始比较。如果在某一步骤数组为空，则代表找不到。这种搜索算法每一次比较都使搜索范围缩小一半。折半搜索每次把搜索区域减少一半，时间复杂度为Ο(logn) 。</p>
<h3 id="u7B97_u6CD5_u4E94_uFF1ABFPRT_28_u7EBF_u6027_u67E5_u627E_u7B97_u6CD5_29"><a href="#u7B97_u6CD5_u4E94_uFF1ABFPRT_28_u7EBF_u6027_u67E5_u627E_u7B97_u6CD5_29" class="headerlink" title="算法五：BFPRT(线性查找算法)"></a>算法五：BFPRT(线性查找算法)</h3><p>BFPRT算法解决的问题十分经典，即从某n个元素的序列中选出第k大(第k小)的元素，通过巧妙的分析，BFPRT可以保证在最坏情况下仍为线性时间复杂度。该算法的思想与快速排序思想相似，当然，为使得算法在最坏情况下，依然能达到o(n)的时间复杂度，五位算法作者做了精妙的处理。</p>
<p>算法步骤：</p>
<ol>
<li>将n个元素每5个一组，分成n/5(上界)组。</li>
<li>取出每一组的中位数，任意排序方法，比如插入排序。</li>
<li>递归的调用selection算法查找上一步中所有中位数的中位数，设为x，偶数个中位数的情况下设定为选取中间小的一个。</li>
<li>用x来分割数组，设小于等于x的个数为k，大于x的个数即为n-k。</li>
<li>若i==k，返回x;若ik，在大于x的元素中递归查找第i-k小的元素。<br>终止条件：n=1时，返回的即是i小元素。</li>
</ol>
<h3 id="u7B97_u6CD5_u516D_uFF1ADFS_28_u6DF1_u5EA6_u4F18_u5148_u641C_u7D22_29"><a href="#u7B97_u6CD5_u516D_uFF1ADFS_28_u6DF1_u5EA6_u4F18_u5148_u641C_u7D22_29" class="headerlink" title="算法六：DFS(深度优先搜索)"></a>算法六：DFS(深度优先搜索)</h3><p>深度优先搜索算法(Depth-First-Search)，是搜索算法的一种。它沿着树的深度遍历树的节点，尽可能深的搜索树的分支。当节点v的所有边都己被探寻过，搜索将回溯到发现节点v的那条边的起始节点。这一过程一直进行到已发现从源节点可达的所有节点为止。如果还存在未被发现的节点，则选择其中一个作为源节点并重复以上过程，整个进程反复进行直到所有节点都被访问为止。DFS属于盲目搜索。<br>深度优先搜索是图论中的经典算法，利用深度优先搜索算法可以产生目标图的相应拓扑排序表，利用拓扑排序表可以方便的解决很多相关的图论问题，如最大路径问题等等。一般用堆数据结构来辅助实现DFS算法。</p>
<p>深度优先遍历图算法步骤：</p>
<ol>
<li>访问顶点v。</li>
<li>依次从v的未被访问的邻接点出发，对图进行深度优先遍历;直至图中和v有路径相通的顶点都被访问。</li>
<li>若此时图中尚有顶点未被访问，则从一个未被访问的顶点出发，重新进行深度优先遍历，直到图中所有顶点均被访问过为止。</li>
</ol>
<p>上述描述可能比较抽象，举个实例：<br>DFS 在访问图中某一起始顶点 v 后，由 v 出发，访问它的任一邻接顶点 w1;再从 w1 出发，访问与 w1邻 接但还没有访问过的顶点 w2;然后再从 w2 出发，进行类似的访问，… 如此进行下去，直至到达所有的邻接顶点都被访问过的顶点 u 为止。<br>接着，退回一步，退到前一次刚访问过的顶点，看是否还有其它没有被访问的邻接顶点。如果有，则访问此顶点，之后再从此顶点出发，进行与前述类似的访问;如果没有，就再退回一步进行搜索。重复上述过程，直到连通图中所有顶点都被访问过为止。</p>
<h3 id="u7B97_u6CD5_u4E03_uFF1ABFS_28_u5E7F_u5EA6_u4F18_u5148_u641C_u7D22_29"><a href="#u7B97_u6CD5_u4E03_uFF1ABFS_28_u5E7F_u5EA6_u4F18_u5148_u641C_u7D22_29" class="headerlink" title="算法七：BFS(广度优先搜索)"></a>算法七：BFS(广度优先搜索)</h3><p>广度优先搜索算法(Breadth-First-Search)，是一种图形搜索算法。简单的说，BFS是从根节点开始，沿着树(图)的宽度遍历树(图)的节点。如果所有节点均被访问，则算法中止。BFS同样属于盲目搜索。一般用队列数据结构来辅助实现BFS算法。</p>
<p>算法步骤：</p>
<ol>
<li>首先将根节点放入队列中。</li>
<li>从队列中取出第一个节点，并检验它是否为目标。如果找到目标，则结束搜寻并回传结果，否则将它所有尚未检验过的直接子节点加入队列中。</li>
<li>若队列为空，表示整张图都检查过了——亦即图中没有欲搜寻的目标。结束搜寻并回传“找不到目标”。</li>
<li>重复步骤2。</li>
</ol>
<p><img src="http://ww3.sinaimg.cn/mw690/6ba3371bjw1eq5bhfvbb4j206l069aa2.jpg" alt=""></p>
<h3 id="u7B97_u6CD5_u516B_uFF1ADijkstra_u7B97_u6CD5"><a href="#u7B97_u6CD5_u516B_uFF1ADijkstra_u7B97_u6CD5" class="headerlink" title="算法八：Dijkstra算法"></a>算法八：Dijkstra算法</h3><p>戴克斯特拉算法(Dijkstra’s algorithm)是由荷兰计算机科学家艾兹赫尔·戴克斯特拉提出。迪科斯彻算法使用了广度优先搜索解决非负权有向图的单源最短路径问题，算法最终得到一个最短路径树。该算法常用于路由算法或者作为其他图算法的一个子模块。<br>该算法的输入包含了一个有权重的有向图 G，以及G中的一个来源顶点 S。我们以 V 表示 G 中所有顶点的集合。每一个图中的边，都是两个顶点所形成的有序元素对。(u, v) 表示从顶点 u 到 v 有路径相连。我们以 E 表示G中所有边的集合，而边的权重则由权重函数 w: E → [0, ∞] 定义。因此，w(u, v) 就是从顶点 u 到顶点 v 的非负权重(weight)。边的权重可以想像成两个顶点之间的距离。任两点间路径的权重，就是该路径上所有边的权重总和。已知有 V 中有顶点 s 及 t，Dijkstra 算法可以找到 s 到 t的最低权重路径(例如，最短路径)。这个算法也可以在一个图中，找到从一个顶点 s 到任何其他顶点的最短路径。对于不含负权的有向图，Dijkstra算法是目前已知的最快的单源最短路径算法。</p>
<p>算法步骤：</p>
<ol>
<li>初始时令 S={V0},T={其余顶点}，T中顶点对应的距离值，若存在，d(V0,Vi)为弧上的权值，若不存在，d(V0,Vi)为∞。</li>
<li>从T中选取一个其距离值为最小的顶点W且不在S中，加入S。</li>
<li>对其余T中顶点的距离值进行修改：若加进W作中间顶点，从V0到Vi的距离值缩短，则修改此距离值。</li>
<li>重复上述步骤2、3，直到S中包含所有顶点，即W=Vi为止。</li>
</ol>
<p><img src="http://ww3.sinaimg.cn/mw690/6ba3371bjw1eq5bhg6r7nj209907kjrm.jpg" alt=""></p>
<h3 id="u7B97_u6CD5_u4E5D_uFF1A_u52A8_u6001_u89C4_u5212_u7B97_u6CD5"><a href="#u7B97_u6CD5_u4E5D_uFF1A_u52A8_u6001_u89C4_u5212_u7B97_u6CD5" class="headerlink" title="算法九：动态规划算法"></a>算法九：动态规划算法</h3><p>动态规划(Dynamic programming)是一种在数学、计算机科学和经济学中使用的，通过把原问题分解为相对简单的子问题的方式求解复杂问题的方法。 动态规划常常适用于有重叠子问题和最优子结构性质的问题，动态规划方法所耗时间往往远少于朴素解法。<br>动态规划背后的基本思想非常简单。大致上，若要解一个给定问题，我们需要解其不同部分(即子问题)，再合并子问题的解以得出原问题的解。<br>通常许多子问题非常相似，为此动态规划法试图仅仅解决每个子问题一次，从而减少计算量：<br>一旦某个给定子问题的解已经算出，则将其记忆化存储，以便下次需要同一个子问题解之时直接查表。<br>这种做法在重复子问题的数目关于输入的规模呈指数增长时特别有用。<br>关于动态规划最经典的问题当属背包问题。</p>
<p>算法步骤：</p>
<ol>
<li>最优子结构性质。如果问题的最优解所包含的子问题的解也是最优的，我们就称该问题具有最优子结构性质(即满足最优化原理)。最优子结构性质为动态规划算法解决问题提供了重要线索。</li>
<li>子问题重叠性质。子问题重叠性质是指在用递归算法自顶向下对问题进行求解时，每次产生的子问题并不总是新问题，有些子问题会被重复计算多次。动态规划算法正是利用了这种子问题的重叠性质，对每一个子问题只计算一次，然后将其计算结果保存在一个表格中，当再次需要计算已经计算过的子问题时，只是在表格中简单地查看一下结果，从而获得较高的效率。</li>
</ol>
<h3 id="u7B97_u6CD5_u5341_uFF1A_u6734_u7D20_u8D1D_u53F6_u65AF_u5206_u7C7B_u7B97_u6CD5"><a href="#u7B97_u6CD5_u5341_uFF1A_u6734_u7D20_u8D1D_u53F6_u65AF_u5206_u7C7B_u7B97_u6CD5" class="headerlink" title="算法十：朴素贝叶斯分类算法"></a>算法十：朴素贝叶斯分类算法</h3><p>朴素贝叶斯分类算法是一种基于贝叶斯定理的简单概率分类算法。贝叶斯分类的基础是概率推理，就是在各种条件的存在不确定，仅知其出现概率的情况下，如何完成推理和决策任务。概率推理是与确定性推理相对应的。而朴素贝叶斯分类器是基于独立假设的，即假设样本每个特征与其他特征都不相关。<br>朴素贝叶斯分类器依靠精确的自然概率模型，在有监督学习的样本集中能获取得非常好的分类效果。在许多实际应用中，朴素贝叶斯模型参数估计使用最大似然估计方法，换言之朴素贝叶斯模型能工作并没有用到贝叶斯概率或者任何贝叶斯模型。<br>尽管是带着这些朴素思想和过于简单化的假设，但朴素贝叶斯分类器在很多复杂的现实情形中仍能够取得相当好的效果。</p>
<p>Via:<a href="http://mp.weixin.qq.com/s?__biz=MjM5MTk1NjI0MA==&amp;mid=203850025&amp;idx=1&amp;sn=a79a1f8f5422c77f5fdd4a2dc58ec6f9" target="_blank" rel="external">程序员必须知道的10大基础实用算法及其讲解 </a></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/12/sub-library-sub-table-by-OneProxy/" itemprop="url">
                  OneProxy:只需修改少量SQL语句，也可以实现快速实现分库分表的可扩展方案（转）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-03-12T16:58:58+08:00" content="2015-03-12">
              2015-03-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>MySQL简单易用，并且开源，自用可以免费，用得好的话可以发挥自主可控成本低的理想功效，非常受互联网企业喜爱，现在也逐渐开始进入非互联网企业（不喜欢用传统企业这个词）了。但也的确缺失一些针对企业的高级功能，比如新增列、添加索引还会对整个表的数据进行重组，需要独占整个表，因此在单机使用时，需要控制单个表的大小，以减少做运维维护工作时独占表的时间。在多核（超过24个核）情况下的线性扩展能力（包括事务能力和查询能力）也不够理想，需要有较好的方法来快速解决这一类的技术需求。</p>
<p>当一个表太大不利于维护时，我们会将大表拆分成小表，这些表还属于同一个数据库，这种技术称为分表；当一个数据库的处理能力不够支撑业务，增加CPU的作用也十分有限时，就可能需要将部份表移到别的数据库，以增加系统处理能力，这种技术称为分库；通过精心的数据模型设计，将大的业务表拆分成小表，再将一系列小表分到不同的服务器，使得每台服务器都能独立承担部分业务处理，这种技术称为水平拆分，俗称为分库分表。分表的数量可以和物理的机器数不一致，分表数量称为逻辑份数，分库的数量称为物理份数，当逻辑份数大于物理份数时，就可以迅速获得水平扩展能力。</p>
<p>在使用传统商业数据库时，必须要通过应用层修改应用代码来实现，现在流行的做法是将应用开发语言统一，比如用统一的Java框架，然后编写一个统一的数据访问层，比如TDDL、ZDAL等。这种做法在大并发量下的性能上有一定的优势，可以减少一次网络交互，但在开发上绑定了特定的开发语言，需要有强大的配置推送体系，并且需要有强大的运维团队来支持。当后台用的是MySQL数据库，或兼容MySQL协议的数据库时，就可以不用修改应用程序，使用OneProxy来承担TDDL、ZDAL的功能，将后端的多台MySQL虚拟成一台MySQL提供给上层应用，对应用相对透明地实现分库分表的需求，来快速获得MySQL上的水平扩展能力。</p>
<p>OneProxy里分库分表的概念和MySQL里分区表的概念非常接近，来看一下MySQL分区表的创建语法：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE employees (&#10;    id INT NOT NULL,&#10;    fname VARCHAR(30),&#10;    lname VARCHAR(30),&#10;    hired DATE NOT NULL DEFAULT &#39;1970-01-01&#39;,&#10;    separated DATE NOT NULL DEFAULT &#39;9999-12-31&#39;,&#10;    job_code INT NOT NULL,&#10;    store_id INT NOT NULL&#10;)&#10;PARTITION BY RANGE (store_id) (&#10;    PARTITION p0 VALUES LESS THAN (6),&#10;    PARTITION p1 VALUES LESS THAN (11),&#10;    PARTITION p2 VALUES LESS THAN (16),&#10;    PARTITION p3 VALUES LESS THAN (21)&#10;);</span><br></pre></td></tr></table></figure></p>
<p>只要给OneProxy提供分区的关键信息，保存到文件“part.txt”中，就可以实现分库分表了，配置信息如下所示：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#10;  &#123;&#10;        &#34;table&#34;   : &#34;empolyees&#34;,&#10;        &#34;pkey&#34;    : &#34;store_id&#34;,&#10;        &#34;type&#34;    : &#34;int&#34;,&#10;        &#34;method&#34;  : &#34;range&#34;,&#10;        &#34;partitions&#34;:&#10;           [&#10;               &#123; &#34;suffix&#34; : &#34;_0&#34;, &#34;group&#34;: &#34;default&#34;, &#34;value&#34; : 6 &#125;,&#10;               &#123; &#34;suffix&#34; : &#34;_1&#34;, &#34;group&#34;: &#34;default&#34;, &#34;value&#34; : 11 &#125;,&#10;               &#123; &#34;suffix&#34; : &#34;_2&#34;, &#34;group&#34;: &#34;default&#34;, &#34;value&#34; : 16 &#125;,&#10;               &#123; &#34;suffix&#34; : &#34;_3&#34;, &#34;group&#34;: &#34;default&#34;, &#34;value&#34; : 21 &#125;&#10;           ]&#10;  &#125;&#10;]</span><br></pre></td></tr></table></figure></p>
<p>然后用这个指定OneProxy的分区配置文件为“part.txt”，启动OneProxy即可。<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;ONEPROXY_HOME&#125;/oneproxy --proxy-address=:3307 \&#10;  --proxy-master-addresses=192.168.1.119:3306 \&#10;  --proxy-user-list=test/1378F6CC3A8E8A43CA388193FBED5405982FBBD3@test \&#10;  --proxy-part-tables=$&#123;ONEPROXY_HOME&#125;/part.txt \&#10;  --event-threads=8 --proxy-charset=gbk_chinese_ci \&#10;  --log-file=$&#123;ONEPROXY_HOME&#125;/oneproxy.log \&#10;  --pid-file=$&#123;ONEPROXY_HOME&#125;/oneproxy.pid</span><br></pre></td></tr></table></figure></p>
<p>然后在对应的MySQL集群（“default”）里创建好“employees”表，创建表时需要加上后缀（参照“suffix”字段的值），即创建四张表：“employees_0”、“employees_1”、“employees_2”和“employees_3”就行了。也可以修改每个表的集群信息（参照“group”字段的值），让每个表位于不同MySQL主备集群中，来实现完整的分库分表的例子。发下图所示：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&#62; show tables;&#10;+----------------+&#10;| Tables_in_test |&#10;+----------------+&#10;| employees_0    |&#10;| employees_1    |&#10;| employees_2    |&#10;| employees_3    |&#10;+----------------+&#10;4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<p>并不需要登录到每一台机器，进行表的创建工作，通过OneProxy可以直接发送如下创建表命令，会自动定位到MySQL服务器并创建包含准确后缀的表。<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE employees (&#10;    id INT NOT NULL,&#10;    fname VARCHAR(30),&#10;    lname VARCHAR(30),&#10;    hired DATE NOT NULL DEFAULT &#39;1970-01-01&#39;,&#10;    separated DATE NOT NULL DEFAULT &#39;9999-12-31&#39;,&#10;    job_code INT NOT NULL,&#10;    store_id INT NOT NULL&#10;);</span><br></pre></td></tr></table></figure></p>
<p>接下来可以运行一些DML语句和查询语句试试。<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&#62; insert into employees (id, fname, lname, job_code, store_id)&#10;    -&#62; values (4, &#39;A&#39;,&#39;B&#39;,4,4);&#10;Query OK, 1 row affected (0.00 sec)&#10;&#10;mysql&#62; insert into employees (id, fname, lname, job_code, store_id)&#10;    -&#62; values (8, &#39;C&#39;,&#39;D&#39;,8,8);&#10;Query OK, 1 row affected (0.00 sec)&#10;&#10;mysql&#62; select * from employees;&#10;+----+-------+-------+------------+------------+----------+----------+&#10;| id | fname | lname | hired      | separated  | job_code | store_id |&#10;+----+-------+-------+------------+------------+----------+----------+&#10;|  4 | A     | B     | 1970-01-01 | 9999-12-31 |        4 |        4 |&#10;|  8 | C     | D     | 1970-01-01 | 9999-12-31 |        8 |        8 |&#10;+----+-------+-------+------------+------------+----------+----------+&#10;2 rows in set (0.00 sec)&#10;&#10;mysql&#62; select * from employees_0;&#10;+----+-------+-------+------------+------------+----------+----------+&#10;| id | fname | lname | hired      | separated  | job_code | store_id |&#10;+----+-------+-------+------------+------------+----------+----------+&#10;|  4 | A     | B     | 1970-01-01 | 9999-12-31 |        4 |        4 |&#10;+----+-------+-------+------------+------------+----------+----------+&#10;1 row in set (0.00 sec)&#10;&#10;mysql&#62; select * from employees_1;&#10;+----+-------+-------+------------+------------+----------+----------+&#10;| id | fname | lname | hired      | separated  | job_code | store_id |&#10;+----+-------+-------+------------+------------+----------+----------+&#10;|  8 | C     | D     | 1970-01-01 | 9999-12-31 |        8 |        8 |&#10;+----+-------+-------+------------+------------+----------+----------+&#10;1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<p>Via:<a href="http://www.onexsoft.com/?page_id=378" target="_blank" rel="external">http://www.onexsoft.com/?page_id=378</a></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/10/kicked-out-logged-on-user-in-centos/" itemprop="url">
                  CentOS 下踢出登陆用户
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-03-10T09:58:58+08:00" content="2015-03-10">
              2015-03-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>Linux系统root用户可强制踢制其它登录用户，首先可用＄w或者who命令查看登录用户信息，显示信息如下：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23zmtjn2dZ ~]# w&#10; 12:00:28 up 32 days, 17:24,  3 users,  load average: 0.28, 0.32, 0.32&#10;USER     TTY      FROM              LOGIN@   IDLE   JCPU   PCPU WHAT&#10;lmmbao   pts/0    119.79.155.176   11:53    4:33   0.03s  0.02s sshd: lmmbao [priv]&#10;lmmbao   pts/1    119.79.155.176   11:58    4:36   0.00s  0.00s -bash&#10;root     pts/2    119.79.155.176   12:03    0.00s  0.00s  0.00s w&#10;[root@iZ23zmtjn2dZ ~]#</span><br></pre></td></tr></table></figure></p>
<p>想踢除lmmbao这个用户和他的所有开启的程序<br>pkill -u lmmbao<br>注意：这个命令实际上很危险，要相当小心的执行。<br>安全的做法是先查看终端号，然后查看该终端执行的所有进程，根据进程号来停止服务。<br>安全剔除用户：<br>ps -ef| grep pts/0<br>得到用户登录相应的进程号pid后执行。<br>kill -9 pid</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/09/common-command-Vim/" itemprop="url">
                  Linux Vi(Vim)常用命令汇总
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-03-09T19:58:58+08:00" content="2015-03-09">
              2015-03-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>首先介绍一下 vim vi 是 unix/linux 下极为普遍的一种文本编辑器, 大部分机器上都有 vi 有各种变种, 在不同的机器上常用不同的变种软件 其中 vim 比较好用也用得比较广泛 vim 是 Vi IMproved 的缩写, 表示更好的 vi 本文就说些其中比较有用, 比较常用的命令, 若能熟练运用这些命令, 那么会发现编辑文件很大帮助，尤其是做开发的人员，能快速的提高开发效率</p>
<p>说明:<br>以下的例子中 xxx 表示在命令模式下输入 xxx 并回车<br>以下的例子中 :xxx 表示在扩展模式下输入 xxx 并回车<br>小括号中的命令表示相关命令<br>在编辑模式或可视模式下输入的命令会另外注明</p>
<h3 id="1__u67E5_u627E"><a href="#1__u67E5_u627E" class="headerlink" title="1 查找"></a>1 查找</h3><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>/xxx(?xxx)</td>
<td>表示在整篇文档中搜索匹配xxx的字符串, / 表示向下查找, ? 表示向上查找其中xxx可以是正规表达式,关于正规式就不多说了一般来说是区分大小写的, 要想不区分大小写, 那得先输入:set ignorecase 查找到以后, 再输入 n 查找下一个匹配处, 输入 N 反方向查找</td>
</tr>
<tr>
<td>*(#)</td>
<td>当光标停留在某个单词上时, 输入这条命令表示查找与该单词匹配的下(上)一个单词 同样, 再输入 n 查找下一个匹配处, 输入 N 反方向查找</td>
</tr>
<tr>
<td>g*(g#)</td>
<td>此命令与上条命令相似, 只不过它不完全匹配光标所在处的单词, 而是匹配包含该单词的所有字符串</td>
</tr>
<tr>
<td>gd</td>
<td>本命令查找与光标所在单词相匹配的单词, 并将光标停留在文档的非注释段中第一次出现这个单词的地方</td>
</tr>
<tr>
<td>%</td>
<td>本命令查找与光标所在处相匹配的反括号, 包括 () [] { }</td>
</tr>
<tr>
<td>f(F)x</td>
<td>本命令表示在光标所在行进行查找, 查找光标右(左)方第一个x字符找到后:输入 ; 表示继续往下找；输入 , 表示反方向查找</td>
</tr>
</tbody>
</table>
<h3 id="2__u5FEB_u901F_u79FB_u52A8_u5149_u6807"><a href="#2__u5FEB_u901F_u79FB_u52A8_u5149_u6807" class="headerlink" title="2 快速移动光标"></a>2 快速移动光标</h3><p>   在 vi 中, 移动光标和编辑是两件事, 正因为区分开来, 所以可以很方便的进行光标定<br>位和编辑 因此能更快一点移动光标是很有用的。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>w(e)</td>
<td>移动光标到下一个单词</td>
</tr>
<tr>
<td>b</td>
<td>移动光标到上一个单词</td>
</tr>
<tr>
<td>0</td>
<td>移动光标到本行最开头</td>
</tr>
<tr>
<td>^</td>
<td>移动光标到本行最开头的字符处</td>
</tr>
<tr>
<td>$</td>
<td>移动光标到本行结尾处</td>
</tr>
<tr>
<td>H</td>
<td>移动光标到屏幕的首行</td>
</tr>
<tr>
<td>M</td>
<td>移动光标到屏幕的中间一行</td>
</tr>
<tr>
<td>L</td>
<td>移动光标到屏幕的尾行</td>
</tr>
<tr>
<td>gg</td>
<td>移动光标到文档首行</td>
</tr>
<tr>
<td>G</td>
<td>移动光标到文档尾行</td>
</tr>
<tr>
<td>c-f</td>
<td>(即 ctrl 键与 f 键一同按下) 本命令即 page down</td>
</tr>
<tr>
<td>c-b</td>
<td>(即 ctrl 键与 b 键一同按下, 后同) 本命令即 page up</td>
</tr>
<tr>
<td>‘’</td>
<td>此命令相当有用, 它移动光标到上一个标记处, 比如用 gd, * 等查找到某个单词后, 再输入此命令则回到上次停留的位置</td>
</tr>
<tr>
<td>‘</td>
<td>此命令相当好使, 它移动光标到上一次的修改行</td>
</tr>
<tr>
<td>`</td>
<td>此命令相当强大, 它移动光标到上一次的修改点</td>
</tr>
</tbody>
</table>
<h3 id="3__u62F7_u8D1D_2C__u5220_u9664_u4E0E_u7C98_u8D34"><a href="#3__u62F7_u8D1D_2C__u5220_u9664_u4E0E_u7C98_u8D34" class="headerlink" title="3 拷贝, 删除与粘贴"></a>3 拷贝, 删除与粘贴</h3><p>   在 vi 中 y 表示拷贝, d 表示删除, p 表示粘贴 其中拷贝与删除是与光标移动命令<br>结合的, 看几个例子就能够明白了</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>yw</td>
<td>表示拷贝从当前光标到光标所在单词结尾的内容</td>
</tr>
<tr>
<td>dw</td>
<td>表示删除从当前光标到光标所在单词结尾的内容</td>
</tr>
<tr>
<td>y0</td>
<td>表示拷贝从当前光标到光标所在行首的内容</td>
</tr>
<tr>
<td>d0</td>
<td>表示删除从当前光标到光标所在行首的内容</td>
</tr>
<tr>
<td>y$</td>
<td>表示拷贝从当前光标到光标所在行尾的内容</td>
</tr>
<tr>
<td>d$</td>
<td>表示删除从当前光标到光标所在行尾的内容</td>
</tr>
<tr>
<td>yfa</td>
<td>表示拷贝从当前光标到光标后面的第一个a字符之间的内容</td>
</tr>
<tr>
<td>dfa</td>
<td>表示删除从当前光标到光标后面的第一个a字符之间的内容</td>
</tr>
</tbody>
</table>
<p>特殊地:</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>yy</td>
<td>表示拷贝光标所在行</td>
</tr>
<tr>
<td>dd</td>
<td>表示删除光标所在行</td>
</tr>
<tr>
<td>D</td>
<td>表示删除从当前光标到光标所在行尾的内容</td>
</tr>
</tbody>
</table>
<p>关于拷贝, 删除和粘贴的复杂用法与寄存器有关, 可以自行查询</p>
<h3 id="4__u6570_u5B57_u4E0E_u547D_u4EE4"><a href="#4__u6570_u5B57_u4E0E_u547D_u4EE4" class="headerlink" title="4 数字与命令"></a>4 数字与命令</h3><p>在 vi 中数字与命令结合往往表示重复进行此命令, 若在扩展模式的开头出现则表示行<br>号定位 如:</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>5fx</td>
<td>表示查找光标后第5个x字符</td>
</tr>
<tr>
<td>5w(e)</td>
<td>移动光标到下五个单词</td>
</tr>
<tr>
<td>5yy</td>
<td>表示拷贝光标以下 5 行</td>
</tr>
<tr>
<td>5dd</td>
<td>表示删除光标以下 5 行</td>
</tr>
<tr>
<td>y2fa</td>
<td>表示拷贝从当前光标到光标后面的第二个a字符之间的内容</td>
</tr>
<tr>
<td>:12,24y</td>
<td>表示拷贝第12行到第24行之间的内容</td>
</tr>
<tr>
<td>:12,y</td>
<td>表示拷贝第12行到光标所在行之间的内容</td>
</tr>
<tr>
<td>:,24y</td>
<td>表示拷贝光标所在行到第24行之间的内容 删除类似</td>
</tr>
</tbody>
</table>
<h3 id="5__u5FEB_u901F_u8F93_u5165_u5B57_u7B26"><a href="#5__u5FEB_u901F_u8F93_u5165_u5B57_u7B26" class="headerlink" title="5 快速输入字符"></a>5 快速输入字符</h3><p>在 vi 中, 不要求你输入每一个字符, 可以有很多种方法快速输入一些字符。<br>使用 linux/unix 的同学一定有一个经验, 在命令行下输入命令时敲入头几个字符再按<br>TAB 系统就会自动将剩下的字符补齐, 假如有多个匹配则会打印出来 这就是著名的命令<br>补齐(其实windows中也有文件名补齐功能) vi 中有许多的字符串补齐命令, 非常方便。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>c-p(c-n)</td>
<td>在编辑模式中, 输入几个字符后再输入此命令则 vi 开始向上(下)搜索开头与其匹配的单词并补齐, 不断输入此命令则循环查找 此命令会在所有在这个 vim 程序中打开的文件中进行匹配</td>
</tr>
<tr>
<td>c-x-l</td>
<td>在编辑模式中, 此命令快速补齐整行内容, 但是仅在本窗口中出现的文档中进行匹配</td>
</tr>
<tr>
<td>c-x-f</td>
<td>在编辑模式中, 这个命令表示补齐文件名 如输入:/usr/local/tom 后再输入此命令则它会自动匹配出:/usr/local/tomcat/</td>
</tr>
<tr>
<td>abbr</td>
<td>即缩写 这是一个宏操作, 可以在编辑模式中用一个缩写代替另一个字符串 比如编写java文件的常常输入 Systemoutprintln, 这很是麻烦, 所以应该用缩写来减少敲字 可以这么做: :abbr sprt Systemoutprintln以后在输入sprt后再输入其他非字母符号, 它就会自动扩展为Systemoutprintln</td>
</tr>
</tbody>
</table>
<h3 id="6__u66FF_u6362"><a href="#6__u66FF_u6362" class="headerlink" title="6 替换"></a>6 替换</h3><p>替换是 vi 的强项, 因为可以用正规表达式来匹配字符串以下提供几个例子</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>:s/aa/bb/g</td>
<td>将光标所在行出现的所有包含 aa 的字符串中的 aa 替换为 bb</td>
</tr>
<tr>
<td>:s/\<aa\>/bb/g</aa\></td>
<td>将光标所在行出现的所有 aa 替换为 bb, 仅替换 aa 这个单词</td>
</tr>
<tr>
<td>:%s/aa/bb/g</td>
<td>将文档中出现的所有包含 aa 的字符串中的 aa 替换为 bb</td>
</tr>
<tr>
<td>:12,23s/aa/bb/g</td>
<td>将从12行到23行中出现的所有包含 aa 的字符串中的 aa 替换为 bb</td>
</tr>
<tr>
<td>:12,23s/^/#/</td>
<td>将从12行到23行的行首加入 # 字符</td>
</tr>
<tr>
<td>:%s= *$==</td>
<td>将所有行尾多余的空格删除</td>
</tr>
<tr>
<td>:g/^\s*$/d</td>
<td>将所有不包含字符(空格也不包含)的空行删除</td>
</tr>
</tbody>
</table>
<p>Via：<a href="http://hi.baidu.com/s_jqzhang/blog/item/39d1b522840971fbd7cae2f0.html" target="_blank" rel="external">http://hi.baidu.com/s_jqzhang/blog/item/39d1b522840971fbd7cae2f0.html</a></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/01/introduce-MapReduce-to-my-wife/" itemprop="url">
                  我是如何向老婆解释MapReduce的（转）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-03-01T08:18:18+08:00" content="2015-03-01">
              2015-03-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>昨天，我在Xebia印度办公室发表了一个关于MapReduce的演说。演说进行得很顺利，听众们都能够理解MapReduce的概念（根据他们的反馈）。我成功地向技术听众们（主要是Java程序员，一些Flex程序员和少数的测试人员）解释了MapReduce的概念，这让我感到兴奋。在所有辛勤的工作之后，我们在Xebia印度办公室享用了丰盛的晚餐，然后我径直回了家。</p>
<p>回家后，我的妻子（Supriya）问道：“你的会开得怎么样？”我说还不错。 接着她又问我会议是的内容是什么(她不是从事软件或编程领域的工作的)。我告诉她说MapReduce。“Mapduce，那是什么玩意儿？”她问道： “跟地形图有关吗？”我说不，不是的，它和地形图一点关系也没有。“那么，它到底是什么玩意儿？”妻子问道。 “唔…让我们去Dominos(披萨连锁)吧，我会在餐桌上跟你好好解释。” 妻子说：“好的。” 然后我们就去了披萨店。</p>
<p><img src="http://ww4.sinaimg.cn/mw690/6ba3371bjw1epw2yv6h33j209u0a0gly.jpg" alt=""></p>
<p>我们在Domions点餐之后，柜台的小伙子告诉我们说披萨需要15分钟才能准备好。于是，我问妻子：“你真的想要弄懂什么是MapReduce？” 她很坚定的回答说“是的”。 因此我问道：</p>
<p>我： 你是如何准备洋葱辣椒酱的？（以下并非准确食谱，请勿在家尝试）</p>
<p>妻子： 我会取一个洋葱，把它切碎，然后拌入盐和水，最后放进混合研磨机里研磨。这样就能得到洋葱辣椒酱了。</p>
<p>妻子： 但这和MapReduce有什么关系？</p>
<p>我： 你等一下。让我来编一个完整的情节，这样你肯定可以在15分钟内弄懂MapReduce.</p>
<p>妻子： 好吧。</p>
<p>我：现在，假设你想用薄荷、洋葱、番茄、辣椒、大蒜弄一瓶混合辣椒酱。你会怎么做呢？</p>
<p>妻子： 我会取薄荷叶一撮，洋葱一个，番茄一个，辣椒一根，大蒜一根，切碎后加入适量的盐和水，再放入混合研磨机里研磨，这样你就可以得到一瓶混合辣椒酱了。</p>
<p>我： 没错，让我们把MapReduce的概念应用到食谱上。Map和Reduce其实是两种操作，我来给你详细讲解下。</p>
<p>Map（映射）: 把洋葱、番茄、辣椒和大蒜切碎，是各自作用在这些物体上的一个Map操作。所以你给Map一个洋葱，Map就会把洋葱切碎。 同样的，你把辣椒，大蒜和番茄一一地拿给Map，你也会得到各种碎块。 所以，当你在切像洋葱这样的蔬菜时，你执行就是一个Map操作。 Map操作适用于每一种蔬菜，它会相应地生产出一种或多种碎块，在我们的例子中生产的是蔬菜块。在Map操作中可能会出现有个洋葱坏掉了的情况，你只要把坏洋葱丢了就行了。所以，如果出现坏洋葱了，Map操作就会过滤掉坏洋葱而不会生产出任何的坏洋葱块。</p>
<p>Reduce（化简）:在这一阶段，你将各种蔬菜碎都放入研磨机里进行研磨，你就可以得到一瓶辣椒酱了。这意味要制成一瓶辣椒酱，你得研磨所有的原料。因此，研磨机通常将map操作的蔬菜碎聚集在了一起。</p>
<p>妻子： 所以，这就是MapReduce?</p>
<p>我： 你可以说是，也可以说不是。 其实这只是MapReduce的一部分，MapReduce的强大在于分布式计算。</p>
<p>妻子： 分布式计算？ 那是什么？请给我解释下吧。</p>
<p>我： 没问题。</p>
<p>我： 假设你参加了一个辣椒酱比赛并且你的食谱赢得了最佳辣椒酱奖。得奖之后，辣椒酱食谱大受欢迎，于是你想要开始出售自制品牌的辣椒酱。假设你每天需要生产10000瓶辣椒酱，你会怎么办呢？</p>
<p>妻子： 我会找一个能为我大量提供原料的供应商。</p>
<p>我：是的..就是那样的。那你能否独自完成制作呢？也就是说，独自将原料都切碎？ 仅仅一部研磨机又是否能满足需要？而且现在，我们还需要供应不同种类的辣椒酱，像洋葱辣椒酱、青椒辣椒酱、番茄辣椒酱等等。</p>
<p>妻子： 当然不能了，我会雇佣更多的工人来切蔬菜。我还需要更多的研磨机，这样我就可以更快地生产辣椒酱了。</p>
<p>我：没错，所以现在你就不得不分配工作了，你将需要几个人一起切蔬菜。每个人都要处理满满一袋的蔬菜，而每一个人都相当于在执行一个简单的Map操作。每一个人都将不断的从袋子里拿出蔬菜来，并且每次只对一种蔬菜进行处理，也就是将它们切碎，直到袋子空了为止。</p>
<p>这样，当所有的工人都切完以后，工作台（每个人工作的地方）上就有了洋葱块、番茄块、和蒜蓉等等。</p>
<p>妻子：但是我怎么会制造出不同种类的番茄酱呢？</p>
<p>我：现在你会看到MapReduce遗漏的阶段—搅拌阶段。MapReduce将所有输出的蔬菜碎都搅拌在了一起，这些蔬菜碎都是在以key为基础的 map操作下产生的。搅拌将自动完成，你可以假设key是一种原料的名字，就像洋葱一样。 所以全部的洋葱keys都会搅拌在一起，并转移到研磨洋葱的研磨器里。这样，你就能得到洋葱辣椒酱了。同样地，所有的番茄也会被转移到标记着番茄的研磨器里，并制造出番茄辣椒酱。</p>
<p>披萨终于做好了，她点点头说她已经弄懂什么是MapReduce了。我只希望下次她听到MapReduce时，能更好的理解我到底在做些什么。</p>
<p><img src="http://ww2.sinaimg.cn/mw690/6ba3371bjw1epw34ixv73j216o1l41kx.jpg" alt=""></p>
<p>编注：下面这段话是网上其他人用最简短的语言解释MapReduce：</p>
<p><em>We want to count all the books in the library. You count up shelf #1, I count up shelf #2. That’s map. The more people we get, the faster it goes.</em></p>
<p>我们要数图书馆中的所有书。你数1号书架，我数2号书架。这就是“Map”。我们人越多，数书就更快。</p>
<p><em>Now we get together and add our individual counts. That’s reduce.</em></p>
<p>现在我们到一起，把所有人的统计数加在一起。这就是“Reduce”。</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/02/18/Linux-add-ftp-user-and-configuration/" itemprop="url">
                  在linux中添加ftp用户，并设置相应的权限
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-02-18T09:58:58+08:00" content="2015-02-18">
              2015-02-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>在linux中添加ftp用户，并设置相应的权限，操作步骤如下：</p>
<p>1、环境：ftp为vsftp。被限制用户名为test。被限制路径为/home/test</p>
<p>2、建用户：在root用户下：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -d /home/test test //&#22686;&#21152;&#29992;&#25143;test&#65292;&#24182;&#21046;&#23450;test&#29992;&#25143;&#30340;&#20027;&#30446;&#24405;&#20026;/home/test&#10;passwd test //&#20026;test&#35774;&#32622;&#23494;&#30721;</span><br></pre></td></tr></table></figure></p>
<p>3、更改用户相应的权限设置：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -s /sbin/nologin test //&#38480;&#23450;&#29992;&#25143;test&#19981;&#33021;telnet&#65292;&#21482;&#33021;ftp&#10;usermod -s /sbin/bash test //&#29992;&#25143;test&#24674;&#22797;&#27491;&#24120;&#10;usermod -d /test test //&#26356;&#25913;&#29992;&#25143;test&#30340;&#20027;&#30446;&#24405;&#20026;/test</span><br></pre></td></tr></table></figure></p>
<p>4、限制用户只能访问/home/test，不能访问其他路径<br>修改/etc/vsftpd/vsftpd.conf如下：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chroot_list_enable=YES //&#38480;&#21046;&#35775;&#38382;&#33258;&#36523;&#30446;&#24405;&#10;# (default follows)&#10;chroot_list_file=/etc/vsftpd/vsftpd.chroot_list</span><br></pre></td></tr></table></figure></p>
<p>编辑 vsftpd.chroot_list文件，将受限制的用户添加进去，每个用户名一行。<br>改完配置文件，不要忘记重启vsFTPd服务器。<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@linuxsir001 root]# /etc/init.d/vsftpd restart</span><br></pre></td></tr></table></figure></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/02/12/gVim-Vim-configuration/" itemprop="url">
                  Gvim/Vim 配置（已配置常用插件且Windows 与 Linux 通用）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-02-12T18:58:58+08:00" content="2015-02-12">
              2015-02-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>此为 Windows Gvim7.4 绿色版，其中的插件与配置文件在 Linux 下同样适用。对于Windows 用户，直接将下载到的文件解压，并将程序主目录加入<br>系统变量即可（也就是将 vim74 目录加入 Path 系统变量）；当然，如果不加入系统变量也<br>可以使用，但 Ctags 与 Cscope 的相关功能就不能使用了，同时窗口的透明与置顶功能也不<br>能使用，因为我将这些功能相关的非 vim 插件放在了 vim74 目录里（我是用 win7 64 位与<br>32 位测试的，没有问题）。设置好后就启动 vim74 目录里的 gvim.exe 文件就行了（当然<br>也可以给它创建个桌面快捷方式）。<br>对于 Linux 用户，先确保安装了完整的 vim （如果<br>是 Ubuntu 就直接安装软件中心的 vim 即可），并安装好 Ctags 与 Cscope ，不然可能出<br>现 vim 加载错误提示；这些完成后，直接将解压到的文件中的 vimfiles 目录与 _vimrc 文<br>件重命名为 .vim 目录与 .vimrc 文件，并将其复制到 ~/ 目录即可（也就是 Linux 系统的<br>用户主目录），我是用 Ubuntu 测试的没有问题。</p>
<p>具体配置与快捷键请看配置文件（vimrc 文件），Gvim（Vim）自有的快捷键请看其帮助，<br>或在网上看一些常用快捷键，本包中也已带有“常用快捷键导图”。</p>
<p>由于使用UTF-8编码，所以源文件路径中请不要使用中文，以免出现乱码或编译错误等！</p>
<p><a href="http://pan.baidu.com/s/1mgJXl7U" target="_blank" rel="external">下载地址</a><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#34; =============================================================================&#10;&#34;        &#60;&#60; &#21028;&#26029;&#25805;&#20316;&#31995;&#32479;&#26159; Windows &#36824;&#26159; Linux &#21644;&#21028;&#26029;&#26159;&#32456;&#31471;&#36824;&#26159; Gvim &#62;&#62;&#10;&#34; =============================================================================&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; &#21028;&#26029;&#25805;&#20316;&#31995;&#32479;&#26159;&#21542;&#26159; Windows &#36824;&#26159; Linux &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;let g:iswindows = 0&#10;let g:islinux = 0&#10;if(has(&#34;win32&#34;) || has(&#34;win64&#34;) || has(&#34;win95&#34;) || has(&#34;win16&#34;))&#10;    let g:iswindows = 1&#10;else&#10;    let g:islinux = 1&#10;endif&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; &#21028;&#26029;&#26159;&#32456;&#31471;&#36824;&#26159; Gvim &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;if has(&#34;gui_running&#34;)&#10;    let g:isGUI = 1&#10;else&#10;    let g:isGUI = 0&#10;endif&#10;&#10;&#10;&#34; =============================================================================&#10;&#34;                          &#60;&#60; &#20197;&#19979;&#20026;&#36719;&#20214;&#40664;&#35748;&#37197;&#32622; &#62;&#62;&#10;&#34; =============================================================================&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; Windows Gvim &#40664;&#35748;&#37197;&#32622;&#62; &#20570;&#20102;&#19968;&#28857;&#20462;&#25913;&#10;&#34; -----------------------------------------------------------------------------&#10;if (g:iswindows &#38;&#38; g:isGUI)&#10;    source $VIMRUNTIME/vimrc_example.vim&#10;    source $VIMRUNTIME/mswin.vim&#10;    behave mswin&#10;    set diffexpr=MyDiff()&#10;&#10;    function MyDiff()&#10;        let opt = &#39;-a --binary &#39;&#10;        if &#38;diffopt =~ &#39;icase&#39; | let opt = opt . &#39;-i &#39; | endif&#10;        if &#38;diffopt =~ &#39;iwhite&#39; | let opt = opt . &#39;-b &#39; | endif&#10;        let arg1 = v:fname_in&#10;        if arg1 =~ &#39; &#39; | let arg1 = &#39;&#34;&#39; . arg1 . &#39;&#34;&#39; | endif&#10;        let arg2 = v:fname_new&#10;        if arg2 =~ &#39; &#39; | let arg2 = &#39;&#34;&#39; . arg2 . &#39;&#34;&#39; | endif&#10;        let arg3 = v:fname_out&#10;        if arg3 =~ &#39; &#39; | let arg3 = &#39;&#34;&#39; . arg3 . &#39;&#34;&#39; | endif&#10;        let eq = &#39;&#39;&#10;        if $VIMRUNTIME =~ &#39; &#39;&#10;            if &#38;sh =~ &#39;\&#60;cmd&#39;&#10;                let cmd = &#39;&#34;&#34;&#39; . $VIMRUNTIME . &#39;\diff&#34;&#39;&#10;                let eq = &#39;&#34;&#39;&#10;            else&#10;                let cmd = substitute($VIMRUNTIME, &#39; &#39;, &#39;&#34; &#39;, &#39;&#39;) . &#39;\diff&#34;&#39;&#10;            endif&#10;        else&#10;            let cmd = $VIMRUNTIME . &#39;\diff&#39;&#10;        endif&#10;        silent execute &#39;!&#39; . cmd . &#39; &#39; . opt . arg1 . &#39; &#39; . arg2 . &#39; &#62; &#39; . arg3 . eq&#10;    endfunction&#10;endif&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; Linux Gvim/Vim &#40664;&#35748;&#37197;&#32622;&#62; &#20570;&#20102;&#19968;&#28857;&#20462;&#25913;&#10;&#34; -----------------------------------------------------------------------------&#10;if g:islinux&#10;    set hlsearch        &#34;&#39640;&#20142;&#25628;&#32034;&#10;    set incsearch       &#34;&#22312;&#36755;&#20837;&#35201;&#25628;&#32034;&#30340;&#25991;&#23383;&#26102;&#65292;&#23454;&#26102;&#21305;&#37197;&#10;&#10;    &#34; Uncomment the following to have Vim jump to the last position when&#10;    &#34; reopening a file&#10;    if has(&#34;autocmd&#34;)&#10;        au BufReadPost * if line(&#34;&#39;\&#34;&#34;) &#62; 1 &#38;&#38; line(&#34;&#39;\&#34;&#34;) &#60;= line(&#34;$&#34;) | exe &#34;normal! g&#39;\&#34;&#34; | endif&#10;    endif&#10;&#10;    if g:isGUI&#10;        &#34; Source a global configuration file if available&#10;        if filereadable(&#34;/etc/vim/gvimrc.local&#34;)&#10;            source /etc/vim/gvimrc.local&#10;        endif&#10;    else&#10;        &#34; This line should not be removed as it ensures that various options are&#10;        &#34; properly set to work with the Vim-related packages available in Debian.&#10;        runtime! debian.vim&#10;&#10;        &#34; Vim5 and later versions support syntax highlighting. Uncommenting the next&#10;        &#34; line enables syntax highlighting by default.&#10;        if has(&#34;syntax&#34;)&#10;            syntax on&#10;        endif&#10;&#10;        set mouse=a                    &#34; &#22312;&#20219;&#20309;&#27169;&#24335;&#19979;&#21551;&#29992;&#40736;&#26631;&#10;        set t_Co=256                   &#34; &#22312;&#32456;&#31471;&#21551;&#29992;256&#33394;&#10;        set backspace=2                &#34; &#35774;&#32622;&#36864;&#26684;&#38190;&#21487;&#29992;&#10;&#10;        &#34; Source a global configuration file if available&#10;        if filereadable(&#34;/etc/vim/vimrc.local&#34;)&#10;            source /etc/vim/vimrc.local&#10;        endif&#10;    endif&#10;endif&#10;&#10;&#10;&#34; =============================================================================&#10;&#34;                          &#60;&#60; &#20197;&#19979;&#20026;&#29992;&#25143;&#33258;&#23450;&#20041;&#37197;&#32622; &#62;&#62;&#10;&#34; =============================================================================&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; Vundle &#25554;&#20214;&#31649;&#29702;&#24037;&#20855;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#29992;&#20110;&#26356;&#26041;&#20415;&#30340;&#31649;&#29702;vim&#25554;&#20214;&#65292;&#20855;&#20307;&#29992;&#27861;&#21442;&#32771; :h vundle &#24110;&#21161;&#10;&#34; Vundle&#24037;&#20855;&#23433;&#35013;&#26041;&#27861;&#20026;&#22312;&#32456;&#31471;&#36755;&#20837;&#22914;&#19979;&#21629;&#20196;&#10;&#34; git clone https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle&#10;&#34; &#22914;&#26524;&#24819;&#22312; windows &#23433;&#35013;&#23601;&#24517;&#38656;&#20808;&#23433;&#35013; &#34;git for window&#34;&#65292;&#21487;&#26597;&#38405;&#32593;&#19978;&#36164;&#26009;&#10;&#10;set nocompatible                                      &#34;&#31105;&#29992; Vi &#20860;&#23481;&#27169;&#24335;&#10;filetype off                                          &#34;&#31105;&#29992;&#25991;&#20214;&#31867;&#22411;&#20390;&#27979;&#10;&#10;if g:islinux&#10;    set rtp+=~/.vim/bundle/vundle/&#10;    call vundle#rc()&#10;else&#10;    set rtp+=$VIM/vimfiles/bundle/vundle/&#10;    call vundle#rc(&#39;$VIM/vimfiles/bundle/&#39;)&#10;endif&#10;&#10;&#34; &#20351;&#29992;Vundle&#26469;&#31649;&#29702;&#25554;&#20214;&#65292;&#36825;&#20010;&#24517;&#39035;&#35201;&#26377;&#12290;&#10;Bundle &#39;gmarik/vundle&#39;&#10;&#10;&#34; &#20197;&#19979;&#20026;&#35201;&#23433;&#35013;&#25110;&#26356;&#26032;&#30340;&#25554;&#20214;&#65292;&#19981;&#21516;&#20179;&#24211;&#37117;&#26377;&#65288;&#20855;&#20307;&#20070;&#20889;&#35268;&#33539;&#35831;&#21442;&#32771;&#24110;&#21161;&#65289;&#10;Bundle &#39;a.vim&#39;&#10;Bundle &#39;Align&#39;&#10;Bundle &#39;jiangmiao/auto-pairs&#39;&#10;Bundle &#39;bufexplorer.zip&#39;&#10;Bundle &#39;ccvext.vim&#39;&#10;Bundle &#39;cSyntaxAfter&#39;&#10;Bundle &#39;ctrlpvim/ctrlp.vim&#39;&#10;Bundle &#39;mattn/emmet-vim&#39;&#10;Bundle &#39;Yggdroot/indentLine&#39;&#10;Bundle &#39;vim-javacompleteex&#39;&#10;Bundle &#39;Mark--Karkat&#39;&#10;Bundle &#39;Shougo/neocomplcache.vim&#39;&#10;Bundle &#39;scrooloose/nerdcommenter&#39;&#10;Bundle &#39;scrooloose/nerdtree&#39;&#10;Bundle &#39;OmniCppComplete&#39;&#10;Bundle &#39;Lokaltog/vim-powerline&#39;&#10;Bundle &#39;repeat.vim&#39;&#10;Bundle &#39;msanders/snipmate.vim&#39;&#10;Bundle &#39;wesleyche/SrcExpl&#39;&#10;Bundle &#39;std_c.zip&#39;&#10;Bundle &#39;tpope/vim-surround&#39;&#10;Bundle &#39;scrooloose/syntastic&#39;&#10;Bundle &#39;majutsushi/tagbar&#39;&#10;Bundle &#39;taglist.vim&#39;&#10;Bundle &#39;TxtBrowser&#39;&#10;Bundle &#39;ZoomWin&#39;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; &#32534;&#30721;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#27880;&#65306;&#20351;&#29992;utf-8&#26684;&#24335;&#21518;&#65292;&#36719;&#20214;&#19982;&#31243;&#24207;&#28304;&#30721;&#12289;&#25991;&#20214;&#36335;&#24452;&#19981;&#33021;&#26377;&#20013;&#25991;&#65292;&#21542;&#21017;&#25253;&#38169;&#10;set encoding=utf-8                                    &#34;&#35774;&#32622;gvim&#20869;&#37096;&#32534;&#30721;&#65292;&#40664;&#35748;&#19981;&#26356;&#25913;&#10;set fileencoding=utf-8                                &#34;&#35774;&#32622;&#24403;&#21069;&#25991;&#20214;&#32534;&#30721;&#65292;&#21487;&#20197;&#26356;&#25913;&#65292;&#22914;&#65306;gbk&#65288;&#21516;cp936&#65289;&#10;set fileencodings=ucs-bom,utf-8,gbk,cp936,latin-1     &#34;&#35774;&#32622;&#25903;&#25345;&#25171;&#24320;&#30340;&#25991;&#20214;&#30340;&#32534;&#30721;&#10;&#10;&#34; &#25991;&#20214;&#26684;&#24335;&#65292;&#40664;&#35748; ffs=dos,unix&#10;set fileformat=unix                                   &#34;&#35774;&#32622;&#26032;&#65288;&#24403;&#21069;&#65289;&#25991;&#20214;&#30340;&#60;EOL&#62;&#26684;&#24335;&#65292;&#21487;&#20197;&#26356;&#25913;&#65292;&#22914;&#65306;dos&#65288;windows&#31995;&#32479;&#24120;&#29992;&#65289;&#10;set fileformats=unix,dos,mac                          &#34;&#32473;&#20986;&#25991;&#20214;&#30340;&#60;EOL&#62;&#26684;&#24335;&#31867;&#22411;&#10;&#10;if (g:iswindows &#38;&#38; g:isGUI)&#10;    &#34;&#35299;&#20915;&#33756;&#21333;&#20081;&#30721;&#10;    source $VIMRUNTIME/delmenu.vim&#10;    source $VIMRUNTIME/menu.vim&#10;&#10;    &#34;&#35299;&#20915;consle&#36755;&#20986;&#20081;&#30721;&#10;    language messages zh_CN.utf-8&#10;endif&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; &#32534;&#20889;&#25991;&#20214;&#26102;&#30340;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;filetype on                                           &#34;&#21551;&#29992;&#25991;&#20214;&#31867;&#22411;&#20390;&#27979;&#10;filetype plugin on                                    &#34;&#38024;&#23545;&#19981;&#21516;&#30340;&#25991;&#20214;&#31867;&#22411;&#21152;&#36733;&#23545;&#24212;&#30340;&#25554;&#20214;&#10;filetype plugin indent on                             &#34;&#21551;&#29992;&#32553;&#36827;&#10;set smartindent                                       &#34;&#21551;&#29992;&#26234;&#33021;&#23545;&#40784;&#26041;&#24335;&#10;set expandtab                                         &#34;&#23558;Tab&#38190;&#36716;&#25442;&#20026;&#31354;&#26684;&#10;set tabstop=4                                         &#34;&#35774;&#32622;Tab&#38190;&#30340;&#23485;&#24230;&#65292;&#21487;&#20197;&#26356;&#25913;&#65292;&#22914;&#65306;&#23485;&#24230;&#20026;2&#10;set shiftwidth=4                                      &#34;&#25442;&#34892;&#26102;&#33258;&#21160;&#32553;&#36827;&#23485;&#24230;&#65292;&#21487;&#26356;&#25913;&#65288;&#23485;&#24230;&#21516;tabstop&#65289;&#10;set smarttab                                          &#34;&#25351;&#23450;&#25353;&#19968;&#27425;backspace&#23601;&#21024;&#38500;shiftwidth&#23485;&#24230;&#10;set foldenable                                        &#34;&#21551;&#29992;&#25240;&#21472;&#10;set foldmethod=indent                                 &#34;indent &#25240;&#21472;&#26041;&#24335;&#10;&#34; set foldmethod=marker                                &#34;marker &#25240;&#21472;&#26041;&#24335;&#10;&#10;&#34; &#24120;&#35268;&#27169;&#24335;&#19979;&#29992;&#31354;&#26684;&#38190;&#26469;&#24320;&#20851;&#20809;&#26631;&#34892;&#25152;&#22312;&#25240;&#21472;&#65288;&#27880;&#65306;zR &#23637;&#24320;&#25152;&#26377;&#25240;&#21472;&#65292;zM &#20851;&#38381;&#25152;&#26377;&#25240;&#21472;&#65289;&#10;nnoremap &#60;space&#62; @=((foldclosed(line(&#39;.&#39;)) &#60; 0) ? &#39;zc&#39; : &#39;zo&#39;)&#60;CR&#62;&#10;&#10;&#34; &#24403;&#25991;&#20214;&#22312;&#22806;&#37096;&#34987;&#20462;&#25913;&#65292;&#33258;&#21160;&#26356;&#26032;&#35813;&#25991;&#20214;&#10;set autoread&#10;&#10;&#34; &#24120;&#35268;&#27169;&#24335;&#19979;&#36755;&#20837; cS &#28165;&#38500;&#34892;&#23614;&#31354;&#26684;&#10;nmap cS :%s/\s\+$//g&#60;CR&#62;:noh&#60;CR&#62;&#10;&#10;&#34; &#24120;&#35268;&#27169;&#24335;&#19979;&#36755;&#20837; cM &#28165;&#38500;&#34892;&#23614; ^M &#31526;&#21495;&#10;nmap cM :%s/\r$//g&#60;CR&#62;:noh&#60;CR&#62;&#10;&#10;set ignorecase                                        &#34;&#25628;&#32034;&#27169;&#24335;&#37324;&#24573;&#30053;&#22823;&#23567;&#20889;&#10;set smartcase                                         &#34;&#22914;&#26524;&#25628;&#32034;&#27169;&#24335;&#21253;&#21547;&#22823;&#20889;&#23383;&#31526;&#65292;&#19981;&#20351;&#29992; &#39;ignorecase&#39; &#36873;&#39033;&#65292;&#21482;&#26377;&#22312;&#36755;&#20837;&#25628;&#32034;&#27169;&#24335;&#24182;&#19988;&#25171;&#24320; &#39;ignorecase&#39; &#36873;&#39033;&#26102;&#25165;&#20250;&#20351;&#29992;&#10;&#34; set noincsearch                                       &#34;&#22312;&#36755;&#20837;&#35201;&#25628;&#32034;&#30340;&#25991;&#23383;&#26102;&#65292;&#21462;&#28040;&#23454;&#26102;&#21305;&#37197;&#10;&#10;&#34; Ctrl + K &#25554;&#20837;&#27169;&#24335;&#19979;&#20809;&#26631;&#21521;&#19978;&#31227;&#21160;&#10;imap &#60;c-k&#62; &#60;Up&#62;&#10;&#10;&#34; Ctrl + J &#25554;&#20837;&#27169;&#24335;&#19979;&#20809;&#26631;&#21521;&#19979;&#31227;&#21160;&#10;imap &#60;c-j&#62; &#60;Down&#62;&#10;&#10;&#34; Ctrl + H &#25554;&#20837;&#27169;&#24335;&#19979;&#20809;&#26631;&#21521;&#24038;&#31227;&#21160;&#10;imap &#60;c-h&#62; &#60;Left&#62;&#10;&#10;&#34; Ctrl + L &#25554;&#20837;&#27169;&#24335;&#19979;&#20809;&#26631;&#21521;&#21491;&#31227;&#21160;&#10;imap &#60;c-l&#62; &#60;Right&#62;&#10;&#10;&#34; &#21551;&#29992;&#27599;&#34892;&#36229;&#36807;80&#21015;&#30340;&#23383;&#31526;&#25552;&#31034;&#65288;&#23383;&#20307;&#21464;&#34013;&#24182;&#21152;&#19979;&#21010;&#32447;&#65289;&#65292;&#19981;&#21551;&#29992;&#23601;&#27880;&#37322;&#25481;&#10;au BufWinEnter * let w:m2=matchadd(&#39;Underlined&#39;, &#39;\%&#62;&#39; . 80 . &#39;v.\+&#39;, -1)&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; &#30028;&#38754;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;set number                                            &#34;&#26174;&#31034;&#34892;&#21495;&#10;set laststatus=2                                      &#34;&#21551;&#29992;&#29366;&#24577;&#26639;&#20449;&#24687;&#10;set cmdheight=2                                       &#34;&#35774;&#32622;&#21629;&#20196;&#34892;&#30340;&#39640;&#24230;&#20026;2&#65292;&#40664;&#35748;&#20026;1&#10;set cursorline                                        &#34;&#31361;&#20986;&#26174;&#31034;&#24403;&#21069;&#34892;&#10;&#34; set guifont=YaHei_Consolas_Hybrid:h10                 &#34;&#35774;&#32622;&#23383;&#20307;:&#23383;&#21495;&#65288;&#23383;&#20307;&#21517;&#31216;&#31354;&#26684;&#29992;&#19979;&#21010;&#32447;&#20195;&#26367;&#65289;&#10;set nowrap                                            &#34;&#35774;&#32622;&#19981;&#33258;&#21160;&#25442;&#34892;&#10;set shortmess=atI                                     &#34;&#21435;&#25481;&#27426;&#36814;&#30028;&#38754;&#10;&#10;&#34; &#35774;&#32622; gVim &#31383;&#21475;&#21021;&#22987;&#20301;&#32622;&#21450;&#22823;&#23567;&#10;if g:isGUI&#10;    &#34; au GUIEnter * simalt ~x                           &#34;&#31383;&#21475;&#21551;&#21160;&#26102;&#33258;&#21160;&#26368;&#22823;&#21270;&#10;    winpos 100 10                                     &#34;&#25351;&#23450;&#31383;&#21475;&#20986;&#29616;&#30340;&#20301;&#32622;&#65292;&#22352;&#26631;&#21407;&#28857;&#22312;&#23631;&#24149;&#24038;&#19978;&#35282;&#10;    set lines=38 columns=120                          &#34;&#25351;&#23450;&#31383;&#21475;&#22823;&#23567;&#65292;lines&#20026;&#39640;&#24230;&#65292;columns&#20026;&#23485;&#24230;&#10;endif&#10;&#10;&#34; &#35774;&#32622;&#20195;&#30721;&#37197;&#33394;&#26041;&#26696;&#10;if g:isGUI&#10;    colorscheme Tomorrow-Night-Eighties               &#34;Gvim&#37197;&#33394;&#26041;&#26696;&#10;else&#10;    colorscheme Tomorrow-Night-Eighties               &#34;&#32456;&#31471;&#37197;&#33394;&#26041;&#26696;&#10;endif&#10;&#10;&#34; &#26174;&#31034;/&#38544;&#34255;&#33756;&#21333;&#26639;&#12289;&#24037;&#20855;&#26639;&#12289;&#28378;&#21160;&#26465;&#65292;&#21487;&#29992; Ctrl + F11 &#20999;&#25442;&#10;if g:isGUI&#10;    set guioptions-=m&#10;    set guioptions-=T&#10;    set guioptions-=r&#10;    set guioptions-=L&#10;    nmap &#60;silent&#62; &#60;c-F11&#62; :if &#38;guioptions =~# &#39;m&#39; &#60;Bar&#62;&#10;        \set guioptions-=m &#60;Bar&#62;&#10;        \set guioptions-=T &#60;Bar&#62;&#10;        \set guioptions-=r &#60;Bar&#62;&#10;        \set guioptions-=L &#60;Bar&#62;&#10;    \else &#60;Bar&#62;&#10;        \set guioptions+=m &#60;Bar&#62;&#10;        \set guioptions+=T &#60;Bar&#62;&#10;        \set guioptions+=r &#60;Bar&#62;&#10;        \set guioptions+=L &#60;Bar&#62;&#10;    \endif&#60;CR&#62;&#10;endif&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; &#32534;&#35793;&#12289;&#36830;&#25509;&#12289;&#36816;&#34892;&#37197;&#32622; (&#30446;&#21069;&#21482;&#37197;&#32622;&#20102;C&#12289;C++&#12289;Java&#35821;&#35328;)&#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; F9 &#19968;&#38190;&#20445;&#23384;&#12289;&#32534;&#35793;&#12289;&#36830;&#25509;&#23384;&#24182;&#36816;&#34892;&#10;nmap &#60;F9&#62; :call Run()&#60;CR&#62;&#10;imap &#60;F9&#62; &#60;ESC&#62;:call Run()&#60;CR&#62;&#10;&#10;&#34; Ctrl + F9 &#19968;&#38190;&#20445;&#23384;&#24182;&#32534;&#35793;&#10;nmap &#60;c-F9&#62; :call Compile()&#60;CR&#62;&#10;imap &#60;c-F9&#62; &#60;ESC&#62;:call Compile()&#60;CR&#62;&#10;&#10;&#34; Ctrl + F10 &#19968;&#38190;&#20445;&#23384;&#24182;&#36830;&#25509;&#10;nmap &#60;c-F10&#62; :call Link()&#60;CR&#62;&#10;imap &#60;c-F10&#62; &#60;ESC&#62;:call Link()&#60;CR&#62;&#10;&#10;let s:LastShellReturn_C = 0&#10;let s:LastShellReturn_L = 0&#10;let s:ShowWarning = 1&#10;let s:Obj_Extension = &#39;.o&#39;&#10;let s:Exe_Extension = &#39;.exe&#39;&#10;let s:Class_Extension = &#39;.class&#39;&#10;let s:Sou_Error = 0&#10;&#10;let s:windows_CFlags = &#39;gcc\ -fexec-charset=gbk\ -Wall\ -g\ -O0\ -c\ %\ -o\ %&#60;.o&#39;&#10;let s:linux_CFlags = &#39;gcc\ -Wall\ -g\ -O0\ -c\ %\ -o\ %&#60;.o&#39;&#10;&#10;let s:windows_CPPFlags = &#39;g++\ -fexec-charset=gbk\ -Wall\ -g\ -O0\ -c\ %\ -o\ %&#60;.o&#39;&#10;let s:linux_CPPFlags = &#39;g++\ -Wall\ -g\ -O0\ -c\ %\ -o\ %&#60;.o&#39;&#10;&#10;let s:JavaFlags = &#39;javac\ %&#39;&#10;&#10;func! Compile()&#10;    exe &#34;:ccl&#34;&#10;    exe &#34;:update&#34;&#10;    let s:Sou_Error = 0&#10;    let s:LastShellReturn_C = 0&#10;    let Sou = expand(&#34;%:p&#34;)&#10;    let v:statusmsg = &#39;&#39;&#10;    if expand(&#34;%:e&#34;) == &#34;c&#34; || expand(&#34;%:e&#34;) == &#34;cpp&#34; || expand(&#34;%:e&#34;) == &#34;cxx&#34;&#10;        let Obj = expand(&#34;%:p:r&#34;).s:Obj_Extension&#10;        let Obj_Name = expand(&#34;%:p:t:r&#34;).s:Obj_Extension&#10;        if !filereadable(Obj) || (filereadable(Obj) &#38;&#38; (getftime(Obj) &#60; getftime(Sou)))&#10;            redraw!&#10;            if expand(&#34;%:e&#34;) == &#34;c&#34;&#10;                if g:iswindows&#10;                    exe &#34;:setlocal makeprg=&#34;.s:windows_CFlags&#10;                else&#10;                    exe &#34;:setlocal makeprg=&#34;.s:linux_CFlags&#10;                endif&#10;                echohl WarningMsg | echo &#34; compiling...&#34;&#10;                silent make&#10;            elseif expand(&#34;%:e&#34;) == &#34;cpp&#34; || expand(&#34;%:e&#34;) == &#34;cxx&#34;&#10;                if g:iswindows&#10;                    exe &#34;:setlocal makeprg=&#34;.s:windows_CPPFlags&#10;                else&#10;                    exe &#34;:setlocal makeprg=&#34;.s:linux_CPPFlags&#10;                endif&#10;                echohl WarningMsg | echo &#34; compiling...&#34;&#10;                silent make&#10;            endif&#10;            redraw!&#10;            if v:shell_error != 0&#10;                let s:LastShellReturn_C = v:shell_error&#10;            endif&#10;            if g:iswindows&#10;                if s:LastShellReturn_C != 0&#10;                    exe &#34;:bo cope&#34;&#10;                    echohl WarningMsg | echo &#34; compilation failed&#34;&#10;                else&#10;                    if s:ShowWarning&#10;                        exe &#34;:bo cw&#34;&#10;                    endif&#10;                    echohl WarningMsg | echo &#34; compilation successful&#34;&#10;                endif&#10;            else&#10;                if empty(v:statusmsg)&#10;                    echohl WarningMsg | echo &#34; compilation successful&#34;&#10;                else&#10;                    exe &#34;:bo cope&#34;&#10;                endif&#10;            endif&#10;        else&#10;            echohl WarningMsg | echo &#34;&#34;Obj_Name&#34;is up to date&#34;&#10;        endif&#10;    elseif expand(&#34;%:e&#34;) == &#34;java&#34;&#10;        let class = expand(&#34;%:p:r&#34;).s:Class_Extension&#10;        let class_Name = expand(&#34;%:p:t:r&#34;).s:Class_Extension&#10;        if !filereadable(class) || (filereadable(class) &#38;&#38; (getftime(class) &#60; getftime(Sou)))&#10;            redraw!&#10;            exe &#34;:setlocal makeprg=&#34;.s:JavaFlags&#10;            echohl WarningMsg | echo &#34; compiling...&#34;&#10;            silent make&#10;            redraw!&#10;            if v:shell_error != 0&#10;                let s:LastShellReturn_C = v:shell_error&#10;            endif&#10;            if g:iswindows&#10;                if s:LastShellReturn_C != 0&#10;                    exe &#34;:bo cope&#34;&#10;                    echohl WarningMsg | echo &#34; compilation failed&#34;&#10;                else&#10;                    if s:ShowWarning&#10;                        exe &#34;:bo cw&#34;&#10;                    endif&#10;                    echohl WarningMsg | echo &#34; compilation successful&#34;&#10;                endif&#10;            else&#10;                if empty(v:statusmsg)&#10;                    echohl WarningMsg | echo &#34; compilation successful&#34;&#10;                else&#10;                    exe &#34;:bo cope&#34;&#10;                endif&#10;            endif&#10;        else&#10;            echohl WarningMsg | echo &#34;&#34;class_Name&#34;is up to date&#34;&#10;        endif&#10;    else&#10;        let s:Sou_Error = 1&#10;        echohl WarningMsg | echo &#34; please choose the correct source file&#34;&#10;    endif&#10;    exe &#34;:setlocal makeprg=make&#34;&#10;endfunc&#10;&#10;func! Link()&#10;    call Compile()&#10;    if s:Sou_Error || s:LastShellReturn_C != 0&#10;        return&#10;    endif&#10;    if expand(&#34;%:e&#34;) == &#34;c&#34; || expand(&#34;%:e&#34;) == &#34;cpp&#34; || expand(&#34;%:e&#34;) == &#34;cxx&#34;&#10;        let s:LastShellReturn_L = 0&#10;        let Sou = expand(&#34;%:p&#34;)&#10;        let Obj = expand(&#34;%:p:r&#34;).s:Obj_Extension&#10;        if g:iswindows&#10;            let Exe = expand(&#34;%:p:r&#34;).s:Exe_Extension&#10;            let Exe_Name = expand(&#34;%:p:t:r&#34;).s:Exe_Extension&#10;        else&#10;            let Exe = expand(&#34;%:p:r&#34;)&#10;            let Exe_Name = expand(&#34;%:p:t:r&#34;)&#10;        endif&#10;        let v:statusmsg = &#39;&#39;&#10;        if filereadable(Obj) &#38;&#38; (getftime(Obj) &#62;= getftime(Sou))&#10;            redraw!&#10;            if !executable(Exe) || (executable(Exe) &#38;&#38; getftime(Exe) &#60; getftime(Obj))&#10;                if expand(&#34;%:e&#34;) == &#34;c&#34;&#10;                    setlocal makeprg=gcc\ -o\ %&#60;\ %&#60;.o&#10;                    echohl WarningMsg | echo &#34; linking...&#34;&#10;                    silent make&#10;                elseif expand(&#34;%:e&#34;) == &#34;cpp&#34; || expand(&#34;%:e&#34;) == &#34;cxx&#34;&#10;                    setlocal makeprg=g++\ -o\ %&#60;\ %&#60;.o&#10;                    echohl WarningMsg | echo &#34; linking...&#34;&#10;                    silent make&#10;                endif&#10;                redraw!&#10;                if v:shell_error != 0&#10;                    let s:LastShellReturn_L = v:shell_error&#10;                endif&#10;                if g:iswindows&#10;                    if s:LastShellReturn_L != 0&#10;                        exe &#34;:bo cope&#34;&#10;                        echohl WarningMsg | echo &#34; linking failed&#34;&#10;                    else&#10;                        if s:ShowWarning&#10;                            exe &#34;:bo cw&#34;&#10;                        endif&#10;                        echohl WarningMsg | echo &#34; linking successful&#34;&#10;                    endif&#10;                else&#10;                    if empty(v:statusmsg)&#10;                        echohl WarningMsg | echo &#34; linking successful&#34;&#10;                    else&#10;                        exe &#34;:bo cope&#34;&#10;                    endif&#10;                endif&#10;            else&#10;                echohl WarningMsg | echo &#34;&#34;Exe_Name&#34;is up to date&#34;&#10;            endif&#10;        endif&#10;        setlocal makeprg=make&#10;    elseif expand(&#34;%:e&#34;) == &#34;java&#34;&#10;        return&#10;    endif&#10;endfunc&#10;&#10;func! Run()&#10;    let s:ShowWarning = 0&#10;    call Link()&#10;    let s:ShowWarning = 1&#10;    if s:Sou_Error || s:LastShellReturn_C != 0 || s:LastShellReturn_L != 0&#10;        return&#10;    endif&#10;    let Sou = expand(&#34;%:p&#34;)&#10;    if expand(&#34;%:e&#34;) == &#34;c&#34; || expand(&#34;%:e&#34;) == &#34;cpp&#34; || expand(&#34;%:e&#34;) == &#34;cxx&#34;&#10;        let Obj = expand(&#34;%:p:r&#34;).s:Obj_Extension&#10;        if g:iswindows&#10;            let Exe = expand(&#34;%:p:r&#34;).s:Exe_Extension&#10;        else&#10;            let Exe = expand(&#34;%:p:r&#34;)&#10;        endif&#10;        if executable(Exe) &#38;&#38; getftime(Exe) &#62;= getftime(Obj) &#38;&#38; getftime(Obj) &#62;= getftime(Sou)&#10;            redraw!&#10;            echohl WarningMsg | echo &#34; running...&#34;&#10;            if g:iswindows&#10;                exe &#34;:!%&#60;.exe&#34;&#10;            else&#10;                if g:isGUI&#10;                    exe &#34;:!gnome-terminal -x bash -c &#39;./%&#60;; echo; echo &#35831;&#25353; Enter &#38190;&#32487;&#32493;; read&#39;&#34;&#10;                else&#10;                    exe &#34;:!clear; ./%&#60;&#34;&#10;                endif&#10;            endif&#10;            redraw!&#10;            echohl WarningMsg | echo &#34; running finish&#34;&#10;        endif&#10;    elseif expand(&#34;%:e&#34;) == &#34;java&#34;&#10;        let class = expand(&#34;%:p:r&#34;).s:Class_Extension&#10;        if getftime(class) &#62;= getftime(Sou)&#10;            redraw!&#10;            echohl WarningMsg | echo &#34; running...&#34;&#10;            if g:iswindows&#10;                exe &#34;:!java %&#60;&#34;&#10;            else&#10;                if g:isGUI&#10;                    exe &#34;:!gnome-terminal -x bash -c &#39;java %&#60;; echo; echo &#35831;&#25353; Enter &#38190;&#32487;&#32493;; read&#39;&#34;&#10;                else&#10;                    exe &#34;:!clear; java %&#60;&#34;&#10;                endif&#10;            endif&#10;            redraw!&#10;            echohl WarningMsg | echo &#34; running finish&#34;&#10;        endif&#10;    endif&#10;endfunc&#10;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; &#22312;&#27983;&#35272;&#22120;&#20013;&#39044;&#35272; Html &#25110; PHP &#25991;&#20214; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#20462;&#25913;&#21069;&#35831;&#20808;&#36890;&#35835;&#27492;&#27169;&#22359;&#65292;&#26126;&#30333;&#20102;&#20877;&#25913;&#20197;&#36991;&#20813;&#38169;&#35823;&#10;&#10;&#34; F5 &#21152;&#27983;&#35272;&#22120;&#21517;&#31216;&#32553;&#20889;&#35843;&#29992;&#27983;&#35272;&#22120;&#39044;&#35272;&#65292;&#21551;&#29992;&#21069;&#20808;&#30830;&#23450;&#26377;&#23433;&#35013;&#30456;&#24212;&#27983;&#35272;&#22120;&#65292;&#24182;&#22312;&#19979;&#38754;&#30340;&#37197;&#32622;&#22909;&#20854;&#23433;&#35013;&#30446;&#24405;&#10;if g:iswindows&#10;    &#34;&#20197;&#19979;&#20026;&#21482;&#25903;&#25345;Windows&#31995;&#32479;&#30340;&#27983;&#35272;&#22120;&#10;&#10;    &#34; &#35843;&#29992;&#31995;&#32479;IE&#27983;&#35272;&#22120;&#39044;&#35272;&#65292;&#22914;&#26524;&#24050;&#21368;&#36733;&#21487;&#23558;&#20854;&#27880;&#37322;&#10;    nmap &#60;F5&#62;ie :call ViewInBrowser(&#34;ie&#34;)&#60;cr&#62;&#10;    imap &#60;F5&#62;ie &#60;ESC&#62;:call ViewInBrowser(&#34;ie&#34;)&#60;cr&#62;&#10;&#10;    &#34; &#35843;&#29992;IETester(IE&#27979;&#35797;&#24037;&#20855;)&#39044;&#35272;&#65292;&#22914;&#26524;&#26377;&#23433;&#35013;&#21487;&#21462;&#28040;&#27880;&#37322;&#10;    &#34; nmap &#60;F5&#62;ie6 :call ViewInBrowser(&#34;ie6&#34;)&#60;cr&#62;&#10;    &#34; imap &#60;F5&#62;ie6 &#60;ESC&#62;:call ViewInBrowser(&#34;ie6&#34;)&#60;cr&#62;&#10;    &#34; nmap &#60;F5&#62;ie7 :call ViewInBrowser(&#34;ie7&#34;)&#60;cr&#62;&#10;    &#34; imap &#60;F5&#62;ie7 &#60;ESC&#62;:call ViewInBrowser(&#34;ie7&#34;)&#60;cr&#62;&#10;    &#34; nmap &#60;F5&#62;ie8 :call ViewInBrowser(&#34;ie8&#34;)&#60;cr&#62;&#10;    &#34; imap &#60;F5&#62;ie8 &#60;ESC&#62;:call ViewInBrowser(&#34;ie8&#34;)&#60;cr&#62;&#10;    &#34; nmap &#60;F5&#62;ie9 :call ViewInBrowser(&#34;ie9&#34;)&#60;cr&#62;&#10;    &#34; imap &#60;F5&#62;ie9 &#60;ESC&#62;:call ViewInBrowser(&#34;ie9&#34;)&#60;cr&#62;&#10;    &#34; nmap &#60;F5&#62;ie10 :call ViewInBrowser(&#34;ie10&#34;)&#60;cr&#62;&#10;    &#34; imap &#60;F5&#62;ie10 &#60;ESC&#62;:call ViewInBrowser(&#34;ie10&#34;)&#60;cr&#62;&#10;    &#34; nmap &#60;F5&#62;iea :call ViewInBrowser(&#34;iea&#34;)&#60;cr&#62;&#10;    &#34; imap &#60;F5&#62;iea &#60;ESC&#62;:call ViewInBrowser(&#34;iea&#34;)&#60;cr&#62;&#10;elseif g:islinux&#10;    &#34;&#20197;&#19979;&#20026;&#21482;&#25903;&#25345;Linux&#31995;&#32479;&#30340;&#27983;&#35272;&#22120;&#10;    &#34;&#26242;&#26410;&#37197;&#32622;&#65292;&#24453;&#26377;&#26102;&#38388;&#20877;&#24324;&#20102;&#10;endif&#10;&#10;&#34;&#20197;&#19979;&#20026;&#25903;&#25345;Windows&#19982;Linux&#31995;&#32479;&#30340;&#27983;&#35272;&#22120;&#10;&#10;&#34; &#35843;&#29992;Firefox&#27983;&#35272;&#22120;&#39044;&#35272;&#65292;&#22914;&#26524;&#26377;&#23433;&#35013;&#21487;&#21462;&#28040;&#27880;&#37322;&#10;&#34; nmap &#60;F5&#62;ff :call ViewInBrowser(&#34;ff&#34;)&#60;cr&#62;&#10;&#34; imap &#60;F5&#62;ff &#60;ESC&#62;:call ViewInBrowser(&#34;ff&#34;)&#60;cr&#62;&#10;&#10;&#34; &#35843;&#29992;Maxthon(&#36968;&#28216;)&#27983;&#35272;&#22120;&#39044;&#35272;&#65292;&#22914;&#26524;&#26377;&#23433;&#35013;&#21487;&#21462;&#28040;&#27880;&#37322;&#10;&#34; nmap &#60;F5&#62;ay :call ViewInBrowser(&#34;ay&#34;)&#60;cr&#62;&#10;&#34; imap &#60;F5&#62;ay &#60;ESC&#62;:call ViewInBrowser(&#34;ay&#34;)&#60;cr&#62;&#10;&#10;&#34; &#35843;&#29992;Opera&#27983;&#35272;&#22120;&#39044;&#35272;&#65292;&#22914;&#26524;&#26377;&#23433;&#35013;&#21487;&#21462;&#28040;&#27880;&#37322;&#10;&#34; nmap &#60;F5&#62;op :call ViewInBrowser(&#34;op&#34;)&#60;cr&#62;&#10;&#34; imap &#60;F5&#62;op &#60;ESC&#62;:call ViewInBrowser(&#34;op&#34;)&#60;cr&#62;&#10;&#10;&#34; &#35843;&#29992;Chrome&#27983;&#35272;&#22120;&#39044;&#35272;&#65292;&#22914;&#26524;&#26377;&#23433;&#35013;&#21487;&#21462;&#28040;&#27880;&#37322;&#10;&#34; nmap &#60;F5&#62;cr :call ViewInBrowser(&#34;cr&#34;)&#60;cr&#62;&#10;&#34; imap &#60;F5&#62;cr &#60;ESC&#62;:call ViewInBrowser(&#34;cr&#34;)&#60;cr&#62;&#10;&#10;&#34; &#27983;&#35272;&#22120;&#35843;&#29992;&#20989;&#25968;&#10;function! ViewInBrowser(name)&#10;    if expand(&#34;%:e&#34;) == &#34;php&#34; || expand(&#34;%:e&#34;) == &#34;html&#34;&#10;        exe &#34;:update&#34;&#10;        if g:iswindows&#10;            &#34;&#33719;&#21462;&#35201;&#39044;&#35272;&#30340;&#25991;&#20214;&#36335;&#24452;&#65292;&#24182;&#23558;&#36335;&#24452;&#20013;&#30340;&#39;\&#39;&#26367;&#25442;&#20026;&#39;/&#39;&#65292;&#21516;&#26102;&#23558;&#36335;&#24452;&#25991;&#23383;&#30340;&#32534;&#30721;&#36716;&#25442;&#20026;gbk&#65288;&#21516;cp936&#65289;&#10;            let file = iconv(substitute(expand(&#34;%:p&#34;), &#39;\&#39;, &#39;/&#39;, &#34;g&#34;), &#34;utf-8&#34;, &#34;gbk&#34;)&#10;&#10;            &#34;&#27983;&#35272;&#22120;&#36335;&#24452;&#35774;&#32622;&#65292;&#36335;&#24452;&#20013;&#20351;&#29992;&#39;/&#39;&#26012;&#26464;&#65292;&#26356;&#25913;&#36335;&#24452;&#35831;&#26356;&#25913;&#21452;&#24341;&#21495;&#37324;&#30340;&#20869;&#23481;&#10;            &#34;&#19979;&#38754;&#21482;&#21551;&#29992;&#20102;&#31995;&#32479;IE&#27983;&#35272;&#22120;&#65292;&#22914;&#38656;&#21551;&#29992;&#20854;&#23427;&#30340;&#21487;&#23558;&#20854;&#21462;&#28040;&#27880;&#37322;&#65288;&#24471;&#20808;&#23433;&#35013;&#65292;&#24182;&#37197;&#32622;&#22909;&#23433;&#35013;&#36335;&#24452;&#65289;&#65292;&#20063;&#21487;&#25353;&#38656;&#22686;&#20943;&#10;            let SystemIE = &#34;C:/progra~1/intern~1/iexplore.exe&#34;  &#34;&#31995;&#32479;&#33258;&#24102;IE&#30446;&#24405;&#10;            &#34; let IETester = &#34;F:/IETester/IETester.exe&#34;           &#34;IETester&#31243;&#24207;&#30446;&#24405;&#65288;&#21487;&#25353;&#23454;&#38469;&#26356;&#25913;&#65289;&#10;            &#34; let Chrome = &#34;C:\Program Files (x86)\Google\Chrome\Application&#34;                 &#34;Chrome&#31243;&#24207;&#30446;&#24405;&#65288;&#21487;&#25353;&#23454;&#38469;&#26356;&#25913;&#65289;&#10;            &#34; let Firefox = &#34;D:/Program Files (x86)/Mozilla Firefox/Firefox.exe&#34;              &#34;Firefox&#31243;&#24207;&#30446;&#24405;&#65288;&#21487;&#25353;&#23454;&#38469;&#26356;&#25913;&#65289;&#10;            &#34; let Opera = &#34;F:/Opera/opera.exe&#34;                    &#34;Opera&#31243;&#24207;&#30446;&#24405;&#65288;&#21487;&#25353;&#23454;&#38469;&#26356;&#25913;&#65289;&#10;            &#34; let Maxthon = &#34;C:/Progra~2/Maxthon/Bin/Maxthon.exe&#34; &#34;Maxthon&#31243;&#24207;&#30446;&#24405;&#65288;&#21487;&#25353;&#23454;&#38469;&#26356;&#25913;&#65289;&#10;&#10;            &#34;&#26412;&#22320;&#34394;&#25311;&#26381;&#21153;&#22120;&#35774;&#32622;&#65292;&#25105;&#27979;&#35797;&#30340;&#26159;phpStudy2014&#65292;&#21487;&#26681;&#25454;&#33258;&#24049;&#30340;&#20462;&#25913;&#65292;&#26356;&#25913;&#36335;&#24452;&#35831;&#26356;&#25913;&#21452;&#24341;&#21495;&#37324;&#30340;&#20869;&#23481;&#10;            let htdocs =&#34;F:/phpStudy2014/WWW/&#34;                  &#34;&#34394;&#25311;&#26381;&#21153;&#22120;&#22320;&#22336;&#25110;&#30446;&#24405;&#65288;&#21487;&#25353;&#23454;&#38469;&#26356;&#25913;&#65289;&#10;            let url = &#34;localhost&#34;                               &#34;&#34394;&#25311;&#26381;&#21153;&#22120;&#32593;&#22336;&#65288;&#21487;&#25353;&#23454;&#38469;&#26356;&#25913;&#65289;&#10;        elseif g:islinux&#10;            &#34;&#26242;&#26102;&#36824;&#27809;&#26377;&#37197;&#32622;&#65292;&#26377;&#26102;&#38388;&#20877;&#24324;&#20102;&#12290;&#10;        endif&#10;&#10;        &#34;&#27983;&#35272;&#22120;&#35843;&#29992;&#32553;&#20889;&#65292;&#21487;&#26681;&#25454;&#23454;&#38469;&#22686;&#20943;&#65292;&#27880;&#24847;&#65292;&#19978;&#38754;&#27983;&#35272;&#22120;&#36335;&#24452;&#20013;&#27809;&#26377;&#23450;&#20041;&#36807;&#30340;&#21464;&#37327;&#65288;&#31561;&#21495;&#21491;&#36793;&#20026;&#21464;&#37327;&#65289;&#19981;&#33021;&#20986;&#29616;&#22312;&#19979;&#38754;&#21727;&#65288;&#21487;&#23558;&#20854;&#27880;&#37322;&#25110;&#21024;&#38500;&#65289;&#10;        let l:browsers = &#123;&#125;                             &#34;&#23450;&#20041;&#32553;&#20889;&#23383;&#20856;&#21464;&#37327;&#65292;&#27492;&#34892;&#19981;&#33021;&#21024;&#38500;&#25110;&#27880;&#37322;&#10;        &#34; let l:browsers[&#34;cr&#34;] = Chrome                   &#34;Chrome&#27983;&#35272;&#22120;&#32553;&#20889;&#10;        &#34; let l:browsers[&#34;ff&#34;] = Firefox                  &#34;Firefox&#27983;&#35272;&#22120;&#32553;&#20889;&#10;        &#34; let l:browsers[&#34;op&#34;] = Opera                    &#34;Opera&#27983;&#35272;&#22120;&#32553;&#20889;&#10;        &#34; let l:browsers[&#34;ay&#34;] = Maxthon                  &#34;&#36968;&#28216;&#27983;&#35272;&#22120;&#32553;&#20889;&#10;        let l:browsers[&#34;ie&#34;] = SystemIE                 &#34;&#31995;&#32479;IE&#27983;&#35272;&#22120;&#32553;&#20889;&#10;        &#34; let l:browsers[&#34;ie6&#34;] = IETester.&#34;-ie6&#34;         &#34;&#35843;&#29992;IETESTER&#24037;&#20855;&#20197;IE6&#39044;&#35272;&#32553;&#20889;&#65288;&#21464;&#37327;&#21152;&#21442;&#25968;&#65289;&#10;        &#34; let l:browsers[&#34;ie7&#34;] = IETester.&#34;-ie7&#34;         &#34;&#35843;&#29992;IETESTER&#24037;&#20855;&#20197;IE7&#39044;&#35272;&#32553;&#20889;&#65288;&#21464;&#37327;&#21152;&#21442;&#25968;&#65289;&#10;        &#34; let l:browsers[&#34;ie8&#34;] = IETester.&#34;-ie8&#34;         &#34;&#35843;&#29992;IETESTER&#24037;&#20855;&#20197;IE8&#39044;&#35272;&#32553;&#20889;&#65288;&#21464;&#37327;&#21152;&#21442;&#25968;&#65289;&#10;        &#34; let l:browsers[&#34;ie9&#34;] = IETester.&#34;-ie9&#34;         &#34;&#35843;&#29992;IETESTER&#24037;&#20855;&#20197;IE9&#39044;&#35272;&#32553;&#20889;&#65288;&#21464;&#37327;&#21152;&#21442;&#25968;&#65289;&#10;        &#34; let l:browsers[&#34;ie10&#34;] = IETester.&#34;-ie10&#34;       &#34;&#35843;&#29992;IETESTER&#24037;&#20855;&#20197;IE10&#39044;&#35272;&#32553;&#20889;&#65288;&#21464;&#37327;&#21152;&#21442;&#25968;&#65289;&#10;        &#34; let l:browsers[&#34;iea&#34;] = IETester.&#34;-al&#34;          &#34;&#35843;&#29992;IETESTER&#24037;&#20855;&#20197;&#25903;&#25345;&#30340;&#25152;&#26377;IE&#29256;&#26412;&#39044;&#35272;&#32553;&#20889;&#65288;&#21464;&#37327;&#21152;&#21442;&#25968;&#65289;&#10;&#10;        if stridx(file, htdocs) == -1   &#34;&#25991;&#20214;&#19981;&#22312;&#26412;&#22320;&#34394;&#25311;&#26381;&#21153;&#22120;&#30446;&#24405;&#65292;&#21017;&#30452;&#25509;&#39044;&#35272;&#65288;&#20294;&#19981;&#33021;&#35299;&#26512;PHP&#25991;&#20214;&#65289;&#10;           exec &#34;:silent !start &#34;. l:browsers[a:name] .&#34; file://&#34; . file&#10;        else    &#34;&#25991;&#20214;&#22312;&#26412;&#22320;&#34394;&#25311;&#26381;&#21153;&#22120;&#30446;&#24405;&#65292;&#21017;&#35843;&#29992;&#26412;&#22320;&#34394;&#25311;&#26381;&#21153;&#22120;&#35299;&#26512;&#39044;&#35272;&#65288;&#20808;&#21551;&#21160;&#26412;&#22320;&#34394;&#25311;&#26381;&#21153;&#22120;&#65289;&#10;            let file = substitute(file, htdocs, &#34;http://&#34;.url.&#34;/&#34;, &#34;g&#34;)    &#34;&#36716;&#25442;&#25991;&#20214;&#36335;&#24452;&#20026;&#34394;&#25311;&#26381;&#21153;&#22120;&#32593;&#22336;&#36335;&#24452;&#10;            exec &#34;:silent !start &#34;. l:browsers[a:name] file&#10;        endif&#10;    else&#10;        echohl WarningMsg | echo &#34; please choose the correct source file&#34;&#10;    endif&#10;endfunction&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; &#20854;&#23427;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;set writebackup                             &#34;&#20445;&#23384;&#25991;&#20214;&#21069;&#24314;&#31435;&#22791;&#20221;&#65292;&#20445;&#23384;&#25104;&#21151;&#21518;&#21024;&#38500;&#35813;&#22791;&#20221;&#10;set nobackup                                &#34;&#35774;&#32622;&#26080;&#22791;&#20221;&#25991;&#20214;&#10;&#34; set noswapfile                              &#34;&#35774;&#32622;&#26080;&#20020;&#26102;&#25991;&#20214;&#10;&#34; set vb t_vb=                                &#34;&#20851;&#38381;&#25552;&#31034;&#38899;&#10;&#10;&#10;&#34; =============================================================================&#10;&#34;                          &#60;&#60; &#20197;&#19979;&#20026;&#24120;&#29992;&#25554;&#20214;&#37197;&#32622; &#62;&#62;&#10;&#34; =============================================================================&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; a.vim &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#29992;&#20110;&#20999;&#25442;C/C++&#22836;&#25991;&#20214;&#10;&#34; :A     ---&#20999;&#25442;&#22836;&#25991;&#20214;&#24182;&#29420;&#21344;&#25972;&#20010;&#31383;&#21475;&#10;&#34; :AV    ---&#20999;&#25442;&#22836;&#25991;&#20214;&#24182;&#22402;&#30452;&#20998;&#21106;&#31383;&#21475;&#10;&#34; :AS    ---&#20999;&#25442;&#22836;&#25991;&#20214;&#24182;&#27700;&#24179;&#20998;&#21106;&#31383;&#21475;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; Align &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#19968;&#20010;&#23545;&#40784;&#30340;&#25554;&#20214;&#65292;&#29992;&#26469;&#8212;&#8212;&#25490;&#29256;&#19982;&#23545;&#40784;&#20195;&#30721;&#65292;&#21151;&#33021;&#24378;&#22823;&#65292;&#19981;&#36807;&#29992;&#21040;&#30340;&#26426;&#20250;&#19981;&#22810;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; auto-pairs &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#29992;&#20110;&#25324;&#21495;&#19982;&#24341;&#21495;&#33258;&#21160;&#34917;&#20840;&#65292;&#19981;&#36807;&#20250;&#19982;&#20989;&#25968;&#21407;&#22411;&#25552;&#31034;&#25554;&#20214;echofunc&#20914;&#31361;&#10;&#34; &#25152;&#20197;&#25105;&#23601;&#27809;&#26377;&#21152;&#20837;echofunc&#25554;&#20214;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; BufExplorer &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#24555;&#36895;&#36731;&#26494;&#30340;&#22312;&#32531;&#23384;&#20013;&#20999;&#25442;&#65288;&#30456;&#24403;&#20110;&#21478;&#19968;&#31181;&#22810;&#20010;&#25991;&#20214;&#38388;&#30340;&#20999;&#25442;&#26041;&#24335;&#65289;&#10;&#34; &#60;Leader&#62;be &#22312;&#24403;&#21069;&#31383;&#21475;&#26174;&#31034;&#32531;&#23384;&#21015;&#34920;&#24182;&#25171;&#24320;&#36873;&#23450;&#25991;&#20214;&#10;&#34; &#60;Leader&#62;bs &#27700;&#24179;&#20998;&#21106;&#31383;&#21475;&#26174;&#31034;&#32531;&#23384;&#21015;&#34920;&#65292;&#24182;&#22312;&#32531;&#23384;&#21015;&#34920;&#31383;&#21475;&#20013;&#25171;&#24320;&#36873;&#23450;&#25991;&#20214;&#10;&#34; &#60;Leader&#62;bv &#22402;&#30452;&#20998;&#21106;&#31383;&#21475;&#26174;&#31034;&#32531;&#23384;&#21015;&#34920;&#65292;&#24182;&#22312;&#32531;&#23384;&#21015;&#34920;&#31383;&#21475;&#20013;&#25171;&#24320;&#36873;&#23450;&#25991;&#20214;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; ccvext.vim &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#29992;&#20110;&#23545;&#25351;&#23450;&#25991;&#20214;&#33258;&#21160;&#29983;&#25104;tags&#19982;cscope&#25991;&#20214;&#24182;&#36830;&#25509;&#10;&#34; &#22914;&#26524;&#26159;Windows&#31995;&#32479;, &#21017;&#29983;&#25104;&#30340;&#25991;&#20214;&#22312;&#28304;&#25991;&#20214;&#25152;&#22312;&#30424;&#31526;&#26681;&#30446;&#24405;&#30340;.symbs&#30446;&#24405;&#19979;(&#22914;: X:\.symbs\)&#10;&#34; &#22914;&#26524;&#26159;Linux&#31995;&#32479;, &#21017;&#29983;&#25104;&#30340;&#25991;&#20214;&#22312;~/.symbs/&#30446;&#24405;&#19979;&#10;&#34; &#20855;&#20307;&#29992;&#27861;&#21487;&#21442;&#32771;www.vim.org&#20013;&#27492;&#25554;&#20214;&#30340;&#35828;&#26126;&#10;&#34; &#60;Leader&#62;sy &#33258;&#21160;&#29983;&#25104;tags&#19982;cscope&#25991;&#20214;&#24182;&#36830;&#25509;&#10;&#34; &#60;Leader&#62;sc &#36830;&#25509;&#24050;&#23384;&#22312;&#30340;tags&#19982;cscope&#25991;&#20214;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; cSyntaxAfter &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#39640;&#20142;&#25324;&#21495;&#19982;&#36816;&#31639;&#31526;&#31561;&#10;au! BufRead,BufNewFile,BufEnter *.&#123;c,cpp,h,java,javascript&#125; call CSyntaxAfter()&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; ctrlp.vim &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#19968;&#20010;&#20840;&#36335;&#24452;&#27169;&#31946;&#25991;&#20214;&#65292;&#32531;&#20914;&#21306;&#65292;&#26368;&#36817;&#26368;&#22810;&#20351;&#29992;&#65292;... &#26816;&#32034;&#25554;&#20214;&#65307;&#35814;&#32454;&#24110;&#21161;&#35265; :h ctrlp&#10;&#34; &#24120;&#35268;&#27169;&#24335;&#19979;&#36755;&#20837;&#65306;Ctrl + p &#35843;&#29992;&#25554;&#20214;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; emmet-vim&#65288;&#21069;&#36523;&#20026;Zen coding&#65289; &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; HTML/CSS&#20195;&#30721;&#24555;&#36895;&#32534;&#20889;&#31070;&#22120;&#65292;&#35814;&#32454;&#24110;&#21161;&#35265; :h emmet.txt&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; indentLine &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#29992;&#20110;&#26174;&#31034;&#23545;&#40784;&#32447;&#65292;&#19982; indent_guides &#22312;&#26174;&#31034;&#26041;&#24335;&#19978;&#19981;&#21516;&#65292;&#26681;&#25454;&#33258;&#24049;&#21916;&#22909;&#36873;&#25321;&#20102;&#10;&#34; &#22312;&#32456;&#31471;&#19978;&#20250;&#26377;&#23631;&#24149;&#21047;&#26032;&#30340;&#38382;&#39064;&#65292;&#36825;&#20010;&#38382;&#39064;&#33021;&#35299;&#20915;&#26377;&#26356;&#22909;&#20102;&#10;&#34; &#24320;&#21551;/&#20851;&#38381;&#23545;&#40784;&#32447;&#10;nmap &#60;leader&#62;il :IndentLinesToggle&#60;CR&#62;&#10;&#10;&#34; &#35774;&#32622;Gvim&#30340;&#23545;&#40784;&#32447;&#26679;&#24335;&#10;if g:isGUI&#10;    let g:indentLine_char = &#34;&#9482;&#34;&#10;    let g:indentLine_first_char = &#34;&#9482;&#34;&#10;endif&#10;&#10;&#34; &#35774;&#32622;&#32456;&#31471;&#23545;&#40784;&#32447;&#39068;&#33394;&#65292;&#22914;&#26524;&#19981;&#21916;&#27426;&#21487;&#20197;&#23558;&#20854;&#27880;&#37322;&#25481;&#37319;&#29992;&#40664;&#35748;&#39068;&#33394;&#10;let g:indentLine_color_term = 239&#10;&#10;&#34; &#35774;&#32622; GUI &#23545;&#40784;&#32447;&#39068;&#33394;&#65292;&#22914;&#26524;&#19981;&#21916;&#27426;&#21487;&#20197;&#23558;&#20854;&#27880;&#37322;&#25481;&#37319;&#29992;&#40664;&#35748;&#39068;&#33394;&#10;&#34; let g:indentLine_color_gui = &#39;#A4E57E&#39;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; vim-javacompleteex&#65288;&#20063;&#23601;&#26159; javacomplete &#22686;&#24378;&#29256;&#65289;&#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; java &#34917;&#20840;&#25554;&#20214;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; Mark--Karkat&#65288;&#20063;&#23601;&#26159; Mark&#65289; &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#32473;&#19981;&#21516;&#30340;&#21333;&#35789;&#39640;&#20142;&#65292;&#34920;&#26126;&#19981;&#21516;&#30340;&#21464;&#37327;&#26102;&#24456;&#26377;&#29992;&#65292;&#35814;&#32454;&#24110;&#21161;&#35265; :h mark.txt&#10;&#10;&#34; &#34; -----------------------------------------------------------------------------&#10;&#34; &#34;  &#60; MiniBufExplorer &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; &#34; -----------------------------------------------------------------------------&#10;&#34; &#34; &#24555;&#36895;&#27983;&#35272;&#21644;&#25805;&#20316;Buffer&#10;&#34; &#34; &#20027;&#35201;&#29992;&#20110;&#21516;&#26102;&#25171;&#24320;&#22810;&#20010;&#25991;&#20214;&#24182;&#30456;&#19982;&#20999;&#25442;&#10;&#10;&#34; &#34; let g:miniBufExplMapWindowNavArrows = 1     &#34;&#29992;Ctrl&#21152;&#26041;&#21521;&#38190;&#20999;&#25442;&#21040;&#19978;&#19979;&#24038;&#21491;&#30340;&#31383;&#21475;&#20013;&#21435;&#10;&#34; let g:miniBufExplMapWindowNavVim = 1        &#34;&#29992;&#60;C-k,j,h,l&#62;&#20999;&#25442;&#21040;&#19978;&#19979;&#24038;&#21491;&#30340;&#31383;&#21475;&#20013;&#21435;&#10;&#34; let g:miniBufExplMapCTabSwitchBufs = 1      &#34;&#21151;&#33021;&#22686;&#24378;&#65288;&#19981;&#36807;&#22909;&#20687;&#21482;&#26377;&#22312;Windows&#20013;&#25165;&#26377;&#29992;&#65289;&#10;&#34; &#34;                                            &#60;C-Tab&#62; &#21521;&#21069;&#24490;&#29615;&#20999;&#25442;&#21040;&#27599;&#20010;buffer&#19978;,&#24182;&#22312;&#20294;&#21069;&#31383;&#21475;&#25171;&#24320;&#10;&#34; &#34;                                            &#60;C-S-Tab&#62; &#21521;&#21518;&#24490;&#29615;&#20999;&#25442;&#21040;&#27599;&#20010;buffer&#19978;,&#24182;&#22312;&#24403;&#21069;&#31383;&#21475;&#25171;&#24320;&#10;&#10;&#34; &#22312;&#19981;&#20351;&#29992; MiniBufExplorer &#25554;&#20214;&#26102;&#20063;&#21487;&#29992;&#60;C-k,j,h,l&#62;&#20999;&#25442;&#21040;&#19978;&#19979;&#24038;&#21491;&#30340;&#31383;&#21475;&#20013;&#21435;&#10;noremap &#60;c-k&#62; &#60;c-w&#62;k&#10;noremap &#60;c-j&#62; &#60;c-w&#62;j&#10;noremap &#60;c-h&#62; &#60;c-w&#62;h&#10;noremap &#60;c-l&#62; &#60;c-w&#62;l&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; neocomplcache &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#20851;&#38190;&#23383;&#34917;&#20840;&#12289;&#25991;&#20214;&#36335;&#24452;&#34917;&#20840;&#12289;tag&#34917;&#20840;&#31561;&#31561;&#65292;&#21508;&#31181;&#65292;&#38750;&#24120;&#22909;&#29992;&#65292;&#36895;&#24230;&#36229;&#24555;&#12290;&#10;let g:neocomplcache_enable_at_startup = 1     &#34;vim &#21551;&#21160;&#26102;&#21551;&#29992;&#25554;&#20214;&#10;&#34; let g:neocomplcache_disable_auto_complete = 1 &#34;&#19981;&#33258;&#21160;&#24377;&#20986;&#34917;&#20840;&#21015;&#34920;&#10;&#34; &#22312;&#24377;&#20986;&#34917;&#20840;&#21015;&#34920;&#21518;&#29992; &#60;c-p&#62; &#25110; &#60;c-n&#62; &#36827;&#34892;&#19978;&#19979;&#36873;&#25321;&#25928;&#26524;&#27604;&#36739;&#22909;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; nerdcommenter &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#25105;&#20027;&#35201;&#29992;&#20110;C/C++&#20195;&#30721;&#27880;&#37322;(&#20854;&#23427;&#30340;&#20063;&#34892;)&#10;&#34; &#20197;&#19979;&#20026;&#25554;&#20214;&#40664;&#35748;&#24555;&#25463;&#38190;&#65292;&#20854;&#20013;&#30340;&#35828;&#26126;&#26159;&#20197;C/C++&#20026;&#20363;&#30340;&#65292;&#20854;&#23427;&#35821;&#35328;&#31867;&#20284;&#10;&#34; &#60;Leader&#62;ci &#20197;&#27599;&#34892;&#19968;&#20010; /* */ &#27880;&#37322;&#36873;&#20013;&#34892;(&#36873;&#20013;&#21306;&#22495;&#25152;&#22312;&#34892;)&#65292;&#20877;&#36755;&#20837;&#21017;&#21462;&#28040;&#27880;&#37322;&#10;&#34; &#60;Leader&#62;cm &#20197;&#19968;&#20010; /* */ &#27880;&#37322;&#36873;&#20013;&#34892;(&#36873;&#20013;&#21306;&#22495;&#25152;&#22312;&#34892;)&#65292;&#20877;&#36755;&#20837;&#21017;&#31216;&#37325;&#22797;&#27880;&#37322;&#10;&#34; &#60;Leader&#62;cc &#20197;&#27599;&#34892;&#19968;&#20010; /* */ &#27880;&#37322;&#36873;&#20013;&#34892;&#25110;&#21306;&#22495;&#65292;&#20877;&#36755;&#20837;&#21017;&#31216;&#37325;&#22797;&#27880;&#37322;&#10;&#34; &#60;Leader&#62;cu &#21462;&#28040;&#36873;&#20013;&#21306;&#22495;(&#34892;)&#30340;&#27880;&#37322;&#65292;&#36873;&#20013;&#21306;&#22495;(&#34892;)&#20869;&#33267;&#23569;&#26377;&#19968;&#20010; /* */&#10;&#34; &#60;Leader&#62;ca &#22312;/*...*/&#19982;//&#36825;&#20004;&#31181;&#27880;&#37322;&#26041;&#24335;&#20013;&#20999;&#25442;&#65288;&#20854;&#23427;&#35821;&#35328;&#21487;&#33021;&#19981;&#19968;&#26679;&#20102;&#65289;&#10;&#34; &#60;Leader&#62;cA &#34892;&#23614;&#27880;&#37322;&#10;let NERDSpaceDelims = 1                     &#34;&#22312;&#24038;&#27880;&#37322;&#31526;&#20043;&#21518;&#65292;&#21491;&#27880;&#37322;&#31526;&#20043;&#21069;&#30041;&#26377;&#31354;&#26684;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; nerdtree &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#26377;&#30446;&#24405;&#26449;&#32467;&#26500;&#30340;&#25991;&#20214;&#27983;&#35272;&#25554;&#20214;&#10;&#10;&#34; &#24120;&#35268;&#27169;&#24335;&#19979;&#36755;&#20837; F2 &#35843;&#29992;&#25554;&#20214;&#10;nmap &#60;F2&#62; :NERDTreeToggle&#60;CR&#62;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; omnicppcomplete &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#29992;&#20110;C/C++&#20195;&#30721;&#34917;&#20840;&#65292;&#36825;&#31181;&#34917;&#20840;&#20027;&#35201;&#38024;&#23545;&#21629;&#21517;&#31354;&#38388;&#12289;&#31867;&#12289;&#32467;&#26500;&#12289;&#20849;&#21516;&#20307;&#31561;&#36827;&#34892;&#34917;&#20840;&#65292;&#35814;&#32454;&#10;&#34; &#35828;&#26126;&#21487;&#20197;&#21442;&#32771;&#24110;&#21161;&#25110;&#32593;&#32476;&#25945;&#31243;&#31561;&#10;&#34; &#20351;&#29992;&#21069;&#20808;&#25191;&#34892;&#22914;&#19979; ctags &#21629;&#20196;&#65288;&#26412;&#37197;&#32622;&#20013;&#21487;&#20197;&#30452;&#25509;&#20351;&#29992; ccvext &#25554;&#20214;&#26469;&#25191;&#34892;&#20197;&#19979;&#21629;&#20196;&#65289;&#10;&#34; ctags -R --c++-kinds=+p --fields=+iaS --extra=+q&#10;&#34; &#25105;&#20351;&#29992;&#19978;&#38754;&#30340;&#21442;&#25968;&#29983;&#25104;&#26631;&#31614;&#21518;&#65292;&#23545;&#20989;&#25968;&#20351;&#29992;&#36339;&#36716;&#26102;&#20250;&#20986;&#29616;&#22810;&#20010;&#36873;&#25321;&#10;&#34; &#25152;&#20197;&#25105;&#23601;&#23558;--c++-kinds=+p&#21442;&#25968;&#32473;&#21435;&#25481;&#20102;&#65292;&#22914;&#26524;&#22823;&#20384;&#26377;&#20160;&#20040;&#20854;&#23427;&#35299;&#20915;&#26041;&#27861;&#24076;&#26395;&#19981;&#35201;&#20445;&#30041;&#21568;&#10;set completeopt=menu                        &#34;&#20851;&#38381;&#39044;&#35272;&#31383;&#21475;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; powerline &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#29366;&#24577;&#26639;&#25554;&#20214;&#65292;&#26356;&#22909;&#30340;&#29366;&#24577;&#26639;&#25928;&#26524;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; repeat &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#20027;&#35201;&#29992;&#34;.&#34;&#21629;&#20196;&#26469;&#37325;&#22797;&#19978;&#27425;&#25554;&#20214;&#20351;&#29992;&#30340;&#21629;&#20196;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; snipMate &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#29992;&#20110;&#21508;&#31181;&#20195;&#30721;&#34917;&#20840;&#65292;&#36825;&#31181;&#34917;&#20840;&#26159;&#19968;&#31181;&#23545;&#20195;&#30721;&#20013;&#30340;&#35789;&#19982;&#20195;&#30721;&#22359;&#30340;&#32553;&#20889;&#34917;&#20840;&#65292;&#35814;&#32454;&#29992;&#27861;&#21487;&#20197;&#21442;&#10;&#34; &#32771;&#20351;&#29992;&#35828;&#26126;&#25110;&#32593;&#32476;&#25945;&#31243;&#31561;&#12290;&#19981;&#36807;&#26377;&#26102;&#20505;&#20063;&#20250;&#19982; supertab &#25554;&#20214;&#22312;&#34917;&#20840;&#26102;&#20135;&#29983;&#20914;&#31361;&#65292;&#22914;&#26524;&#22823;&#10;&#34; &#20384;&#26377;&#20160;&#20040;&#20854;&#23427;&#35299;&#20915;&#26041;&#27861;&#24076;&#26395;&#19981;&#35201;&#20445;&#30041;&#21568;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; SrcExpl &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#22686;&#24378;&#28304;&#20195;&#30721;&#27983;&#35272;&#65292;&#20854;&#21151;&#33021;&#23601;&#20687;Windows&#20013;&#30340;&#34;Source Insight&#34;&#10;nmap &#60;F3&#62; :SrcExplToggle&#60;CR&#62;                &#34;&#25171;&#24320;/&#38381;&#27983;&#35272;&#31383;&#21475;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; std_c &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#29992;&#20110;&#22686;&#24378;C&#35821;&#27861;&#39640;&#20142;&#10;&#10;&#34; &#21551;&#29992; // &#27880;&#35270;&#39118;&#26684;&#10;let c_cpp_comments = 0&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; surround &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#24555;&#36895;&#32473;&#21333;&#35789;/&#21477;&#23376;&#20004;&#36793;&#22686;&#21152;&#31526;&#21495;&#65288;&#21253;&#25324;html&#26631;&#31614;&#65289;&#65292;&#32570;&#28857;&#26159;&#19981;&#33021;&#29992;&#34;.&#34;&#26469;&#37325;&#22797;&#21629;&#20196;&#10;&#34; &#19981;&#36807; repeat &#25554;&#20214;&#21487;&#20197;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#65292;&#35814;&#32454;&#24110;&#21161;&#35265; :h surround.txt&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; Syntastic &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#29992;&#20110;&#20445;&#23384;&#25991;&#20214;&#26102;&#26597;&#26816;&#35821;&#27861;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; Tagbar &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#30456;&#23545; TagList &#33021;&#26356;&#22909;&#30340;&#25903;&#25345;&#38754;&#21521;&#23545;&#35937;&#10;&#10;&#34; &#24120;&#35268;&#27169;&#24335;&#19979;&#36755;&#20837; tb &#35843;&#29992;&#25554;&#20214;&#65292;&#22914;&#26524;&#26377;&#25171;&#24320; TagList &#31383;&#21475;&#21017;&#20808;&#23558;&#20854;&#20851;&#38381;&#10;nmap tb :TlistClose&#60;CR&#62;:TagbarToggle&#60;CR&#62;&#10;&#10;let g:tagbar_width=30                       &#34;&#35774;&#32622;&#31383;&#21475;&#23485;&#24230;&#10;&#34; let g:tagbar_left=1                         &#34;&#22312;&#24038;&#20391;&#31383;&#21475;&#20013;&#26174;&#31034;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; TagList &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#39640;&#25928;&#22320;&#27983;&#35272;&#28304;&#30721;, &#20854;&#21151;&#33021;&#23601;&#20687;vc&#20013;&#30340;workpace&#10;&#34; &#37027;&#37324;&#38754;&#21015;&#20986;&#20102;&#24403;&#21069;&#25991;&#20214;&#20013;&#30340;&#25152;&#26377;&#23439;,&#20840;&#23616;&#21464;&#37327;, &#20989;&#25968;&#21517;&#31561;&#10;&#10;&#34; &#24120;&#35268;&#27169;&#24335;&#19979;&#36755;&#20837; tl &#35843;&#29992;&#25554;&#20214;&#65292;&#22914;&#26524;&#26377;&#25171;&#24320; Tagbar &#31383;&#21475;&#21017;&#20808;&#23558;&#20854;&#20851;&#38381;&#10;nmap tl :TagbarClose&#60;CR&#62;:Tlist&#60;CR&#62;&#10;&#10;let Tlist_Show_One_File=1                   &#34;&#21482;&#26174;&#31034;&#24403;&#21069;&#25991;&#20214;&#30340;tags&#10;&#34; let Tlist_Enable_Fold_Column=0              &#34;&#20351;taglist&#25554;&#20214;&#19981;&#26174;&#31034;&#24038;&#36793;&#30340;&#25240;&#21472;&#34892;&#10;let Tlist_Exit_OnlyWindow=1                 &#34;&#22914;&#26524;Taglist&#31383;&#21475;&#26159;&#26368;&#21518;&#19968;&#20010;&#31383;&#21475;&#21017;&#36864;&#20986;Vim&#10;let Tlist_File_Fold_Auto_Close=1            &#34;&#33258;&#21160;&#25240;&#21472;&#10;let Tlist_WinWidth=30                       &#34;&#35774;&#32622;&#31383;&#21475;&#23485;&#24230;&#10;let Tlist_Use_Right_Window=1                &#34;&#22312;&#21491;&#20391;&#31383;&#21475;&#20013;&#26174;&#31034;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; txtbrowser &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#29992;&#20110;&#25991;&#26412;&#25991;&#20214;&#29983;&#25104;&#26631;&#31614;&#19982;&#19982;&#35821;&#27861;&#39640;&#20142;&#65288;&#35843;&#29992;TagList&#25554;&#20214;&#29983;&#25104;&#26631;&#31614;&#65292;&#22914;&#26524;&#21487;&#20197;&#65289;&#10;au BufRead,BufNewFile *.txt setlocal ft=txt&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; ZoomWin &#25554;&#20214;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#29992;&#20110;&#20998;&#21106;&#31383;&#21475;&#30340;&#26368;&#22823;&#21270;&#19982;&#36824;&#21407;&#10;&#34; &#24120;&#35268;&#27169;&#24335;&#19979;&#25353;&#24555;&#25463;&#38190; &#60;c-w&#62;o &#22312;&#26368;&#22823;&#21270;&#19982;&#36824;&#21407;&#38388;&#20999;&#25442;&#10;&#10;&#34; =============================================================================&#10;&#34;                          &#60;&#60; &#20197;&#19979;&#20026;&#24120;&#29992;&#24037;&#20855;&#37197;&#32622; &#62;&#62;&#10;&#34; =============================================================================&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; cscope &#24037;&#20855;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#29992;Cscope&#33258;&#24049;&#30340;&#35805;&#35828; - &#34;&#20320;&#21487;&#20197;&#25226;&#23427;&#24403;&#20570;&#26159;&#36229;&#36807;&#39057;&#30340;ctags&#34;&#10;if has(&#34;cscope&#34;)&#10;    &#34;&#35774;&#23450;&#21487;&#20197;&#20351;&#29992; quickfix &#31383;&#21475;&#26469;&#26597;&#30475; cscope &#32467;&#26524;&#10;    set cscopequickfix=s-,c-,d-,i-,t-,e-&#10;    &#34;&#20351;&#25903;&#25345;&#29992; Ctrl+]  &#21644; Ctrl+t &#24555;&#25463;&#38190;&#22312;&#20195;&#30721;&#38388;&#36339;&#36716;&#10;    set cscopetag&#10;    &#34;&#22914;&#26524;&#20320;&#24819;&#21453;&#21521;&#25628;&#32034;&#39034;&#24207;&#35774;&#32622;&#20026;1&#10;    set csto=0&#10;    &#34;&#22312;&#24403;&#21069;&#30446;&#24405;&#20013;&#28155;&#21152;&#20219;&#20309;&#25968;&#25454;&#24211;&#10;    if filereadable(&#34;cscope.out&#34;)&#10;        cs add cscope.out&#10;    &#34;&#21542;&#21017;&#28155;&#21152;&#25968;&#25454;&#24211;&#29615;&#22659;&#20013;&#25152;&#25351;&#20986;&#30340;&#10;    elseif $CSCOPE_DB != &#34;&#34;&#10;        cs add $CSCOPE_DB&#10;    endif&#10;    set cscopeverbose&#10;    &#34;&#24555;&#25463;&#38190;&#35774;&#32622;&#10;    nmap &#60;C-\&#62;s :cs find s &#60;C-R&#62;=expand(&#34;&#60;cword&#62;&#34;)&#60;CR&#62;&#60;CR&#62;&#10;    nmap &#60;C-\&#62;g :cs find g &#60;C-R&#62;=expand(&#34;&#60;cword&#62;&#34;)&#60;CR&#62;&#60;CR&#62;&#10;    nmap &#60;C-\&#62;c :cs find c &#60;C-R&#62;=expand(&#34;&#60;cword&#62;&#34;)&#60;CR&#62;&#60;CR&#62;&#10;    nmap &#60;C-\&#62;t :cs find t &#60;C-R&#62;=expand(&#34;&#60;cword&#62;&#34;)&#60;CR&#62;&#60;CR&#62;&#10;    nmap &#60;C-\&#62;e :cs find e &#60;C-R&#62;=expand(&#34;&#60;cword&#62;&#34;)&#60;CR&#62;&#60;CR&#62;&#10;    nmap &#60;C-\&#62;f :cs find f &#60;C-R&#62;=expand(&#34;&#60;cfile&#62;&#34;)&#60;CR&#62;&#60;CR&#62;&#10;    nmap &#60;C-\&#62;i :cs find i ^&#60;C-R&#62;=expand(&#34;&#60;cfile&#62;&#34;)&#60;CR&#62;$&#60;CR&#62;&#10;    nmap &#60;C-\&#62;d :cs find d &#60;C-R&#62;=expand(&#34;&#60;cword&#62;&#34;)&#60;CR&#62;&#60;CR&#62;&#10;endif&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; ctags &#24037;&#20855;&#37197;&#32622; &#62;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#23545;&#27983;&#35272;&#20195;&#30721;&#38750;&#24120;&#30340;&#26041;&#20415;,&#21487;&#20197;&#22312;&#20989;&#25968;,&#21464;&#37327;&#20043;&#38388;&#36339;&#36716;&#31561;&#10;set tags=./tags;                            &#34;&#21521;&#19978;&#32423;&#30446;&#24405;&#36882;&#24402;&#26597;&#25214;tags&#25991;&#20214;&#65288;&#22909;&#20687;&#21482;&#26377;&#22312;Windows&#19979;&#25165;&#26377;&#29992;&#65289;&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; gvimfullscreen &#24037;&#20855;&#37197;&#32622; &#62; &#35831;&#30830;&#20445;&#24050;&#23433;&#35013;&#20102;&#24037;&#20855;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#29992;&#20110; Windows Gvim &#20840;&#23631;&#31383;&#21475;&#65292;&#21487;&#29992; F11 &#20999;&#25442;&#10;&#34; &#20840;&#23631;&#21518;&#20877;&#38544;&#34255;&#33756;&#21333;&#26639;&#12289;&#24037;&#20855;&#26639;&#12289;&#28378;&#21160;&#26465;&#25928;&#26524;&#26356;&#22909;&#10;if (g:iswindows &#38;&#38; g:isGUI)&#10;    nmap &#60;F11&#62; &#60;Esc&#62;:call libcallnr(&#34;gvimfullscreen.dll&#34;, &#34;ToggleFullScreen&#34;, 0)&#60;CR&#62;&#10;endif&#10;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34;  &#60; vimtweak &#24037;&#20855;&#37197;&#32622; &#62; &#35831;&#30830;&#20445;&#20197;&#24050;&#35013;&#20102;&#24037;&#20855;&#10;&#34; -----------------------------------------------------------------------------&#10;&#34; &#36825;&#37324;&#21482;&#29992;&#20110;&#31383;&#21475;&#36879;&#26126;&#19982;&#32622;&#39030;&#10;&#34; &#24120;&#35268;&#27169;&#24335;&#19979; Ctrl + Up&#65288;&#19978;&#26041;&#21521;&#38190;&#65289; &#22686;&#21152;&#19981;&#36879;&#26126;&#24230;&#65292;Ctrl + Down&#65288;&#19979;&#26041;&#21521;&#38190;&#65289; &#20943;&#23569;&#19981;&#36879;&#26126;&#24230;&#65292;&#60;Leader&#62;t &#31383;&#21475;&#32622;&#39030;&#19982;&#21542;&#20999;&#25442;&#10;if (g:iswindows &#38;&#38; g:isGUI)&#10;    let g:Current_Alpha = 255&#10;    let g:Top_Most = 0&#10;    func! Alpha_add()&#10;        let g:Current_Alpha = g:Current_Alpha + 10&#10;        if g:Current_Alpha &#62; 255&#10;            let g:Current_Alpha = 255&#10;        endif&#10;        call libcallnr(&#34;vimtweak.dll&#34;,&#34;SetAlpha&#34;,g:Current_Alpha)&#10;    endfunc&#10;    func! Alpha_sub()&#10;        let g:Current_Alpha = g:Current_Alpha - 10&#10;        if g:Current_Alpha &#60; 155&#10;            let g:Current_Alpha = 155&#10;        endif&#10;        call libcallnr(&#34;vimtweak.dll&#34;,&#34;SetAlpha&#34;,g:Current_Alpha)&#10;    endfunc&#10;    func! Top_window()&#10;        if  g:Top_Most == 0&#10;            call libcallnr(&#34;vimtweak.dll&#34;,&#34;EnableTopMost&#34;,1)&#10;            let g:Top_Most = 1&#10;        else&#10;            call libcallnr(&#34;vimtweak.dll&#34;,&#34;EnableTopMost&#34;,0)&#10;            let g:Top_Most = 0&#10;        endif&#10;    endfunc&#10;&#10;    &#34;&#24555;&#25463;&#38190;&#35774;&#32622;&#10;    nmap &#60;c-up&#62; :call Alpha_add()&#60;CR&#62;&#10;    nmap &#60;c-down&#62; :call Alpha_sub()&#60;CR&#62;&#10;    nmap &#60;leader&#62;t :call Top_window()&#60;CR&#62;&#10;endif&#10;&#10;&#34; =============================================================================&#10;&#34;                          &#60;&#60; &#20197;&#19979;&#20026;&#24120;&#29992;&#33258;&#21160;&#21629;&#20196;&#37197;&#32622; &#62;&#62;&#10;&#34; =============================================================================&#10;&#10;&#34; &#33258;&#21160;&#20999;&#25442;&#30446;&#24405;&#20026;&#24403;&#21069;&#32534;&#36753;&#25991;&#20214;&#25152;&#22312;&#30446;&#24405;&#10;au BufRead,BufNewFile,BufEnter * cd %:p:h&#10;&#10;&#34; =============================================================================&#10;&#34;                     &#60;&#60; windows &#19979;&#35299;&#20915; Quickfix &#20081;&#30721;&#38382;&#39064; &#62;&#62;&#10;&#34; =============================================================================&#10;&#34; windows &#40664;&#35748;&#32534;&#30721;&#20026; cp936&#65292;&#32780; Gvim(Vim) &#20869;&#37096;&#32534;&#30721;&#20026; utf-8&#65292;&#25152;&#20197;&#24120;&#24120;&#36755;&#20986;&#20026;&#20081;&#30721;&#10;&#34; &#20197;&#19979;&#20195;&#30721;&#21487;&#20197;&#23558;&#32534;&#30721;&#20026; cp936 &#30340;&#36755;&#20986;&#20449;&#24687;&#36716;&#25442;&#20026; utf-8 &#32534;&#30721;&#65292;&#20197;&#35299;&#20915;&#36755;&#20986;&#20081;&#30721;&#38382;&#39064;&#10;&#34; &#20294;&#22909;&#20687;&#21482;&#23545;&#36755;&#20986;&#20449;&#24687;&#20840;&#37096;&#20026;&#20013;&#25991;&#25165;&#26377;&#28385;&#24847;&#30340;&#25928;&#26524;&#65292;&#22914;&#26524;&#36755;&#20986;&#20449;&#24687;&#26159;&#20013;&#33521;&#28151;&#21512;&#30340;&#65292;&#37027;&#21487;&#33021;&#10;&#34; &#19981;&#25104;&#21151;&#65292;&#20250;&#36896;&#25104;&#20854;&#20013;&#19968;&#31181;&#35821;&#35328;&#20081;&#30721;&#65292;&#36755;&#20986;&#20449;&#24687;&#20840;&#37096;&#20026;&#33521;&#25991;&#30340;&#22909;&#20687;&#19981;&#20250;&#20081;&#30721;&#10;&#34; &#22914;&#26524;&#36755;&#20986;&#20449;&#24687;&#20026;&#20081;&#30721;&#30340;&#21487;&#20197;&#35797;&#19968;&#19979;&#19979;&#38754;&#30340;&#20195;&#30721;&#65292;&#22914;&#26524;&#19981;&#34892;&#23601;&#36824;&#26159;&#32473;&#23427;&#27880;&#37322;&#25481;&#10;&#10;&#34; if g:iswindows&#10;&#34;     function QfMakeConv()&#10;&#34;         let qflist = getqflist()&#10;&#34;         for i in qflist&#10;&#34;            let i.text = iconv(i.text, &#34;cp936&#34;, &#34;utf-8&#34;)&#10;&#34;         endfor&#10;&#34;         call setqflist(qflist)&#10;&#34;      endfunction&#10;&#34;      au QuickfixCmdPost make call QfMakeConv()&#10;&#34; endif&#10;&#10;&#34; =============================================================================&#10;&#34;                          &#60;&#60; &#20854;&#23427; &#62;&#62;&#10;&#34; =============================================================================&#10;&#34; &#27880;&#65306;&#19978;&#38754;&#37197;&#32622;&#20013;&#30340;&#34;&#60;Leader&#62;&#34;&#22312;&#26412;&#36719;&#20214;&#20013;&#35774;&#32622;&#20026;&#34;\&#34;&#38190;&#65288;&#24341;&#21495;&#37324;&#30340;&#21453;&#26012;&#26464;&#65289;&#65292;&#22914;&#60;Leader&#62;t&#10;&#34; &#25351;&#22312;&#24120;&#35268;&#27169;&#24335;&#19979;&#25353;&#34;\&#34;&#38190;&#21152;&#34;t&#34;&#38190;&#65292;&#36825;&#37324;&#19981;&#26159;&#21516;&#26102;&#25353;&#65292;&#32780;&#26159;&#20808;&#25353;&#34;\&#34;&#38190;&#21518;&#25353;&#34;t&#34;&#38190;&#65292;&#38388;&#38548;&#22312;&#19968;&#10;&#34; &#31186;&#20869;&#65292;&#32780;&#60;Leader&#62;cs&#26159;&#20808;&#25353;&#34;\&#34;&#38190;&#20877;&#25353;&#34;c&#34;&#21448;&#20877;&#25353;&#34;s&#34;&#38190;&#65307;&#22914;&#35201;&#20462;&#25913;&#34;&#60;leader&#62;&#34;&#38190;&#65292;&#21487;&#20197;&#25226;&#10;&#34; &#19979;&#38754;&#30340;&#35774;&#32622;&#21462;&#28040;&#27880;&#37322;&#65292;&#24182;&#20462;&#25913;&#21452;&#24341;&#21495;&#20013;&#30340;&#38190;&#20026;&#20320;&#24819;&#35201;&#30340;&#65292;&#22914;&#20462;&#25913;&#20026;&#36887;&#21495;&#38190;&#12290;&#10;&#10;&#34; let mapleader = &#34;,&#34;&#10;&#10;&#34; ============================================================================&#10;&#34;                              F4&#28155;&#21152;&#20316;&#32773;&#20449;&#24687;&#37197;&#32622;&#10;&#34; ============================================================================&#10;&#34;&#28155;&#21152;&#20316;&#32773;&#20449;&#24687;&#10;map &#60;F4&#62; :call TitleDet()&#60;cr&#62;&#39;s&#10;function AddTitle()&#10;    call append(0,&#34;/*============================================================================&#34;)&#10;    call append(1,&#34;* Author        : ZhangYouzhi&#34;)&#10;    call append(2,&#34;* Mail          : zhangyouzhi@live.com&#34;)&#10;    call append(3,&#34;* Last modified : &#34;.strftime(&#34;%Y-%m-%d %H:%M&#34;))&#10;    call append(4,&#34;* Filename      : &#34;.expand(&#34;%:t&#34;))&#10;    call append(5,&#34;* Description   :&#34;)&#10;    call append(6,&#34;*&#34;)&#10;    call append(7,&#34;=============================================================================*/&#34;)&#10;    echohl WarningMsg | echo &#34;Successful in adding the copyright.&#34; | echohl None&#10;endf&#10;&#34;&#26356;&#26032;&#26368;&#36817;&#20462;&#25913;&#26102;&#38388;&#21644;&#25991;&#20214;&#21517;&#10;function UpdateTitle()&#10;    normal m&#39;&#10;   &#34;&#34; execute &#39;/* Last modified:/s@:.*$@\=strftime(&#34;:\t%Y-%m-%d %H:%M&#34;)@&#39;&#10;    execute &#39;/* Last modified :/s@:.*$@\=strftime(&#34;: %Y-%m-%d %H:%M&#34;)@&#39;&#10;    normal &#39;&#39;&#10;    normal mk&#10;    execute &#39;/* Filename      :/s@:.*$@\=&#34;: &#34;.expand(&#34;%:t&#34;)@&#39;&#10;    execute &#34;noh&#34;&#10;    normal &#39;k&#10;    echohl WarningMsg | echo &#34;Successful in updating the copy right.&#34; | echohl None&#10;endfunction&#10;&#34;&#21028;&#26029;&#21069;10&#34892;&#20195;&#30721;&#37324;&#38754;&#65292;&#26159;&#21542;&#26377;Last modified&#36825;&#20010;&#21333;&#35789;&#65292;&#10;&#34;&#22914;&#26524;&#27809;&#26377;&#30340;&#35805;&#65292;&#20195;&#34920;&#27809;&#26377;&#28155;&#21152;&#36807;&#20316;&#32773;&#20449;&#24687;&#65292;&#38656;&#35201;&#26032;&#28155;&#21152;&#65307;&#10;&#34;&#22914;&#26524;&#26377;&#30340;&#35805;&#65292;&#37027;&#20040;&#21482;&#38656;&#35201;&#26356;&#26032;&#21363;&#21487;&#10;function TitleDet()&#10;    let n=1&#10;    &#34;&#40664;&#35748;&#20026;&#28155;&#21152;&#10;    while n &#60; 8&#10;        let line = getline(n)&#10;        if line =~ &#39;^\*\s*\S*Last\smodified :\S*.*$&#39;&#10;            call UpdateTitle()&#10;            return&#10;        endif&#10;        let n = n + 1&#10;    endwhile&#10;    call AddTitle()&#10;endfunction</span><br></pre></td></tr></table></figure></p>
<p>透明效果，呵呵。</p>
<p><img src="http://ww3.sinaimg.cn/mw690/6ba3371bjw1ep6p5agssnj20ps0ayq5z.jpg" alt=""></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/02/12/CentOS-create-FTP-login-user/" itemprop="url">
                  CentOS下创建FTP登录用户
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-02-12T12:58:58+08:00" content="2015-02-12">
              2015-02-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h3 id="1-__u91CD_u542F/_u5173_u95ED_vsftpd__u670D_u52A1_u5668"><a href="#1-__u91CD_u542F/_u5173_u95ED_vsftpd__u670D_u52A1_u5668" class="headerlink" title="1. 重启/关闭 vsftpd 服务器"></a>1. 重启/关闭 vsftpd 服务器</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ftp]# service vsftpd restart &#10;&#10;Shutting down vsftpd: [ OK ] &#10;&#10;Starting vsftpd for vsftpd: [ OK ]</span><br></pre></td></tr></table></figure>
<p>OK表示重启成功了。<br>启动和关闭分别把restart改为start/stop即可.<br>如果是源码安装的,到安装文件夹下找到start.sh和shutdown.sh文件,执行它们就可以了。</p>
<h3 id="2-__u4E0Evsftpd_u670D_u52A1_u5668_u6709_u5173_u7684_u6587_u4EF6_u548C_u6587_u4EF6_u5939"><a href="#2-__u4E0Evsftpd_u670D_u52A1_u5668_u6709_u5173_u7684_u6587_u4EF6_u548C_u6587_u4EF6_u5939" class="headerlink" title="2. 与vsftpd服务器有关的文件和文件夹"></a>2. 与vsftpd服务器有关的文件和文件夹</h3><p>vsftpd服务器的配置文件的是: /etc/vsftpd/vsftpd.conf vsftpd服务器的根目录,即FTP服务器的主目录: 在/var/ftp处pub处。<br>如果你想修改服务器目录的路径,那么你只要修改/var/ftp到别处就行了。</p>
<h3 id="3-__u6DFB_u52A0FTP_u672C_u5730_u7528_u6237"><a href="#3-__u6DFB_u52A0FTP_u672C_u5730_u7528_u6237" class="headerlink" title="3. 添加FTP本地用户"></a>3. 添加FTP本地用户</h3><p>有的FTP服务器需要用户名和密码才能登录,就是因为设置了FTP用户和权限.<br>FTP用户一般是不能登录系统的,只能进入FTP服务器自己的目录中,这是为了安全.这样的用户就叫做虚拟用户了.实际上并不是真正的虚拟用户,只是不能登录SHELL了而已,没能力登录系统.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/sbin/adduser -d /var/test_ftp -g ftp -s /sbin/nologin testftp</span><br></pre></td></tr></table></figure>
<p>这个命令的意思是:<br>使用命令(adduser)添加test用户,不能登录系统(-s /sbin/nologin),自己的文件夹在(-d /opt/test_ftp)),属于组ftp(-g ftp)。<br>然后你需要为它设置密码：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd testftp&#10;``` &#160;&#10;&#36825;&#26679;&#23601;&#28155;&#21152;&#20102;&#19968;&#20010;FTP&#29992;&#25143;&#20102;.&#19979;&#38754;&#30340;&#31034;&#20363;&#21487;&#20197;&#24110;&#21161;&#20320;&#36827;&#20837;FTP&#26381;&#21153;&#22120;&#20102;&#12290;&#10;```&#123;bash&#125;&#10;[root@localhost&#160;ftp]#&#160;ftp&#160;&#10;ftp&#62;&#160;open&#160;192.168.0.33&#160;&#10;Connected&#160;to&#160;192.168.0.33&#160;(192.168.0.33).&#160;&#10;220&#160;(vsFTPd&#160;2.0.5)&#160;&#10;Name&#160;(192.168.0.33:gxl):&#160;test&#160;&#10;331&#160;Please&#160;specify&#160;the&#160;password.&#160;&#10;Password:&#160;&#10;230&#160;Login&#160;successful.&#160;&#10;Remote&#160;system&#160;type&#160;is&#160;UNIX.&#160;&#10;Using&#160;binary&#160;mode&#160;to&#160;transfer&#160;files.&#160;&#10;ftp&#62;&#160;quit&#160;&#10;221&#160;Goodbye.</span><br></pre></td></tr></table></figure></p>
<p>在windows中,只要在浏览器中输入 [url=ftp://192.168.0.33]ftp://192.168.0.33[/url] 进入FTP服务器,然后 右键 登录,输入用户名和密码就可以登录自己的目录了.<br>当然你要保证自己能读写自己的目录,就要在配置文件vsftpd.conf里设置一下就可以读写了.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">local_enable=yes&#160;&#10;write_enable=yes&#160;&#10;local_umask=022</span><br></pre></td></tr></table></figure></p>
<h3 id="4-__u533F_u540D_u4E0A_u4F20_u4E0B_u8F7D"><a href="#4-__u533F_u540D_u4E0A_u4F20_u4E0B_u8F7D" class="headerlink" title="4. 匿名上传下载"></a>4. 匿名上传下载</h3><p>修改配置文件即可vsftpd.conf,确定有以下几行,没有自己添加进去就可以了.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anonymous_enable=yes&#160;&#160;&#160;&#160;&#160;&#160;&#36825;&#37324;&#22914;&#26524;&#25913;&#25104;NO&#65292;&#23601;&#34920;&#31034;&#19981;&#20801;&#35768;&#21311;&#21517;&#29992;&#25143;&#30331;&#38470;&#10;```&#160;&#10;&#35760;&#20303;&#20462;&#25913;&#23436;&#37197;&#32622;&#25991;&#20214;&#35201;&#37325;&#21551;&#26381;&#21153;&#10;```&#123;bash&#125;&#160;&#160;&#10;anon_upload_enable=yes&#160;&#10;anon_mkdir_write_enable=yes&#160;&#10;anon_umask=022&#10;```&#160;&#10;&#28982;&#21518;&#20320;&#21487;&#20197;&#26032;&#24314;&#19968;&#20010;&#25991;&#20214;&#22841;,&#20462;&#25913;&#23427;&#30340;&#26435;&#38480;&#20026;&#23436;&#20840;&#24320;&#25918;,&#20219;&#20309;&#29992;&#25143;&#23601;&#21487;&#20197;&#30331;&#24405;&#36825;&#20010;&#25991;&#20214;&#22841;,&#24182;&#19978;&#20256;&#19979;&#36733;&#25991;&#20214;:&#160;&#10;```&#123;bash&#125;&#10;mkdir&#160;/var/ftp/guest&#160;&#10;chmod&#160;777&#160;/var/ftp/guest</span><br></pre></td></tr></table></figure></p>
<h3 id="5-__u5B9A_u5236_u8FDB_u5165FTP_u670D_u52A1_u5668_u7684_u6B22_u8FCE_u4FE1_u606F"><a href="#5-__u5B9A_u5236_u8FDB_u5165FTP_u670D_u52A1_u5668_u7684_u6B22_u8FCE_u4FE1_u606F" class="headerlink" title="5. 定制进入FTP服务器的欢迎信息"></a>5. 定制进入FTP服务器的欢迎信息</h3><p>在vsftpd.conf文件中设置:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirmessage_enable=yes</span><br></pre></td></tr></table></figure></p>
<p>然后进入用户目录建立一个.message文件,输入欢迎信息即可(我这里写入的是Welcome to gxlinux’s FTP!):<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost&#160;test_ftp]#&#160;ftp&#160;192.168.0.33&#160;&#10;Connected&#160;to&#160;192.168.0.33&#160;(192.168.0.33).&#160;&#10;220&#160;(vsFTPd&#160;2.0.5)&#160;&#10;Name&#160;(192.168.0.33:gxl):&#160;test&#160;&#10;331&#160;Please&#160;specify&#160;the&#160;password.&#160;&#10;Password:&#160;&#10;230-Welcome&#160;to&#160;gxlinux&#39;s&#160;FTP!&#160;&#10;230&#160;Login&#160;successful.&#160;&#10;Remote&#160;system&#160;type&#160;is&#160;UNIX.&#160;&#10;Using&#160;binary&#160;mode&#160;to&#160;transfer&#160;files.</span><br></pre></td></tr></table></figure></p>
<h3 id="6-__u5B9E_u73B0_u865A_u62DF_u8DEF_u5F84"><a href="#6-__u5B9E_u73B0_u865A_u62DF_u8DEF_u5F84" class="headerlink" title="6. 实现虚拟路径"></a>6. 实现虚拟路径</h3><p>将某个目录挂载到FTP服务器下供用户使用,这就叫做虚拟路径.<br>比如将gxl用户的目录挂载到FTP服务器中,供FTP服务器的用户使用,使用如下命令即可:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost&#160;opt]#&#160;mount&#160;--bind&#160;/home/gxl&#160;/var/ftp/pub&#160;#&#20351;&#29992;&#25346;&#36733;&#21629;&#20196;&#160;&#10;[root@localhost&#160;opt]#&#160;ls&#160;/var/ftp/pub&#160;&#10;LumaQQ&#160;Screenshot.png&#160;&#26700;&#38754;</span><br></pre></td></tr></table></figure></p>
<h3 id="7-__u6253_u5F00vsFTPd_u7684_u65E5_u5FD7_u529F_u80FD"><a href="#7-__u6253_u5F00vsFTPd_u7684_u65E5_u5FD7_u529F_u80FD" class="headerlink" title="7. 打开vsFTPd的日志功能"></a>7. 打开vsFTPd的日志功能</h3><p>添加下面一行到vsftpd.conf文件中,一般情况下该文件中有这一行,只要把前面的注释符号#去掉即可,没有的话就添加,或者修改:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xferlog_file=/var/log/vsftpd.log</span><br></pre></td></tr></table></figure></p>
<h3 id="8-__u9650_u5236_u94FE_u63A5_u6570_2C_u4EE5_u53CA_u6BCF_u4E2AIP_u6700_u5927_u7684_u94FE_u63A5_u6570"><a href="#8-__u9650_u5236_u94FE_u63A5_u6570_2C_u4EE5_u53CA_u6BCF_u4E2AIP_u6700_u5927_u7684_u94FE_u63A5_u6570" class="headerlink" title="8. 限制链接数,以及每个IP最大的链接数"></a>8. 限制链接数,以及每个IP最大的链接数</h3><p>修改配置文件中,例如vsftp最大支持链接数100个,每个IP能支持5个链接:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">max_client=100&#160;&#10;max_per=5</span><br></pre></td></tr></table></figure></p>
<h3 id="9-__u9650_u5236_u4F20_u8F93_u901F_u5EA6"><a href="#9-__u9650_u5236_u4F20_u8F93_u901F_u5EA6" class="headerlink" title="9. 限制传输速度"></a>9. 限制传输速度</h3><p>修改配置文件中,例如让匿名用户和vsftd上的用户(即虚拟用户)都以80KB=1024*80=81920的速度下载<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anon_max_rate=81920&#160;&#10;local_max_rate=81920</span><br></pre></td></tr></table></figure></p>
<h3 id="10-__u5C06_u7528_u6237_28_u4E00_u822C_u6307_u865A_u62DF_u7528_u6237_29_u9650_u5236_u5728_u81EA_u5BB6_u76EE_u5F55"><a href="#10-__u5C06_u7528_u6237_28_u4E00_u822C_u6307_u865A_u62DF_u7528_u6237_29_u9650_u5236_u5728_u81EA_u5BB6_u76EE_u5F55" class="headerlink" title="10. 将用户(一般指虚拟用户)限制在自家目录"></a>10. 将用户(一般指虚拟用户)限制在自家目录</h3><p>修改配置文件中,这样用户就只能访问自己家的目录了:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chroot_local_user=yes&#10;```&#160;&#10;&#22914;&#26524;&#21482;&#24819;&#26576;&#20123;&#29992;&#25143;&#20165;&#33021;&#35775;&#38382;&#33258;&#24049;&#30340;&#30446;&#24405;,&#20854;&#23427;&#29992;&#25143;&#19981;&#20570;&#36825;&#20010;&#38480;&#21046;,&#37027;&#20040;&#23601;&#38656;&#35201;&#22312;chroot_list&#25991;&#20214;(&#27492;&#25991;&#20214;&#19968;&#33324;&#26159;&#22312;/etc/vsftpd/&#20013;)&#20013;&#28155;&#21152;&#27492;&#29992;&#25143;.&#160;&#10;&#32534;&#36753;&#27492;&#25991;&#20214;,&#27604;&#22914;&#23558;test&#29992;&#25143;&#28155;&#21152;&#21040;&#27492;&#25991;&#20214;&#20013;,&#37027;&#20040;&#23558;&#20854;&#20889;&#20837;&#21363;&#21487;.&#19968;&#33324;&#30340;&#35805;,&#19968;&#20010;&#29992;&#25143;&#21344;&#19968;&#34892;&#10;```&#123;bash&#125;&#10;[root@localhost&#160;vsftpd]#&#160;cat&#160;chroot_list&#160;&#10;test</span><br></pre></td></tr></table></figure></p>
<h3 id="11-__u7ED1_u5B9A_u67D0_u4E2AIP_u5230vsFTPd"><a href="#11-__u7ED1_u5B9A_u67D0_u4E2AIP_u5230vsFTPd" class="headerlink" title="11. 绑定某个IP到vsFTPd"></a>11. 绑定某个IP到vsFTPd</h3><p>有时候要限制某些IP访问服务器,只允许某些IP访问,例如只允许192.168.0.33访问这个FTP,同样修改配置文件:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">listen_address=192.168.0.33&#160;&#37197;&#32622;vsftpd.conf&#10;anonymous_enable=NO&#160;#&#31105;&#27490;&#21311;&#21517;&#160;local_enable=YES&#160;#&#20801;&#35768;&#26412;&#22320;&#30331;&#24405;&#160;&#10;write_enable=YES&#160;#&#20801;&#35768;&#20889;&#65292;&#22914;&#38656;&#19978;&#20256;&#65292;&#21017;&#24517;&#39035;&#160;&#10;local_umask=027&#160;#&#23558;&#19978;&#20256;&#25991;&#20214;&#30340;&#26435;&#38480;&#35774;&#32622;&#20026;&#65306;777-local_umask&#160;anon_upload_enable=YES&#160;#&#20801;&#35768;&#34394;&#25311;&#29992;&#25143;&#21644;&#21311;&#21517;&#29992;&#25143;&#19978;&#20256;&#160;&#10;anon_other_write_enable=YES&#160;#&#20801;&#35768;&#34394;&#25311;&#29992;&#25143;&#21644;&#21311;&#21517;&#29992;&#25143;&#20462;&#25913;&#25991;&#20214;&#21517;&#21644;&#21024;&#38500;&#25991;&#20214;&#160;dirmessage_enable=YES&#160;&#160;&#10;xferlog_enable=YES&#160;#&#25171;&#24320;&#26085;&#24535;&#35760;&#24405;&#160;&#10;connect_from_port_20=YES&#160;&#10;xferlog_file=/var/log/vsftpd.log&#160;#&#26085;&#24535;&#23384;&#25918;&#20301;&#32622;&#160;&#10;xferlog_std_format=YES&#160;#&#26631;&#20934;&#26085;&#24535;&#26684;&#24335;&#160;&#10;idle_session_timeout=600&#160;#&#31354;&#38386;&#36830;&#25509;&#36229;&#26102;&#160;&#10;data_connection_timeout=120&#160;&#10;ftpd_banner=Welcome&#160;to&#160;ChinaRise&#160;FTP&#160;service&#160;#&#27426;&#36814;&#20449;&#24687;&#160;&#10;guest_enable=yes&#160;#&#20801;&#35768;&#34394;&#25311;&#29992;&#25143;&#160;&#10;guest_username=vsftpdguest&#160;#&#34394;&#25311;&#29992;&#25143;&#20351;&#29992;&#30340;&#31995;&#32479;&#36134;&#21495;&#160;&#10;virtual_use_local_privs=YES&#160;#&#34394;&#25311;&#29992;&#25143;&#25317;&#26377;&#26412;&#22320;&#31995;&#32479;&#26435;&#38480;&#160;&#10;chroot_local_user=NO&#160;&#160;chroot_list_enable=YES&#160;&#10;#&#20197;&#19978;&#20004;&#34892;&#23558;&#34394;&#25311;&#29992;&#25143;&#38480;&#21046;&#22312;&#20854;&#30446;&#24405;&#19979;&#65292;&#19981;&#33021;&#35775;&#38382;&#20854;&#20182;&#30446;&#24405;&#65292;&#25110;&#32773;&#30452;&#25509;&#29992;&#160;&#160;&#10;chroot_local_user=YES&#160;&#160;listen=yes&#160;#&#30417;&#21548;/&#34987;&#21160;&#27169;&#24335;&#160;listen_port=21&#160;#&#30417;&#21548;&#31471;&#21475;&#160;&#10;chroot_list_file=/etc/vsftpd/vsftpd.chroot_list&#160;#&#34394;&#25311;&#29992;&#25143;&#21517;&#21333;&#20445;&#23384;&#22312;&#25991;&#20214;&#10;/etc/vsftpd/vsftpd.chroot_list&#160;&#20013;&#160;&#10;user_config_dir=/etc/vsftpd/vsftpd_user_conf&#160;#&#27599;&#20010;&#34394;&#25311;&#29992;&#25143;&#21517;&#30340;&#26356;&#21152;&#35814;&#32454;&#30340;&#22521;&#26893;&#20445;&#23384;&#22312;/etc/vsftpd/vsftpd_user_conf&#160;&#20013;</span><br></pre></td></tr></table></figure></p>
<p>虚拟用户其他设置<br>在/etc/vsftpd/vsftpd.chroot_list 文件中写入允许登陆的虚拟用户名称，每行一个 在/etc/vsftpd/vsftpd_user_conf 文件夹中创建一个以虚拟用户用户名命名的文件， 写入：local_root = /var/FTP/子目录名 然后在/var/FTP下创建一个对应的目录即可。</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    

  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



        </div>

        


        

      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="http://ww3.sinaimg.cn/mw690/6ba3371bgw1ei1yg6iujij209l09rwg2.jpg" alt="ZhangYouzhi" itemprop="image"/>
          <p class="site-author-name" itemprop="name">ZhangYouzhi</p>
        </div>
        <p class="site-description motion-element" itemprop="description">Where there is a will, there is a way!</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">59</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">3</span>
              <span class="site-state-item-name">分类</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">36</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2015</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhangYouzhi</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    
    

  


  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  

  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  

  
  

</body>
</html>
