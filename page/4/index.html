<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description" content="Where there is a will, there is a way!">
<meta property="og:type" content="website">
<meta property="og:title" content="ZhangYouzhi's Blog">
<meta property="og:url" content="http://zhangyouzhi.com/page/4/index.html">
<meta property="og:site_name" content="ZhangYouzhi's Blog">
<meta property="og:description" content="Where there is a will, there is a way!">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZhangYouzhi's Blog">
<meta name="twitter:description" content="Where there is a will, there is a way!">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post',
    motion: true
  };
</script>

  <title> ZhangYouzhi's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">ZhangYouzhi's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
  <section id="posts" class="posts-expand">

    

    
    

    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/01/01/Happy-Wedding/" itemprop="url">
                  Happy Wedding
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-01-01T18:18:18+08:00" content="2015-01-01">
              2015-01-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/音十文集/" itemprop="url" rel="index">
                    <span itemprop="name">音十文集</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>2015年1月1日，新年第一天，天气晴好，万里无云。怀着无比激动的心情，迎着新年第一缕温暖的阳光，去迎娶了我这一生的最爱-我的老婆。</p>
<p><img src="http://ww2.sinaimg.cn/mw690/6ba3371bgw1eo39u93xu8j20qn0hsdii.jpg" alt="Happy Wedding"></p>
<p><img src="http://ww1.sinaimg.cn/mw690/6ba3371bgw1eo23mkabjwj21kw2dbb29.jpg" alt="Happy Wedding"></p>
<p><img src="http://ww1.sinaimg.cn/mw690/6ba3371bjw1eo39vyzsv0j20qn0hsdhg.jpg" alt="Happy Wedding"></p>
<p><img src="http://ww3.sinaimg.cn/mw690/6ba3371bgw1eo39u9q4f8j20hs0qnabb.jpg" alt="美丽老婆"></p>
<p><img src="http://ww1.sinaimg.cn/mw690/6ba3371bgw1eo3am2n2onj20qn0hsq3x.jpg" alt="Me"></p>
<p><img src="http://ww3.sinaimg.cn/mw1024/6ba3371bjw1eo23268z80j21hs200e81.jpg" alt="可爱侄子-小睿睿"></p>
<p><img src="http://ww2.sinaimg.cn/mw690/6ba3371bgw1eo39k2fgjqj20jz0zktba.jpg" alt="可爱外甥女-豆豆"></p>
<p><img src="http://ww4.sinaimg.cn/mw1024/6ba3371bgw1enrqr6t9dyj20lg0daq39.jpg" alt="Wedding Cake"></p>
<ul>
<li>Happy Wedding Love：<a href="http://121.41.101.123:88/love/" target="_blank" rel="external">Happy Wedding Love</a> </li>
<li>Happy Wedding Cake：<a href="http://121.41.101.123:88/wedding-cake/" target="_blank" rel="external">Happy Wedding Cake</a></li>
</ul>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/31/CentOS-install-php/" itemprop="url">
                  CentOS 安装 PHP
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-31T10:18:58+08:00" content="2014-12-31">
              2014-12-31
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h3 id="u4E00_u3001_u5B89_u88C5Apache"><a href="#u4E00_u3001_u5B89_u88C5Apache" class="headerlink" title="一、安装Apache"></a>一、安装Apache</h3><p><a href="http://zhangyouzhi.com/2014/12/30/CentOS-Install-Apache/">Apache 安装</a></p>
<h3 id="u4E8C_u3001_u68C0_u67E5php_u73AF_u5883_2C_u5EFA_u8BAE_u4F7F_u7528php5-3_u3010_u542B_u3011__u4EE5_u4E0A_u7248_u672C"><a href="#u4E8C_u3001_u68C0_u67E5php_u73AF_u5883_2C_u5EFA_u8BAE_u4F7F_u7528php5-3_u3010_u542B_u3011__u4EE5_u4E0A_u7248_u672C" class="headerlink" title="二、检查php环境,建议使用php5.3【含】 以上版本"></a>二、检查php环境,建议使用php5.3【含】 以上版本</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23jffs85aZ /]# rmp -qa | grep php</span><br></pre></td></tr></table></figure>
<p>没有php环境时提示如下：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23jffs85aZ /]# rmp -qa | grep php&#10;bash: rmp: command not found&#10;[root@iZ23jffs85aZ /]#</span><br></pre></td></tr></table></figure></p>
<h3 id="u4E09_u3001_u5B89_u88C5PHP"><a href="#u4E09_u3001_u5B89_u88C5PHP" class="headerlink" title="三、安装PHP"></a>三、安装PHP</h3><p>按以下步骤安装：<br>3.1 使用yum命令安装PHP<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23jffs85aZ /]# yum install php</span><br></pre></td></tr></table></figure></p>
<p>3.2 重启Apache服务器</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23jffs85aZ /]# /etc/init.d/httpd restart&#10;Stopping httpd:                                            [  OK  ]&#10;Starting httpd:                                            [  OK  ]&#10;[root@iZ23jffs85aZ /]#</span><br></pre></td></tr></table></figure>
<p>3.3 安装相关模块使用PHP支持MySQL：为了让PHP支持MySQL，我们可以安装php-mysql软件包；也可使用以下命令搜索可用的php模块<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23jffs85aZ /]# yum search php</span><br></pre></td></tr></table></figure></p>
<p>选择需要的模块进行安装<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23jffs85aZ /]# yum install php-mysql php-gd libjpeg* php-imap php-ldap php-odbc php-pear php-xml php-xm lrpc php-mbstring php-mcrypt php-bcmath php-mhash libmcrypt</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23jffs85aZ /]# yum install php-devel php-common php-cli</span><br></pre></td></tr></table></figure>
<p>默认安装的php的so模块功能加载会存放在/usr/lib64/php/modules/,默认安装的php.ini文件会存放在/etc/目录下，默认也会存放的apache的配置文件存放在/etc/httpd/conf目录下。</p>
<h3 id="u56DB_u3001_u91CD_u542FApache"><a href="#u56DB_u3001_u91CD_u542FApache" class="headerlink" title="四、重启Apache"></a>四、重启Apache</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23jffs85aZ /]# /etc/init.d/httpd restart&#10;Stopping httpd:                                            [  OK  ]&#10;Starting httpd:                                            [  OK  ]&#10;[root@iZ23jffs85aZ /]#</span><br></pre></td></tr></table></figure>
<h3 id="u4E94_u3001_u6D4B_u8BD5PHP"><a href="#u4E94_u3001_u6D4B_u8BD5PHP" class="headerlink" title="五、测试PHP"></a>五、测试PHP</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23jffs85aZ /]# cd /var/www/html&#10;[root@iZ23jffs85aZ /]# vi phpinfo.php</span><br></pre></td></tr></table></figure>
<p>ps:apache默认网站目录/var/www/html<br>加入以下内容：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;?php&#10;&#9;phpinfo()&#10;?&#62;</span><br></pre></td></tr></table></figure></p>
<p>浏览器访问：ip/phpinfo.php<br>出现如下页面，则表示安装成功！<br><img src="http://ww1.sinaimg.cn/mw690/6ba3371bjw1eq2x3l2zclj20gq0hdjvs.jpg" alt="PHPinfo"></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/30/Redmine-restart-error/" itemprop="url">
                  Redmine restart erro
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-30T18:58:58+08:00" content="2014-12-30">
              2014-12-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>When i restart Redmine, an erro happend like this:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ lmmbao]# service httpd start&#10;Starting httpd: Syntax error on line 42 of /etc/httpd/conf.d/subversion.conf:&#10;Invalid command &#39;PerlLoadModule&#39;, perhaps misspelled or defined by a module not included in the server configuration&#10;                                                           [FAILED]&#10;[root@iZ23lttzrggZ lmmbao]#</span><br></pre></td></tr></table></figure></p>
<p><img src="http://i.imgur.com/WxR1xD9.jpg" alt=""></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ lmmbao]# vi /etc/httpd/conf.d/subversion.conf</span><br></pre></td></tr></table></figure>
<p>DELETE this follows:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PerlLoadModule Apache::Redmine&#10;&#60;Location /svn&#62;&#10;        DAV svn&#10;        SVNParentPath &#34;/opt/repositories/svn&#34;&#10;        SVNListParentPath on&#10;        Order deny,allow&#10;        Deny from all&#10;        Satisfy any&#10;        LimitXMLRequestBody 0&#10;        SVNPathAuthz off&#10;        PerlAccessHandler Apache::Authn::Redmine::access_handler&#10;        PerlAuthenHandler Apache::Authn::Redmine::authen_handler&#10;        AuthType Basic&#10;        AuthName &#34;Subversion Repository&#34;&#10;        Require valid-user&#10;        RedmineDSN &#34;DBI:mysql:database=redmine_db;host=localhost:3306&#34;&#10;        RedmineDbUser &#34;redmine_admin&#34;&#10;        RedmineDbPass &#34;**********&#34;&#10;&#60;/Location&#62;</span><br></pre></td></tr></table></figure></p>
<p>And then restart the httpd service<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ lmmbao]# service httpd restart</span><br></pre></td></tr></table></figure></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/30/CentOS-Install-Apache/" itemprop="url">
                  CentOS 安装 Apache 服务
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-30T10:18:58+08:00" content="2014-12-30">
              2014-12-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p><strong>使用yum命令安装Apache</strong></p>
<p>由于 CentOS 已经封装了 Apache，直接运行安装：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ ~]# yum install httpd</span><br></pre></td></tr></table></figure></p>
<p>同样配置系统让 Apache 随系统启动：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ ~]# chkconfig --levels 235 httpd on</span><br></pre></td></tr></table></figure></p>
<p>配置完毕，启动 Apache：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ ~]# /etc/init.d/httpd start</span><br></pre></td></tr></table></figure></p>
<p>如果在启动过程中出现:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ ~]# /etc/init.d/httpd start&#10;Starting httpd: httpd: Could not reliably determine the server&#39;s fully qualified domain name, using 10.168.213.151 for ServerName&#10;                                                           [  OK  ]&#10;[root@iZ23i2txh8jZ ~]# /etc/init.d/httpd start</span><br></pre></td></tr></table></figure></p>
<p>那就修改一下httpd.conf<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ ~]# vi /etc/httpd/conf/httpd.conf</span><br></pre></td></tr></table></figure></p>
<p>找到<em>#ServerName www.example.com:80</em> 加入如下内容：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#ServerName www.example.com:80&#10;ServerName localhost:80</span><br></pre></td></tr></table></figure></p>
<p>然后重启apache<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ ~]# /etc/init.d/httpd restart</span><br></pre></td></tr></table></figure></p>
<p>成功！！<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ ~]# /etc/init.d/httpd restart&#10;Stopping httpd:                                            [  OK  ]&#10;Starting httpd:                                            [  OK  ]&#10;[root@iZ23i2txh8jZ ~]#</span><br></pre></td></tr></table></figure></p>
<p>注意：在 CentOS 中 Apache 的默认根目录是 /var/www/html，配置文件 /etc/httpd/conf/httpd.conf。其他配置存储在 /etc/httpd/conf.d/ 目录。</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/29/upgrade-the-kernel-on-centos/" itemprop="url">
                  CentOS 6.5 升级内核到 3.10.28
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-29T18:58:58+08:00" content="2014-12-29">
              2014-12-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>本文适用于 CentOS 6.5，亲测可行，估计也适用于其他Linux发行版。</p>
<h3 id="1-__u51C6_u5907_u5DE5_u4F5C"><a href="#1-__u51C6_u5907_u5DE5_u4F5C" class="headerlink" title="1. 准备工作"></a>1. 准备工作</h3><h4 id="1-1__u4E0B_u8F7D_u6E90_u7801_u5305"><a href="#1-1__u4E0B_u8F7D_u6E90_u7801_u5305" class="headerlink" title="1.1 下载源码包"></a>1.1 下载源码包</h4><p>Linux内核版本有两种：稳定版和开发版 ，Linux内核版本号由3个数字组成：r.x.y<br>    r: 主版本号<br>    x: 次版本号，偶数表示稳定版本；奇数表示开发中版本。<br>    y: 修订版本号 ， 表示修改的次数</p>
<p>去 <a href="http://www.kernel.org" target="_blank" rel="external">http://www.kernel.org</a> 首页，可以看到有stable, longterm等版本，longterm是比stable更稳定的版本，会长时间更新，因此我选择 3.10.28，<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget  https://www.kernel.org/pub/linux/kernel/v3.x/linux-3.10.28.tar.xz</span><br></pre></td></tr></table></figure></p>
<h4 id="1-2__u89E3_u538B"><a href="#1-2__u89E3_u538B" class="headerlink" title="1.2 解压"></a>1.2 解压</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xf linux-3.10.28.tar.xz</span><br></pre></td></tr></table></figure>
<h4 id="1-3__u66F4_u65B0_u5F53_u524D_u7CFB_u7EDF"><a href="#1-3__u66F4_u65B0_u5F53_u524D_u7CFB_u7EDF" class="headerlink" title="1.3 更新当前系统"></a>1.3 更新当前系统</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum update&#10;sudo yum upgrade</span><br></pre></td></tr></table></figure>
<h4 id="1-4__u5B89_u88C5_u7F16_u8BD1_u5185_u6838_u6240_u9700_u8981_u7684_u8F6F_u4EF6_u5305"><a href="#1-4__u5B89_u88C5_u7F16_u8BD1_u5185_u6838_u6240_u9700_u8981_u7684_u8F6F_u4EF6_u5305" class="headerlink" title="1.4 安装编译内核所需要的软件包"></a>1.4 安装编译内核所需要的软件包</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum groupinstall &#34;Development Tools&#34; # &#19968;&#21475;&#27668;&#23433;&#35013;&#32534;&#35793;&#26102;&#25152;&#38656;&#30340;&#19968;&#20999;&#24037;&#20855;&#10;sudo yum install ncurses-devel #&#24517;&#39035;&#36825;&#26679;&#25165;&#33021;&#35753; make *config &#36825;&#20010;&#25351;&#20196;&#27491;&#30830;&#22320;&#25191;&#34892;&#12290;&#10;sudo yum install qt-devel #&#22914;&#26524;&#20320;&#27809;&#26377; X &#29615;&#22659;&#65292;&#36825;&#19968;&#26465;&#21487;&#20197;&#19981;&#29992;&#10;sudo yum install hmaccalc zlib-devel binutils-devel elfutils-libelf-devel #&#21019;&#24314; CentOS-6 &#20869;&#26680;&#26102;&#38656;&#35201;&#23427;&#20204;</span><br></pre></td></tr></table></figure>
<h3 id="2__u914D_u7F6E_u6587_u4EF6"><a href="#2__u914D_u7F6E_u6587_u4EF6" class="headerlink" title="2 配置文件"></a>2 配置文件</h3><h4 id="2-1__u67E5_u770B_u5F53_u524D_u7CFB_u7EDF_u5185_u6838"><a href="#2-1__u67E5_u770B_u5F53_u524D_u7CFB_u7EDF_u5185_u6838" class="headerlink" title="2.1 查看当前系统内核"></a>2.1 查看当前系统内核</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r&#10;2.6.32-358.11.1.el6.x86_64</span><br></pre></td></tr></table></figure>
<h4 id="2-2__u5C06_u5F53_u524D_u7CFB_u7EDF_u7684_u914D_u7F6E_u6587_u4EF6_u62F7_u8D1D_u5230_u5F53_u524D_u76EE_u5F55"><a href="#2-2__u5C06_u5F53_u524D_u7CFB_u7EDF_u7684_u914D_u7F6E_u6587_u4EF6_u62F7_u8D1D_u5230_u5F53_u524D_u76EE_u5F55" class="headerlink" title="2.2 将当前系统的配置文件拷贝到当前目录"></a>2.2 将当前系统的配置文件拷贝到当前目录</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /boot/config-2.6.32-358.11.1.el6.x86_64 .config</span><br></pre></td></tr></table></figure>
<h4 id="2-3__u4F7F_u7528_u65E7_u5185_u6838_u914D_u7F6E_uFF0C_u5E76_u81EA_u52A8_u63A5_u53D7_u6BCF_u4E2A_u65B0_u589E_u9009_u9879_u7684_u9ED8_u8BA4_u8BBE_u7F6E"><a href="#2-3__u4F7F_u7528_u65E7_u5185_u6838_u914D_u7F6E_uFF0C_u5E76_u81EA_u52A8_u63A5_u53D7_u6BCF_u4E2A_u65B0_u589E_u9009_u9879_u7684_u9ED8_u8BA4_u8BBE_u7F6E" class="headerlink" title="2.3 使用旧内核配置，并自动接受每个新增选项的默认设置"></a>2.3 使用旧内核配置，并自动接受每个新增选项的默认设置</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c &#39;yes &#34;&#34; | make oldconfig&#39;</span><br></pre></td></tr></table></figure>
<p>make oldconfig会读取当前目录下的.config文件，在.config文件里没有找到的选项则提示用户填写，然后备份.config文件为.config.old，并生成新的.config文件，参考 <a href="http://stackoverflow.com/questions/4178526/what-does-make-oldconfig-do-exactly-linux-kernel-makefile" target="_blank" rel="external">http://stackoverflow.com/questions/4178526/what-does-make-oldconfig-do-exactly-linux-kernel-makefile</a></p>
<h3 id="3__u7F16_u8BD1"><a href="#3__u7F16_u8BD1" class="headerlink" title="3 编译"></a>3 编译</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make -j8 bzImage #&#29983;&#25104;&#20869;&#26680;&#25991;&#20214;&#10;sudo make -j8 modules #&#32534;&#35793;&#27169;&#22359;&#10;sudo make -j8 modules_install #&#32534;&#35793;&#23433;&#35013;&#27169;&#22359;</span><br></pre></td></tr></table></figure>
<p>要严格按照这个顺序进行编译，不能合并成一句，sudo make -j8 bzImage modules modules_install。</p>
<p>-j后面的数字是线程数，用于加快编译速度，一般的经验是，有多少G内存，就填写那个数字，例如有8G内存，则为-j8。</p>
<h3 id="4__u5B89_u88C5"><a href="#4__u5B89_u88C5" class="headerlink" title="4 安装"></a>4 安装</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make <span class="keyword">install</span></span><br></pre></td></tr></table></figure>
<p>如果出现了 ERROR: modinfo: could not find module xxx，数量少的话，可以忽略。</p>
<h3 id="5__u4FEE_u6539Grub_u5F15_u5BFC_u987A_u5E8F"><a href="#5__u4FEE_u6539Grub_u5F15_u5BFC_u987A_u5E8F" class="headerlink" title="5 修改Grub引导顺序"></a>5 修改Grub引导顺序</h3><p>安装完成后，需要修改Grub引导顺序，让新安装的内核作为默认内核。</p>
<p>编辑 grub.conf文件，<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/grub.conf</span><br></pre></td></tr></table></figure></p>
<p>数一下刚刚新安装的内核在哪个位置，从0开始，然后设置default为那个数字，一般新安装的内核在第一个位置，所以设置default=0。</p>
<h3 id="6__u91CD_u542F"><a href="#6__u91CD_u542F" class="headerlink" title="6 重启"></a>6 重启</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo reboot</span><br></pre></td></tr></table></figure>
<p>重启后，看一下当前内核版本号，<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r&#10;3.10.28</span><br></pre></td></tr></table></figure></p>
<p>成功啦！！</p>
<h3 id="7__u5982_u679C_u5931_u8D25_uFF0C_u5219_u91CD_u65B0_u5FAA_u73AF"><a href="#7__u5982_u679C_u5931_u8D25_uFF0C_u5219_u91CD_u65B0_u5FAA_u73AF" class="headerlink" title="7 如果失败，则重新循环"></a>7 如果失败，则重新循环</h3><p>如果失败，重新开始的话，要清理上次编译的现场<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make mrproper #&#28165;&#29702;&#19978;&#27425;&#32534;&#35793;&#30340;&#29616;&#22330;</span><br></pre></td></tr></table></figure></p>
<p>然后转到第2步，重新开始。</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/25/CentOS6.5-rsync-sersync/" itemprop="url">
                  CentOS 6.5 Rsync+sersync 实现数据实时同步备份
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-25T18:58:58+08:00" content="2014-12-25">
              2014-12-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h3 id="u4E00_u3001_u4E3A_u4EC0_u4E48_u8981_u7528Rsync+sersync_u67B6_u6784_3F"><a href="#u4E00_u3001_u4E3A_u4EC0_u4E48_u8981_u7528Rsync+sersync_u67B6_u6784_3F" class="headerlink" title="一、为什么要用Rsync+sersync架构?"></a>一、为什么要用Rsync+sersync架构?</h3><p>1、sersync是基于Inotify开发的，类似于Inotify-tools的工具</p>
<p>2、sersync可以记录下被监听目录中发生变化的（包括增加、删除、修改）具体某一个文件或某一个目录的名字，然后使用rsync同步的时候，只同步发生变化的这个文件或者这个目录。</p>
<h3 id="u4E8C_u3001Rsync+Inotify-tools_u4E0ERsync+sersync_u8FD9_u4E24_u79CD_u67B6_u6784_u6709_u4EC0_u4E48_u533A_u522B_uFF1F"><a href="#u4E8C_u3001Rsync+Inotify-tools_u4E0ERsync+sersync_u8FD9_u4E24_u79CD_u67B6_u6784_u6709_u4EC0_u4E48_u533A_u522B_uFF1F" class="headerlink" title="二、Rsync+Inotify-tools与Rsync+sersync这两种架构有什么区别？"></a>二、Rsync+Inotify-tools与Rsync+sersync这两种架构有什么区别？</h3><p>1、Rsync+Inotify-tools<br>（1）：Inotify-tools只能记录下被监听的目录发生了变化（包括增加、删除、修改），并没有把具体是哪个文件或者哪个目录发生了变化记录下来。</p>
<p>（2）：rsync在同步的时候，并不知道具体是哪个文件或者哪个目录发生了变化，每次都是对整个目录进行同步，当数据量很大时，整个目录同步非常耗时（rsync要对整个目录遍历查找对比文件），因此，效率很低。</p>
<p>2、Rsync+sersync</p>
<p>（1）：sersync可以记录下被监听目录中发生变化的（包括增加、删除、修改）具体某一个文件或某一个目录的名字；</p>
<p>（2）：rsync在同步的时候，只同步发生变化的这个文件或者这个目录（每次发生变化的数据相对整个同步目录数据来说是很小的，rsync在遍历查找比对文件时，速度很快），因此，效率很高。</p>
<p>小结：当同步的目录数据量不大时，建议使用Rsync+Inotify-tools；当数据量很大（几百G甚至1T以上）、文件很多时，建议使用Rsync+sersync。</p>
<p>说明：</p>
<p>操作系统：CentOS 6.5<br>源服务器：121.41.28.253<br>目标服务器：121.41.48.242，121.41.48.233<br>目的：把源服务器上/var/www/synctest目录实时同步到目标服务器的/var/www/synctest下</p>
<p>【具体操作】</p>
<h3 id="u7B2C_u4E00_u90E8_u5206_uFF1A_u5728_u4E24_u53F0_u76EE_u6807_u670D_u52A1_u5668121-41-48-242_u548C121-41-48-233_u6267_u884C_u7684_u64CD_u4F5C"><a href="#u7B2C_u4E00_u90E8_u5206_uFF1A_u5728_u4E24_u53F0_u76EE_u6807_u670D_u52A1_u5668121-41-48-242_u548C121-41-48-233_u6267_u884C_u7684_u64CD_u4F5C" class="headerlink" title="第一部分：在两台目标服务器121.41.48.242和121.41.48.233执行的操作"></a>第一部分：在两台目标服务器121.41.48.242和121.41.48.233执行的操作</h3><p>一、在目标服务器安装rsync服务端</p>
<p>1、关闭SELINUX<br>编辑防火墙配置文件：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23tvhxkkjZ /]# vi /etc/selinux/config</span><br></pre></td></tr></table></figure></p>
<p>用 # 注释掉下面两行代码:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#SELINUX=enforcing&#10;#SELINUXTYPE=targeted</span><br></pre></td></tr></table></figure></p>
<p>增加下面一行代码:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELINUX=disabled</span><br></pre></td></tr></table></figure></p>
<p>保存，退出:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wq!</span><br></pre></td></tr></table></figure></p>
<p>运行命令行，立即生效:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23tvhxkkjZ /]# setenforce 0</span><br></pre></td></tr></table></figure></p>
<p>2、开启防火墙tcp 873端口（rsync默认端口）</p>
<p>编辑防火墙配置文件：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23tvhxkkjZ /]# vi /etc/sysconfig/iptables</span><br></pre></td></tr></table></figure></p>
<p>添加下列行到开启22端口的后面：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 873 -j ACCEPT</span><br></pre></td></tr></table></figure></p>
<p>保存，退出:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wq!</span><br></pre></td></tr></table></figure></p>
<p>重启防火墙使配置生效：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23tvhxkkjZ /]# /etc/init.d/iptables restart</span><br></pre></td></tr></table></figure></p>
<p>3、安装rsync服务端软件</p>
<p>安装rsync，CentOS6.5自带rsync，运行下列命令行，确保rsync安装，同时安装rsync工具xinetd<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23tvhxkkjZ /]# yum install rsync xinetd</span><br></pre></td></tr></table></figure></p>
<p>编辑配置文件，设置开机启动rsync<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23tvhxkkjZ /]# vi /etc/xinetd.d/rsync</span><br></pre></td></tr></table></figure></p>
<p>修改disable的值为no:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">disable = no</span><br></pre></td></tr></table></figure></p>
<p>保存，退出:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wq!</span><br></pre></td></tr></table></figure></p>
<p>启动xinetd（CentOS中是以xinetd来管理Rsync服务的）<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23tvhxkkjZ /]# /etc/init.d/xinetd start</span><br></pre></td></tr></table></figure></p>
<p>4、创建rsyncd.conf配置文件</p>
<p>创建配置文件：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23tvhxkkjZ /]# vi /etc/rsyncd.conf</span><br></pre></td></tr></table></figure></p>
<p>添加以下代码：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log file = /var/log/rsyncd.log&#10;pidfile = /var/run/rsyncd.pid&#10;lock file = /var/run/rsync.lock&#10;secrets file = /etc/rsyncd.passwd&#10;motd file = /etc/rsyncd.motd&#10;&#10;[synctest]&#10;path = /var/www/synctest/&#10;comment = synctest&#10;uid = root&#10;gid = root&#10;port=873&#10;use chroot = no&#10;read only = no&#10;list = no&#10;max connections = 200&#10;timeout = 600&#10;auth users = root&#10;hosts allow = 121.41.28.253&#10;hosts deny = 121.41.28.254</span><br></pre></td></tr></table></figure></p>
<p>5、创建用户认证文件</p>
<p>配置文件<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23tvhxkkjZ /]# vi /etc/rsyncd.passwd</span><br></pre></td></tr></table></figure></p>
<p>添加以下内容(原服务器的用户名、密码)：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root:123456</span><br></pre></td></tr></table></figure></p>
<p>格式，用户名:密码，可以设置多个，每行一个 用户名:密码 对。<br>保存，退出:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wq!</span><br></pre></td></tr></table></figure></p>
<p>6、设置文件权限</p>
<p>设置文件所有者读取、写入权限:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23tvhxkkjZ etc]# chmod 600 /etc/rsyncd.conf&#10;[root@iZ23tvhxkkjZ etc]# chmod 600 /etc/rsyncd.passwd&#10;``` &#10;7&#12289;&#21551;&#21160;rsync&#10;&#10;&#21551;&#21160;&#65306;&#10;```&#123;bash&#125;&#10;[root@iZ23tvhxkkjZ etc]# /etc/init.d/xinetd start</span><br></pre></td></tr></table></figure></p>
<p>参考指令：<br>停止:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service xinetd stop</span><br></pre></td></tr></table></figure></p>
<p>重新启动:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service xinetd restart</span><br></pre></td></tr></table></figure></p>
<p>『目的服务器安装完成』</p>
<hr>
<h3 id="u7B2C_u4E8C_u90E8_u5206_uFF1A_u5728_u6E90_u670D_u52A1_u5668121-41-28-253_u4E0A_u64CD_u4F5C"><a href="#u7B2C_u4E8C_u90E8_u5206_uFF1A_u5728_u6E90_u670D_u52A1_u5668121-41-28-253_u4E0A_u64CD_u4F5C" class="headerlink" title="第二部分：在源服务器121.41.28.253上操作"></a>第二部分：在源服务器121.41.28.253上操作</h3><p>【以下部分在源服务器（发布服务器）上进行操作】</p>
<p>一、安装Rsync客户端</p>
<p>1、关闭SELINUX</p>
<p>编辑防火墙配置文件：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# vi /etc/selinux/config</span><br></pre></td></tr></table></figure></p>
<p>用 # 注释掉下面两行代码:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#SELINUX=enforcing&#10;#SELINUXTYPE=targeted</span><br></pre></td></tr></table></figure></p>
<p>增加下面一行代码:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELINUX=disabled</span><br></pre></td></tr></table></figure></p>
<p>保存，退出:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wq!</span><br></pre></td></tr></table></figure></p>
<p>运行命令行，立即生效:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# setenforce 0</span><br></pre></td></tr></table></figure></p>
<p>2、开启防火墙tcp 873端口（rsync默认端口）</p>
<p>编辑防火墙配置文件：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# vi /etc/sysconfig/iptables</span><br></pre></td></tr></table></figure></p>
<p>添加下列行到开启22端口的后面：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 873 -j ACCEPT</span><br></pre></td></tr></table></figure></p>
<p>保存，退出:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wq!</span><br></pre></td></tr></table></figure></p>
<p>重启防火墙使配置生效：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# /etc/init.d/iptables restart</span><br></pre></td></tr></table></figure></p>
<p>3、安装rsync客户端软件</p>
<p>安装rsync，CentOS6.5自带rsync，运行下列命令行，确保rsync安装，同时安装rsync工具xinetd<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# yum install rsync xinetd</span><br></pre></td></tr></table></figure></p>
<p>编辑配置文件，设置开机启动rsync<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# vi /etc/xinetd.d/rsync</span><br></pre></td></tr></table></figure></p>
<p>修改disable的值为no:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">disable = no</span><br></pre></td></tr></table></figure></p>
<p>保存，退出:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wq!</span><br></pre></td></tr></table></figure></p>
<p>启动xinetd（CentOS中是以xinetd来管理Rsync服务的）<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# /etc/init.d/xinetd start</span><br></pre></td></tr></table></figure></p>
<p>4、创建认证密码文件</p>
<p>编辑文件：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# vi /etc/rsyncd.passwd</span><br></pre></td></tr></table></figure></p>
<p>添加以下内容作为密码：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">123456</span><br></pre></td></tr></table></figure></p>
<p>保存，退出:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wq!</span><br></pre></td></tr></table></figure></p>
<p>设置文件权限，只设置文件所有者具有读取、写入权限：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# chmod 600 /etc/rsyncd.passwd</span><br></pre></td></tr></table></figure></p>
<p>5、测试源服务器到两台目标服务器之间的数据同步</p>
<p>在源服务器上创建测试文件夹<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ www]# mkdir /var/www/synctest&#10;[root@iZ23i2txh8jZ www]# mkdir /var/www/synctest/test</span><br></pre></td></tr></table></figure></p>
<p>在源服务器运行下面2行命令<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -avH --port=873 --progress --delete /var/www/synctest/ root@121.41.48.242::synctest --password-file=/etc/rsyncd.passwd</span><br></pre></td></tr></table></figure></p>
<p>运行完成后，分别在两台目标服务器上查看，在/var/www/synctest目录下有test文件夹，说明数据同步成功。</p>
<p>『以上手动同步功能实现完成。下面内容为使用sersync工具监控目录，完成自动同步』</p>
<hr>
<h2 id="u4E8C_u3001_u5B89_u88C5sersync_u5DE5_u5177_uFF0C_u5B9E_u65F6_u89E6_u53D1rsync_u8FDB_u884C_u540C_u6B65"><a href="#u4E8C_u3001_u5B89_u88C5sersync_u5DE5_u5177_uFF0C_u5B9E_u65F6_u89E6_u53D1rsync_u8FDB_u884C_u540C_u6B65" class="headerlink" title="二、安装sersync工具，实时触发rsync进行同步"></a>二、安装sersync工具，实时触发rsync进行同步</h2><p>1、查看服务器内核是否支持inotify</p>
<p>列出文件目录<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# ll /proc/sys/fs/inotify</span><br></pre></td></tr></table></figure></p>
<p>出现下面的内容，说明服务器内核支持inotify<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-rw-r--r-- 1 root root 0 Dec 25 12:03 max_queued_events&#10;-rw-r--r-- 1 root root 0 Dec 25 15:05 max_user_instances&#10;-rw-r--r-- 1 root root 0 Dec 25 12:03 max_user_watches</span><br></pre></td></tr></table></figure></p>
<p>备注：CentOS 6.5，默认已经支持inotify</p>
<p>2、修改inotify默认参数（inotify默认内核参数值太小）</p>
<p>查看系统默认参数值(max_queued_events)：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# sysctl -a | grep max_queued_events</span><br></pre></td></tr></table></figure></p>
<p>结果是：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# sysctl -a | grep max_queued_events&#10;fs.inotify.max_queued_events = 327679&#10;[root@iZ23i2txh8jZ /]#</span><br></pre></td></tr></table></figure></p>
<p>查看系统默认参数值(max_user_watches)：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# sysctl -a | grep max_user_watches</span><br></pre></td></tr></table></figure></p>
<p>结果是：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# sysctl -a | grep max_user_watches&#10;fs.inotify.max_user_watches = 50000000&#10;fs.epoll.max_user_watches = 1646100&#10;[root@iZ23i2txh8jZ /]#</span><br></pre></td></tr></table></figure></p>
<p>查看系统默认参数值(max_user_instances)：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# sysctl -a | grep max_user_instances</span><br></pre></td></tr></table></figure></p>
<p>结果是：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# sysctl -a | grep max_user_instances&#10;fs.inotify.max_user_instances = 128&#10;[root@iZ23i2txh8jZ /]#</span><br></pre></td></tr></table></figure></p>
<p>修改参数：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# sysctl -w fs.inotify.max_queued_events=&#34;99999999&#34;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# sysctl -w fs.inotify.max_user_watches=&#34;99999999&#34;</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# sysctl -w fs.inotify.max_user_instances=&#34;65535&#34;</span><br></pre></td></tr></table></figure>
<p>参数说明：</p>
<p>max_queued_events：<br>inotify队列最大长度，如果值太小，会出现”<strong> Event Queue Overflow </strong>“错误，导致监控文件不准确</p>
<p>max_user_watches：<br>要同步的文件包含多少目录，可以用：find /var/www/synctest -type d | wc -l 统计，必须保证max_user_watches值大于统计结果（这里/var/www/synctest为同步文件目录）</p>
<p>max_user_instances：<br>每个用户创建inotify实例最大值</p>
<p>3、安装sersync</p>
<p>sersync下载地址（不好用）：<a href="https://sersync.googlecode.com/files/sersync2.5.4_64bit_binary_stable_final.tar.gz" target="_blank" rel="external">https://sersync.googlecode.com/files/sersync2.5.4_64bit_binary_stable_final.tar.gz</a><br>将sersync2.5.4_64bit_binary_stable_final.tar.gz复制到/usr/local/src目录下。<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ /]# cd /usr/local/src</span><br></pre></td></tr></table></figure></p>
<p>解压<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ src]# tar zxvf sersync2.5.4_64bit_binary_stable_final.tar.gz</span><br></pre></td></tr></table></figure></p>
<p>移动目录到/usr/local/sersync<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ src]# mv GNU-Linux-x86 /usr/local/sersync</span><br></pre></td></tr></table></figure></p>
<p>4、配置sersync</p>
<p>进入sersync安装目录:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ src]# cd /usr/local/sersync</span><br></pre></td></tr></table></figure></p>
<p>备份原文件：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ sersync]# cp confxml.xml confxml.xml-bak</span><br></pre></td></tr></table></figure></p>
<p>编辑配置文件：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ sersync]# vi confxml.xml</span><br></pre></td></tr></table></figure></p>
<p>修改代码如下：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;?xml version=&#34;1.0&#34; encoding=&#34;ISO-8859-1&#34;?&#62;&#10;&#60;head version=&#34;2.5&#34;&#62;&#10;&#9;&#60;host hostip=&#34;localhost&#34; port=&#34;8008&#34;&#62;&#60;/host&#62;&#10;&#9;&#60;debug start=&#34;false&#34;/&#62;&#10;&#9;&#60;fileSystem xfs=&#34;false&#34;/&#62;&#10;&#9;&#60;filter start=&#34;false&#34;&#62;&#10;&#9;&#9;&#60;exclude expression=&#34;(.*)\.svn&#34;&#62;&#60;/exclude&#62;&#10;&#9;&#9;&#60;exclude expression=&#34;(.*)\.gz&#34;&#62;&#60;/exclude&#62;&#10;&#9;&#9;&#60;exclude expression=&#34;^info/*&#34;&#62;&#60;/exclude&#62;&#10;&#9;&#9;&#60;exclude expression=&#34;^static/*&#34;&#62;&#60;/exclude&#62;&#10;&#9;&#60;/filter&#62;&#10;&#9;&#60;inotify&#62;&#10;&#9;&#9;&#60;delete start=&#34;true&#34;/&#62;&#10;&#9;&#9;&#60;createFolder start=&#34;true&#34;/&#62;&#10;&#9;&#9;&#60;createFile start=&#34;false&#34;/&#62;&#10;&#9;&#9;&#60;closeWrite start=&#34;true&#34;/&#62;&#10;&#9;&#9;&#60;moveFrom start=&#34;true&#34;/&#62;&#10;&#9;&#9;&#60;moveTo start=&#34;true&#34;/&#62;&#10;&#9;&#9;&#60;attrib start=&#34;false&#34;/&#62;&#10;&#9;&#9;&#60;modify start=&#34;false&#34;/&#62;&#10;&#9;&#60;/inotify&#62;&#10;&#10;&#9;&#60;sersync&#62;&#10;&#9;&#9;&#60;localpath watch=&#34;/var/www/synctest&#34;&#62;&#10;&#9;&#9;&#9;&#60;remote ip=&#34;121.41.48.242&#34; name=&#34;synctest&#34;/&#62;&#10;&#9;&#9;&#9;&#60;remote ip=&#34;121.41.48.233&#34; name=&#34;synctest&#34;/&#62;&#10;&#9;&#9;&#9;&#60;!--&#60;remote ip=&#34;192.168.8.40&#34; name=&#34;tongbu&#34;/&#62;--&#62;&#10;&#9;&#9;&#60;/localpath&#62;&#10;&#9;&#9;&#60;rsync&#62;&#10;&#9;&#9;&#9;&#60;commonParams params=&#34;-artuz&#34;/&#62;&#10;&#9;&#9;&#9;&#60;auth start=&#34;true&#34; users=&#34;root&#34; passwordfile=&#34;/etc/rsyncd.passwd&#34;/&#62;&#10;&#9;&#9;&#9;&#60;userDefinedPort start=&#34;false&#34; port=&#34;874&#34;/&#62;&#60;!-- port=874 --&#62;&#10;&#9;&#9;&#9;&#60;timeout start=&#34;false&#34; time=&#34;100&#34;/&#62;&#60;!-- timeout=100 --&#62;&#10;&#9;&#9;&#9;&#60;ssh start=&#34;false&#34;/&#62;&#10;&#9;&#9;&#60;/rsync&#62;&#10;&#9;&#9;&#60;failLog path=&#34;/tmp/rsync_fail_log.sh&#34; timeToExecute=&#34;60&#34;/&#62;&#60;!--default every 60mins execute once--&#62;&#10;&#9;&#9;&#60;crontab start=&#34;true&#34; schedule=&#34;600&#34;&#62;&#60;!--600mins--&#62;&#10;&#9;&#9;&#9;&#60;crontabfilter start=&#34;false&#34;&#62;&#10;&#9;&#9;&#9;&#9;&#60;exclude expression=&#34;*.php&#34;&#62;&#60;/exclude&#62;&#10;&#9;&#9;&#9;&#9;&#60;exclude expression=&#34;info/*&#34;&#62;&#60;/exclude&#62;&#10;&#9;&#9;&#9;&#60;/crontabfilter&#62;&#10;&#9;&#9;&#60;/crontab&#62;&#10;&#9;&#9;&#60;plugin start=&#34;false&#34; name=&#34;command&#34;/&#62;&#10;&#9;&#60;/sersync&#62;&#10;&#10;&#9;&#60;plugin name=&#34;command&#34;&#62;&#10;&#9;&#9;&#60;param prefix=&#34;/bin/sh&#34; suffix=&#34;&#34; ignoreError=&#34;true&#34;/&#62; &#60;!--prefix /opt/tongbu/mmm.sh suffix--&#62;&#10;&#9;&#9;&#60;filter start=&#34;false&#34;&#62;&#10;&#9;&#9;&#9;&#60;include expression=&#34;(.*)\.php&#34;/&#62;&#10;&#9;&#9;&#9;&#60;include expression=&#34;(.*)\.sh&#34;/&#62;&#10;&#9;&#9;&#60;/filter&#62;&#10;&#9;&#60;/plugin&#62;&#10;&#10;&#9;&#60;plugin name=&#34;socket&#34;&#62;&#10;&#9;&#9;&#60;localpath watch=&#34;/opt/tongbu&#34;&#62;&#10;&#9;&#9;&#9;&#60;deshost ip=&#34;192.168.138.20&#34; port=&#34;8009&#34;/&#62;&#10;&#9;&#9;&#60;/localpath&#62;&#10;&#9;&#60;/plugin&#62;&#10;&#10;&#9;&#60;plugin name=&#34;refreshCDN&#34;&#62;&#10;&#9;&#9;&#60;localpath watch=&#34;/data0/htdocs/cms.xoyo.com/site/&#34;&#62;&#10;&#9;&#9;&#9;&#60;cdninfo domainname=&#34;ccms.chinacache.com&#34; port=&#34;80&#34; username=&#34;xxxx&#34; passwd=&#34;xxxx&#34;/&#62;&#10;&#9;&#9;&#9;&#60;sendurl base=&#34;http://pic.xoyo.com/cms&#34;/&#62;&#10;&#9;&#9;&#9;&#60;regexurl regex=&#34;false&#34; match=&#34;cms.xoyo.com/site([/a-zA-Z0-9]*).xoyo.com/images&#34;/&#62;&#10;&#9;&#9;&#60;/localpath&#62;&#10;&#9;&#60;/plugin&#62;&#10;&#60;/head&#62;</span><br></pre></td></tr></table></figure></p>
<p>保存，退出:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wq!</span><br></pre></td></tr></table></figure></p>
<p>参数说明：</p>
<p>localpath watch=”/var/www/synctest”：#源服务器同步目录</p>
<p>121.41.48.242，121.41.48.233：#目标服务器IP地址</p>
<p>name=”synctest”： #目标服务器rsync同步目录模块名称</p>
<p>users=”root”： #目标服务器rsync同步用户名</p>
<p>passwordfile=”/etc/rsyncd.passwd”： #目标服务器rsync同步用户的密码在源服务器的存放路径</p>
<p>remote ip=”121.41.48.242”: #目标服务器ip，每行一个</p>
<p>remote ip=”121.41.48.233”: #目标服务器ip，每行一个</p>
<p>failLog path=”/tmp/rsync_fail_log.sh” #脚本运行失败日志记录</p>
<p>start=”true” #设置为true，每隔600分钟执行一次全盘同步</p>
<p>5、设置sersync监控开机自动执行</p>
<p>编辑<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ sersync]# vi /etc/rc.d/rc.local</span><br></pre></td></tr></table></figure></p>
<p>在最后添加一行,设置开机自动运行脚本<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/sersync/sersync2 -d -r -o /usr/local/sersync/confxml.xml</span><br></pre></td></tr></table></figure></p>
<p>保存，退出:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wq!</span><br></pre></td></tr></table></figure></p>
<p>6、添加脚本监控sersync是否正常运行</p>
<p>编辑<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ crontab]# vi /home/crontab/check_sersync.sh</span><br></pre></td></tr></table></figure></p>
<p>添加以下代码<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh&#10;sersync=&#34;/usr/local/sersync/sersync2&#34;&#10;confxml=&#34;/usr/local/sersync/confxml.xml&#34;&#10;status=$(ps aux |grep &#39;sersync2&#39;|grep -v &#39;grep&#39;|wc -l)&#10;if [ $status -eq 0 ];&#10;then&#10;$sersync -d -r -o $confxml &#38;&#10;else&#10;exit 0;&#10;fi</span><br></pre></td></tr></table></figure></p>
<p>保存，退出:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:wq!</span><br></pre></td></tr></table></figure></p>
<p>添加脚本执行权限<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ crontab]# chmod +x /home/crontab/check_sersync.sh</span><br></pre></td></tr></table></figure></p>
<p>编辑<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ crontab]# vi /etc/crontab</span><br></pre></td></tr></table></figure></p>
<p>在最后添加下面一行，每隔5分钟执行一次脚本<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*/5 * * * * root /home/crontab/check_sersync.sh &#62; /dev/null 2&#62;&#38;1</span><br></pre></td></tr></table></figure></p>
<p>重新加载服务<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ crontab]# service crond reload</span><br></pre></td></tr></table></figure></p>
<p>7、测试sersync实时触发rsync同步脚本是否正常运行</p>
<p>在源服务器121.41.28.253上创建文件inotify_rsync_ceshi<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /var/www/synctest/inotify_rsync_ceshi</span><br></pre></td></tr></table></figure></p>
<p>重新启动源服务器：121.41.28.253</p>
<p>等系统启动之后，查看两台目标服务器121.41.48.242，121.41.48.233的/var/www/synctest下是否有inotify_rsync_ceshi文件夹。</p>
<p>然后再在源服务器121.41.28.253创建文件夹inotify_rsync_ceshi_new<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /var/www/synctest/inotify_rsync_ceshi_new</span><br></pre></td></tr></table></figure></p>
<p>继续查看两台目标服务器121.41.48.242，121.41.48.233的/var/www/synctest下是否有inotify_rsync_ceshi_new文件夹</p>
<p>如果以上测试都通过，说明inotify实时触发rsync同步脚本运行正常。</p>
<p>至此，Linux下Rsync+sersync实现数据实时同步完成。</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/19/CentOS-add-user/" itemprop="url">
                  CentOS 服务器新建用户并设置密码
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-19T18:58:58+08:00" content="2014-12-19">
              2014-12-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h3 id="u6DFB_u52A0_u7528_u6237"><a href="#u6DFB_u52A0_u7528_u6237" class="headerlink" title="添加用户"></a>添加用户</h3><p>useradd lmmabao<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ ~]# useradd lmmbao</span><br></pre></td></tr></table></figure></p>
<h3 id="u8BBE_u7F6E_u5BC6_u7801_uFF1A"><a href="#u8BBE_u7F6E_u5BC6_u7801_uFF1A" class="headerlink" title="设置密码："></a>设置密码：</h3><p>passwd lmmbao<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23i2txh8jZ ~]# passwd lmmbao&#10;Changing password for user lmmbao.&#10;New password: &#10;Retype new password: &#10;passwd: all authentication tokens updated successfully.&#10;[root@iZ23i2txh8jZ ~]#</span><br></pre></td></tr></table></figure></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/19/CentOS-apche-configuration/" itemprop="url">
                  Apache 常用文件的路径
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-19T16:58:58+08:00" content="2014-12-19">
              2014-12-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <ol>
<li><p>Apache 部署静态页面的位置<br>经常要在Apache部署发布页面文件，需要找到对应的目录下面，目录/var/www/html。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[lmmbao@iZ23lttzrggZ /]$ cd /var/www/html/&#10;[lmmbao@iZ23lttzrggZ html]$ ll&#10;total 24&#10;drwxr-xr-x 5 root root 4096 Nov 20 15:49 birthday-cake&#10;-rw-r--r-- 1 root root   26 Nov 12 19:13 hello.php&#10;-rw-r--r-- 1 root root   15 Nov 12 18:54 index.html&#10;-rw-r--r-- 1 root root   20 Nov 12 19:03 index.php&#10;drwxr-xr-x 4 root root 4096 Nov 20 16:43 love&#10;drwxr-xr-x 5 root root 4096 Dec  4 10:56 wedding-cake&#10;[lmmbao@iZ23lttzrggZ html]$ cd /</span><br></pre></td></tr></table></figure>
</li>
<li><p>Apache config 文件 httpd.conf 的位置在/etc/httpd/conf 下。<br>查看命令如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[lmmbao@iZ23zmtjn2dZ conf]# ls&#10;extra httpd.conf magic&#10;[lmmbao@iZ23zmtjn2dZ conf]# pwd&#10;/etc/httpd/conf</span><br></pre></td></tr></table></figure></li>
</ol>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/19/add-user-to-sudo/" itemprop="url">
                  CentOS 将用户添加到 sudo 用户组的方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-19T16:58:58+08:00" content="2014-12-19">
              2014-12-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>安装完 CentOS 后，默认没有启用 sudo，首先应该是对 sudo 进行设置。<br>sudo的作用就是使当前非 root 用户在使用没有权限的命令 时，直接在命令前加入 sudo ，在输入自己当前用户的密码就可以完成 root 用户的功能，而不必在每次使用 su - 来回切换用户了。sudo的配置文件位于 /etc/sudoers，需要 root 权限才可以读写。<br><strong>运行visudo 来改 /etc/sudoers</strong><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost lmmbao]# visudo&#10;``` &#10;&#10;&#25214;&#21040; root ALL=(ALL) ALL &#36825;&#19968;&#34892;&#65292;&#22312;&#21518;&#38754;&#20877;&#21152;&#19978;&#19968;&#34892;&#23601;&#21487;&#20197;&#20102;&#65288;&#19981;&#29992;&#24341;&#21495;&#65289;&#65306;&#10;&#8220;username ALL=(ALL) ALL&#8221; &#10;&#20854;&#20013; username &#20026;&#25351;&#23450;&#30340;&#20351;&#29992; sudo &#30340;&#29992;&#25143;&#65292;&#24341;&#21495;&#20869;&#30340;&#31354;&#26684;&#20026; tab &#12290;&#10;&#25214;&#21040; root ALL=(ALL) ALL &#36825;&#19968;&#34892;&#65292;&#22312;&#21518;&#38754;&#20877;&#21152;&#19978;&#19968;&#34892;&#23601;&#21487;&#20197;&#20102;&#65288;&#19981;&#29992;&#24341;&#21495;&#65289;&#65306;&#10;&#8220;username ALL=(ALL) ALL&#8221; &#10;&#20854;&#20013; username &#20026;&#25351;&#23450;&#30340;&#20351;&#29992; sudo &#30340;&#29992;&#25143;&#65292;&#24341;&#21495;&#20869;&#30340;&#31354;&#26684;&#20026; tab&#10;&#10;&#22914;&#26524;&#20320;&#24819;&#27599;&#27425;&#20351;&#29992; sudo &#21629;&#20196;&#30340;&#26102;&#20505;&#37117;&#25552;&#31034;&#20320;&#36755;&#20837;&#26681;&#23494;&#30721;&#65292;&#31227;&#21160;&#21040;&#36825;&#19968;&#34892;&#65306;&#10;```&#123;bash&#125;&#10;#%wheel ALL=(ALL) ALL</span><br></pre></td></tr></table></figure></p>
<p>解除 # 号注释<br>如果你不想每次使用 sudo 命令的时候都提示你输入跟密码，移动到下面这一行：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#%wheel ALL=(ALL)NOPASSWD:ALL</span><br></pre></td></tr></table></figure></p>
<p>解除 # 号注释<br>保存后退出<br>添加用户名到 wheel 用户组：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -G wheel username</span><br></pre></td></tr></table></figure></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/16/CentOS-install-redmine/" itemprop="url">
                  Install Redmine on Centos 6.5 - 64 bit
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-16T16:58:58+08:00" content="2014-12-16">
              2014-12-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h3 id="Update_the_System"><a href="#Update_the_System" class="headerlink" title="Update the System"></a>Update the System</h3><p>Copy and execute the following command to update the critical components of the system :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update</span><br></pre></td></tr></table></figure></p>
<p>After the update completed, we need to restart the system using the following command :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure></p>
<h3 id="Install_the_dependencies_packages"><a href="#Install_the_dependencies_packages" class="headerlink" title="Install the dependencies packages"></a>Install the dependencies packages</h3><p>These are the basic software packages for environment settings and utility tools to compile other packages in the next section.</p>
<p>Copy the block command and execute in the Putty Windows :</p>
<p>This is a long command line, copy all and implementation.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install nano zip unzip libyaml-devel zlib-devel curl-devel openssl-devel httpd-devel apr-devel apr-util-devel mysql-devel</span><br></pre></td></tr></table></figure></p>
<h3 id="Install_Apache_and_MySQL"><a href="#Install_Apache_and_MySQL" class="headerlink" title="Install Apache and MySQL"></a>Install Apache and MySQL</h3><p>Apache is a server application for communicating over the HTTP protocol. Apache runs on operating systems such as Unix, Linux, Microsoft Windows, and other operating systems.</p>
<p>Apache play an important role in the development of the internet and the world wide web.</p>
<p>MySQL is the database management free open source most popular on the world, MySQL has high speed, stability and ease of use, portability, operating on multiple operating systems offer a large system is very powerful utility functions.</p>
<p>With the speed and high security, MySQL is well suited for applications that access databases on the internet.</p>
<p>Use the following command to install :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install httpd mysql mysql-server</span><br></pre></td></tr></table></figure></p>
<p>Allow start services when OS boot :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig httpd on&#10;chkconfig mysqld on&#10;service httpd start&#10;service mysqld start</span><br></pre></td></tr></table></figure></p>
<p>Set the password for MySQL<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/mysql_secure_installation</span><br></pre></td></tr></table></figure></p>
<p>Because we not have a password for the root account so you press Enter to skip.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Enter current password for root (enter for none):</span><br></pre></td></tr></table></figure></p>
<p>Select Yes to set the password for the MySQL root account.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set root password? [Y/n] Y</span><br></pre></td></tr></table></figure></p>
<p>Enter and confirm your password, remove the anonymous user, select Yes<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Remove anonymous users? [Y/n] Y</span><br></pre></td></tr></table></figure></p>
<p>Allow remote login to MySQL as root account, select No.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Disallow root login remotely? [Y/n] n</span><br></pre></td></tr></table></figure></p>
<p>Delete the test database, select Yes<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Remove test database and access to it? [Y/n] Y</span><br></pre></td></tr></table></figure></p>
<p>Reload privilege tables, select Yes<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Reload privilege tables now? [Y/n] Y</span><br></pre></td></tr></table></figure></p>
<h3 id="Turn_off_SELinux"><a href="#Turn_off_SELinux" class="headerlink" title="Turn off SELinux"></a>Turn off SELinux</h3><p>SELinux is a security feature advanced for Linux operating system, when installing the system you need to turn off this feature to get the process done smoothly, after successful you can turn on back if you want.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/selinux/config</span><br></pre></td></tr></table></figure></p>
<p>Change the file content :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELINUX=disabled</span><br></pre></td></tr></table></figure></p>
<p>Press CTRL + O to save the file and press CTRL + X to exit.</p>
<h3 id="Set_up_the_Hostname"><a href="#Set_up_the_Hostname" class="headerlink" title="Set up the Hostname"></a>Set up the Hostname</h3><p>By default when installing a new OS Centos not set the hostname, so we need to setting with the command :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/hosts</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 localhost&#10;::1         localhost localhost.localdomain localhost6 localhost6.localdomain6&#10;10.168.226.151 iZ23lttzrggZ</span><br></pre></td></tr></table></figure>
<p>Add your domain name or host name that you set on both the command line, save the file and exit, the server name will be changed when restarting.</p>
<h3 id="Configuring_the_Firewall"><a href="#Configuring_the_Firewall" class="headerlink" title="Configuring the Firewall"></a>Configuring the Firewall</h3><p>We do not want to turn off the firewall because it’s quite important, so you need to add rules to allow port 80 for HTTP and port 443 for HTTPS.</p>
<p>In the Centos OS, you can configuration firewall by editing files iptables and ip6tables.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/sysconfig/iptables</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> # Firewall configuration written by system-config-firewall&#10;[root@iZ23lttzrggZ lmmbao]# vi /etc/sysconfig/iptables&#10;# Firewall configuration written by system-config-firewall&#10;# Manual customization of this file is not recommended&#10;*filter&#10;:INPUT ACCEPT [0:0]&#10;:FORWARD ACCEPT [0:0]&#10;:OUTPUT ACCEPT [0:0]&#10;-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT&#10;-A INPUT -p icmp -j ACCEPT&#10;-A INPUT -i lo -j ACCEPT&#10;-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT&#10;-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT&#10;-A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -j ACCEPT&#10;-A INPUT -j REJECT --reject-with icmp-host-prohibited&#10;-A FORWARD -j REJECT --reject-with icmp-host-prohibited&#10;COMMIT</span><br></pre></td></tr></table></figure>
<p>Press Enter to create a new line after the line of port 22, copy the following two commands and right click on the window to the Paste command.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT&#10;-A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -j ACCEPT</span><br></pre></td></tr></table></figure></p>
<p>Press CTRL + O to save the file and press CTRL + X to exit.</p>
<p>The same applies for IP6 firewall :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/sysconfig/ip6tables</span><br></pre></td></tr></table></figure></p>
<p>Add these lines to the file.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT&#10;-A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -j ACCEPT</span><br></pre></td></tr></table></figure></p>
<p>After you finish editing both files, run the commands to apply the new rules for firewall.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/iptables restart&#10;/etc/init.d/ip6tables restart</span><br></pre></td></tr></table></figure></p>
<p>Allow turn on the firewall when reboot the operating system.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig iptables on&#10;chkconfig ip6tables on</span><br></pre></td></tr></table></figure></p>
<p>Finally, we need to restart the system to apply the changes to the SELinux and Hostname.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure></p>
<h3 id="Install_PHP_and_phpMyAdmin"><a href="#Install_PHP_and_phpMyAdmin" class="headerlink" title="Install PHP and phpMyAdmin"></a>Install PHP and phpMyAdmin</h3><p>Because we use MySQL database management system, so we need to install phpMyAdmin program management.</p>
<p>phpMyAdmin is a free open source tool written by PHP language to manage MySQL database via a web browser.</p>
<p>It can create, modify or delete databases, tables, fields or records, perform SQL statements, or managing users and permissions.</p>
<p>The command to install PHP and the packages :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install php php-mysql php-gd php-imap php-ldap php-mbstring php-odbc php-pear php-xml php-xmlrpc php-pecl-apc php-soap</span><br></pre></td></tr></table></figure></p>
<p>Restarting the Apache service :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service httpd restart</span><br></pre></td></tr></table></figure></p>
<p>And install phpMyadmin :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm --import http://dag.wieers.com/rpm/packages/RPM-GPG-KEY.dag.txt&#10;yum install http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm&#10;yum -y install phpmyadmin</span><br></pre></td></tr></table></figure></p>
<p>Editing the virtual host file to allow remote login to the phpMyadmin.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  GNU nano 2.0.9                File: /etc/httpd/conf.d/phpmyadmin.conf                                       &#10;#&#10;#  Web application to manage MySQL&#10;#&#10;&#10;&#60;Directory &#34;/usr/share/phpmyadmin&#34;&#62;&#10;  Order Deny,Allow&#10;  Deny from all&#10;  Allow from 127.0.0.1&#10;&#60;/Directory&#62;&#10;&#10;Alias /phpmyadmin /usr/share/phpmyadmin&#10;Alias /phpMyAdmin /usr/share/phpmyadmin&#10;Alias /mysqladmin /usr/share/phpmyadmin</span><br></pre></td></tr></table></figure></p>
<p>Replace text “Allow from 127.0.0.1” to “Allow from all”, save the file and exit.</p>
<p>Editing the configuration file for the phpMyadmin<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /usr/share/phpmyadmin/config.inc.php</span><br></pre></td></tr></table></figure></p>
<p>Replace text :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$cfg[&#39;Servers&#39;][$i][&#39;auth_type&#39;] = &#39;cookie&#39;;</span><br></pre></td></tr></table></figure></p>
<p>To：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$cfg[&#39;Servers&#39;][$i][&#39;auth_type&#39;] = &#39;http&#39;;</span><br></pre></td></tr></table></figure></p>
<p>Save the file and exit, restarting the Apache service :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service httpd restart</span><br></pre></td></tr></table></figure></p>
<p>After successfully installed phpMyadmin, you can check at the address :<br><a href="http://your-domain/phpmyadmin" target="_blank" rel="external">http://your-domain/phpmyadmin</a><br>Login with account :  root / your_password<br>With Password has been set at step install MySQL database in the above.<br><img src="http://i.imgur.com/LKpTc2C.jpg" alt=""><br>Note: If you install the Redmine system on the PC or in a virtual machine which not on the dedicated server, we need to switch the application phpMyadmin to run on port 8080 because port 80 will be used for Redmine in the next steps.</p>
<p>We need add a port 8080 to the firewall and change the VirtualHost for phpMyadmin.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/sysconfig/iptables</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># Firewall configuration written by system-config-firewall&#10;# Manual customization of this file is not recommended&#10;*filter&#10;:INPUT ACCEPT [0:0]&#10;:FORWARD ACCEPT [0:0]&#10;:OUTPUT ACCEPT [0:0]&#10;-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT&#10;-A INPUT -p icmp -j ACCEPT&#10;-A INPUT -i lo -j ACCEPT&#10;-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT&#10;-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT&#10;-A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -j ACCEPT&#10;-A INPUT -j REJECT --reject-with icmp-host-prohibited&#10;-A FORWARD -j REJECT --reject-with icmp-host-prohibited&#10;COMMIT</span><br></pre></td></tr></table></figure>
<p>Add the command line :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT</span><br></pre></td></tr></table></figure></p>
<p>The same applies for IP6 firewall :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/sysconfig/ip6tables</span><br></pre></td></tr></table></figure></p>
<p>Add the command line :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT</span><br></pre></td></tr></table></figure></p>
<p>Restarting firewall service to allow the new port.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/iptables restart&#10;/etc/init.d/ip6tables restart</span><br></pre></td></tr></table></figure></p>
<p>Editing the VirtualHost file to run phpMyadmin on the port 8080<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/httpd/conf.d/phpmyadmin.conf</span><br></pre></td></tr></table></figure></p>
<p>change<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#&#10;#  Web application to manage MySQL&#10;# &#10;&#60;Directory &#34;/usr/share/phpmyadmin&#34;&#62;&#10;  Order Deny,Allow&#10;  Deny from all&#10;  Allow from all&#10;&#60;/Directory&#62;&#10;Alias /phpmyadmin /usr/share/phpmyadmin&#10;Alias /phpMyAdmin /usr/share/phpmyadmin&#10;Alias /mysqladmin /usr/share/phpmyadmin</span><br></pre></td></tr></table></figure></p>
<p>to:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;VirtualHost *:8080&#62;&#10;    DocumentRoot /usr/share/phpmyadmin/&#10;    ServerName your_domain.com&#10;&#60;/VirtualHost&#62;</span><br></pre></td></tr></table></figure></p>
<p>Next, add the command to allows listening on the port 8080 in the file “httpd.conf”<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/httpd/conf/httpd.conf</span><br></pre></td></tr></table></figure></p>
<p>Add the command line :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Listen 8080</span><br></pre></td></tr></table></figure></p>
<p>Save the file and exit, restarting the Apache service :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service httpd restart</span><br></pre></td></tr></table></figure></p>
<p>Now, phpMyadmin will run on the port 8080 at the address :</p>
<p><a href="http://your-domain:8080" target="_blank" rel="external">http://your-domain:8080</a><br><img src="http://i.imgur.com/UP258Q3.jpg" alt=""></p>
<h3 id="Install_Ruby"><a href="#Install_Ruby" class="headerlink" title="Install Ruby"></a>Install Ruby</h3><p>Ruby is a object-oriented programming language, capable of reflection. Syntax inherited from Ada and Perl with object-oriented features of Smalltalk, and also share some features with Python, Lisp, Dylan and CLU, Ruby is a single phase interpreter.</p>
<p>Ruby provides programming patterns, including functional programming, object-oriented, imperative, reflective, it uses dynamic variable and automatic memory management.</p>
<p>Install Ruby interpreter with version management program RVM.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\curl -L https://get.rvm.io | bash</span><br></pre></td></tr></table></figure></p>
<p>After successful, we will launch RVM<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile.d/rvm.sh</span><br></pre></td></tr></table></figure></p>
<p>The following command will list the versions of Ruby to install :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rvm list known</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ /]# source /etc/profile.d/rvm.sh&#10;[root@iZ23lttzrggZ /]# rvm list known&#10;# MRI Rubies&#10;[ruby-]1.8.6[-p420]&#10;[ruby-]1.8.7[-head] # security released on head&#10;[ruby-]1.9.1[-p431]&#10;[ruby-]1.9.2[-p330]&#10;[ruby-]1.9.3[-p551]&#10;[ruby-]2.0.0[-p598]&#10;[ruby-]2.1.4&#10;[ruby-]2.1[.5]&#10;[ruby-]2.1-head&#10;ruby-head&#10;&#10;# for forks use: rvm install ruby-head-&#60;name&#62; --url https://github.com/github/ruby.git --branch 2.1&#10;&#10;# JRuby&#10;jruby-1.6.8&#10;jruby[-1.7.17]&#10;jruby-head&#10;&#10;# Rubinius&#10;rbx-1.3.3&#10;rbx-2.0.0</span><br></pre></td></tr></table></figure>
<p>We choose the stable version [ruby-] 1.9.3 [-p551], and execute the following command :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rvm install 1.9.3</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby-1.9.3-p551 - #extracting rubygems-2.4.5....&#10;ruby-1.9.3-p551 - #removing old rubygems.........&#10;ruby-1.9.3-p551 - #installing rubygems-2.4.5..................&#10;ruby-1.9.3-p551 - #gemset created /usr/local/rvm/gems/ruby-1.9.3-p551@global&#10;ruby-1.9.3-p551 - #importing gemset /usr/local/rvm/gemsets/global.gems...........................................................&#10;ruby-1.9.3-p551 - #generating global wrappers........&#10;ruby-1.9.3-p551 - #gemset created /usr/local/rvm/gems/ruby-1.9.3-p551&#10;ruby-1.9.3-p551 - #importing gemsetfile /usr/local/rvm/gemsets/default.gems evaluated to empty gem list&#10;ruby-1.9.3-p551 - #generating default wrappers........&#10;ruby-1.9.3-p551 - #adjusting #shebangs for (gem irb erb ri rdoc testrb rake).&#10;Install of ruby-1.9.3-p551 - #complete</span><br></pre></td></tr></table></figure>
<p>The installation process is pretty long time, but you do not need any intervention, after successful, you check with the following command :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby -v</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ /]# ruby -v&#10;ruby 1.9.3p551 (2014-11-13 revision 48407) [x86_64-linux]&#10;[root@iZ23lttzrggZ /]#</span><br></pre></td></tr></table></figure>
<h3 id="Install_Rubygems"><a href="#Install_Rubygems" class="headerlink" title="Install Rubygems"></a>Install Rubygems</h3><p>Rubygems is a Ruby’s packages management program, very popular in applications written by Ruby language and the Ruby On Rails framework.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install rubygems</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ /]# yum -y install rubygems&#10;Loaded plugins: security&#10;Setting up Install Process&#10;Resolving Dependencies&#10;--&#62; Running transaction check&#10;---&#62; Package rubygems.noarch 0:1.3.7-5.el6 will be installed&#10;--&#62; Processing Dependency: ruby(abi) = 1.8 for package: rubygems-1.3.7-5.el6.noarch&#10;--&#62; Processing Dependency: ruby-rdoc for package: rubygems-1.3.7-5.el6.noarch&#10;--&#62; Processing Dependency: /usr/bin/ruby for package: rubygems-1.3.7-5.el6.noarch&#10;--&#62; Running transaction check&#10;---&#62; Package ruby.x86_64 0:1.8.7.374-3.el6_6 will be installed&#10;---&#62; Package ruby-libs.x86_64 0:1.8.7.374-3.el6_6 will be installed&#10;--&#62; Processing Dependency: libreadline.so.5()(64bit) for package: ruby-libs-1.8.7.374-3.el6_6.x86_64&#10;---&#62; Package ruby-rdoc.x86_64 0:1.8.7.374-3.el6_6 will be installed&#10;--&#62; Processing Dependency: ruby-irb = 1.8.7.374-3.el6_6 for package: ruby-rdoc-1.8.7.374-3.el6_6.x86_64&#10;--&#62; Running transaction check&#10;---&#62; Package compat-readline5.x86_64 0:5.2-17.1.el6 will be installed&#10;---&#62; Package ruby-irb.x86_64 0:1.8.7.374-3.el6_6 will be installed&#10;--&#62; Finished Dependency Resolution&#10;&#10;Dependencies Resolved&#10;&#10;==============================================================================================================&#10; Package                       Arch                Version                         Repository            Size&#10;==============================================================================================================&#10;Installing:&#10; rubygems                      noarch              1.3.7-5.el6                     base                 207 k&#10;Installing for dependencies:&#10; compat-readline5              x86_64              5.2-17.1.el6                    base                 130 k&#10; ruby                          x86_64              1.8.7.374-3.el6_6               updates              538 k&#10; ruby-irb                      x86_64              1.8.7.374-3.el6_6               updates              317 k&#10; ruby-libs                     x86_64              1.8.7.374-3.el6_6               updates              1.7 M&#10; ruby-rdoc                     x86_64              1.8.7.374-3.el6_6               updates              380 k&#10;&#10;Transaction Summary&#10;==============================================================================================================&#10;Install       6 Package(s)&#10;&#10;Total download size: 3.2 M&#10;Installed size: 11 M&#10;Downloading Packages:&#10;(1/6): compat-readline5-5.2-17.1.el6.x86_64.rpm                                        | 130 kB     00:00     &#10;(2/6): ruby-1.8.7.374-3.el6_6.x86_64.rpm                                               | 538 kB     00:00     &#10;(3/6): ruby-irb-1.8.7.374-3.el6_6.x86_64.rpm                                           | 317 kB     00:00     &#10;(4/6): ruby-libs-1.8.7.374-3.el6_6.x86_64.rpm                                          | 1.7 MB     00:00     &#10;(5/6): ruby-rdoc-1.8.7.374-3.el6_6.x86_64.rpm                                          | 380 kB     00:00     &#10;(6/6): rubygems-1.3.7-5.el6.noarch.rpm                                                 | 207 kB     00:00     &#10;--------------------------------------------------------------------------------------------------------------&#10;Total                                                                         3.8 MB/s | 3.2 MB     00:00     &#10;Running rpm_check_debug&#10;Running Transaction Test&#10;Transaction Test Succeeded&#10;Running Transaction&#10;  Installing : compat-readline5-5.2-17.1.el6.x86_64                                                       1/6 &#10;  Installing : ruby-libs-1.8.7.374-3.el6_6.x86_64                                                         2/6 &#10;  Installing : ruby-1.8.7.374-3.el6_6.x86_64                                                              3/6 &#10;  Installing : ruby-irb-1.8.7.374-3.el6_6.x86_64                                                          4/6 &#10;  Installing : ruby-rdoc-1.8.7.374-3.el6_6.x86_64                                                         5/6 &#10;  Installing : rubygems-1.3.7-5.el6.noarch                                                                6/6 &#10;  Verifying  : ruby-libs-1.8.7.374-3.el6_6.x86_64                                                         1/6 &#10;  Verifying  : compat-readline5-5.2-17.1.el6.x86_64                                                       2/6 &#10;  Verifying  : ruby-1.8.7.374-3.el6_6.x86_64                                                              3/6 &#10;  Verifying  : ruby-irb-1.8.7.374-3.el6_6.x86_64                                                          4/6 &#10;  Verifying  : rubygems-1.3.7-5.el6.noarch                                                                5/6 &#10;  Verifying  : ruby-rdoc-1.8.7.374-3.el6_6.x86_64                                                         6/6 &#10;&#10;Installed:&#10;  rubygems.noarch 0:1.3.7-5.el6                                                                               &#10;&#10;Dependency Installed:&#10;  compat-readline5.x86_64 0:5.2-17.1.el6                 ruby.x86_64 0:1.8.7.374-3.el6_6                     &#10;  ruby-irb.x86_64 0:1.8.7.374-3.el6_6                    ruby-libs.x86_64 0:1.8.7.374-3.el6_6                &#10;  ruby-rdoc.x86_64 0:1.8.7.374-3.el6_6                  &#10;&#10;Complete!&#10;[root@iZ23lttzrggZ /]#</span><br></pre></td></tr></table></figure>
<h3 id="Install_Passenger"><a href="#Install_Passenger" class="headerlink" title="Install Passenger"></a>Install Passenger</h3><p>The full name of the Passenger is Phusion Passenger, known as mod_rails or mod_rack, it is a web application intergrate with Apache and it can operate as a standalone web server support for the Ruby On Rails applications.</p>
<p>Execute the following command :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem install passenger</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ /]# gem install passenger&#10;Fetching: rack-1.5.2.gem (100%)&#10;Successfully installed rack-1.5.2&#10;Fetching: daemon_controller-1.2.0.gem (100%)&#10;Successfully installed daemon_controller-1.2.0&#10;Fetching: passenger-4.0.55.gem (100%)&#10;Building native extensions.  This could take a while...&#10;Successfully installed passenger-4.0.55&#10;unable to convert &#34;\x89&#34; from ASCII-8BIT to UTF-8 for test/multipart/binary, skipping&#10;Installing ri documentation for rack-1.5.2&#10;Installing ri documentation for daemon_controller-1.2.0&#10;Installing ri documentation for passenger-4.0.55&#10;3 gems installed&#10;[root@iZ23lttzrggZ /]#</span><br></pre></td></tr></table></figure>
<p>After last command. Execute the following command :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passenger-install-apache2-module</span><br></pre></td></tr></table></figure></p>
<p>执行过程：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--------------------------------------------&#10;Almost there!&#10;&#10;Please edit your Apache configuration file, and add these lines:&#10;&#10;   LoadModule passenger_module /usr/local/rvm/gems/ruby-1.9.3-p551/gems/passenger-4.0.55/buildout/apache2/mod_passenger.so&#10;   &#60;IfModule mod_passenger.c&#62;&#10;     PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-p551/gems/passenger-4.0.55&#10;     PassengerDefaultRuby /usr/local/rvm/gems/ruby-1.9.3-p551/wrappers/ruby&#10;   &#60;/IfModule&#62;&#10;&#10;After you restart Apache, you are ready to deploy any number of web&#10;applications on Apache, with a minimum amount of configuration!&#10;&#10;Press ENTER to continue.&#10;&#10;&#10;--------------------------------------------&#10;&#10;Deploying a web application: an example&#10;&#10;Suppose you have a web application in /somewhere. Add a virtual host to your&#10;Apache configuration file and set its DocumentRoot to /somewhere/public:&#10;&#10;   &#60;VirtualHost *:80&#62;&#10;      ServerName www.yourhost.com&#10;      # !!! Be sure to point DocumentRoot to &#39;public&#39;!&#10;      DocumentRoot /somewhere/public    &#10;      &#60;Directory /somewhere/public&#62;&#10;         # This relaxes Apache security settings.&#10;         AllowOverride all&#10;         # MultiViews must be turned off.&#10;         Options -MultiViews&#10;         # Uncomment this if you&#39;re on Apache &#62;= 2.4:&#10;         #Require all granted&#10;      &#60;/Directory&#62;&#10;   &#60;/VirtualHost&#62;&#10;&#10;And that&#39;s it! You may also want to check the Users Guide for security and&#10;optimization tips, troubleshooting and other useful information:&#10;&#10;  /usr/local/rvm/gems/ruby-1.9.3-p551/gems/passenger-4.0.55/doc/Users guide Apache.html&#10;  https://www.phusionpassenger.com/documentation/Users%20guide%20Apache.html&#10;&#10;Enjoy Phusion Passenger, a product of Phusion (www.phusion.nl) :-)&#10;https://www.phusionpassenger.com&#10;&#10;Phusion Passenger is a trademark of Hongli Lai &#38; Ninh Bui.&#10;[root@iZ23lttzrggZ /]#</span><br></pre></td></tr></table></figure></p>
<p>After completed, we copy a notification block in the window to create the configuration file in the next steps (select block notification and press C to copy).<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LoadModule passenger_module /usr/local/rvm/gems/ruby-1.9.3-p551/gems/passenger-4.0.55/buildout/apache2/mod_passenger.so&#10;&#60;IfModule mod_passenger.c&#62;&#10;   PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-p551/gems/passenger-4.0.55&#10;   PassengerDefaultRuby /usr/local/rvm/gems/ruby-1.9.3-p551/wrappers/ruby&#10;&#60;/IfModule&#62;</span><br></pre></td></tr></table></figure></p>
<p>Create a new virtual host file for Passenger :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/httpd/conf.d/passenger.conf</span><br></pre></td></tr></table></figure></p>
<p>Paste the command blocks into the empty file and save it, then restart the Apache service.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service httpd restart</span><br></pre></td></tr></table></figure></p>
<p><strong>Success!!!!!</strong><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ /]# service httpd restart&#10;Stopping httpd:                                            [  OK  ]&#10;Starting httpd:                                            [  OK  ]&#10;[root@iZ23lttzrggZ /]#</span><br></pre></td></tr></table></figure></p>
<h3 id="Create_Database_for_Redmine"><a href="#Create_Database_for_Redmine" class="headerlink" title="Create Database for Redmine"></a>Create Database for Redmine</h3><p>Use MySQLAdmin to create an empty database for Redmine, saved password to fill in the configuration file in the next steps.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql --user=root --password=root_password_mysql&#10;create database redmine_db character set utf8;&#10;create user &#39;redmine_admin&#39;@&#39;localhost&#39; identified by &#39;your_new_password&#39;;&#10;grant all privileges on redmine_db.* to &#39;redmine_admin&#39;@&#39;localhost&#39;;&#10;quit;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ /]# mysql --user=root --password=root_password_mysql&#10;Welcome to the MySQL monitor.  Commands end with ; or \g.&#10;Your MySQL connection id is 19&#10;Server version: 5.1.73 Source distribution&#10;&#10;Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.&#10;&#10;Oracle is a registered trademark of Oracle Corporation and/or its&#10;affiliates. Other names may be trademarks of their respective&#10;owners.&#10;&#10;Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.&#10;&#10;mysql&#62; create database redmine_db character set utf8;&#10;Query OK, 1 row affected (0.00 sec)&#10;&#10;mysql&#62; create user &#39;redmine_admin&#39;@&#39;localhost&#39; identified by &#39;your_new_password&#39;;&#10;Query OK, 0 rows affected (0.00 sec)&#10;&#10;mysql&#62; grant all privileges on redmine_db.* to &#39;redmine_admin&#39;@&#39;localhost&#39;;&#10;Query OK, 0 rows affected (0.00 sec)&#10;&#10;mysql&#62; quit;&#10;Bye&#10;[root@iZ23lttzrggZ /]#</span><br></pre></td></tr></table></figure>
<h3 id="Install_Redmine"><a href="#Install_Redmine" class="headerlink" title="Install Redmine"></a>Install Redmine</h3><p>Redmine is a main program of the project management system, we will download and install the program from the website of Redmine.</p>
<p>Download Redmine version 2.5.x to directory “/var/www” on the Centos OS.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /var/www&#10;wget http://www.redmine.org/releases/redmine-2.5.0.tar.gz</span><br></pre></td></tr></table></figure></p>
<p>Extract the folder and rename directory<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar xvfz redmine-2.5.0.tar.gz&#10;mv redmine-2.5.0 redmine&#10;rm -rf redmine-2.5.0.tar.gz</span><br></pre></td></tr></table></figure></p>
<p>Configuring the Database</p>
<p>The next, we need to configure the database was created from the above steps.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /var/www/redmine/config&#10;cp database.yml.example database.yml&#10;nano database.yml</span><br></pre></td></tr></table></figure></p>
<p>database.yml infomations:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># Default setup is given for MySQL with ruby1.9. If you&#39;re running Redmine&#10;# with MySQL and ruby1.8, replace the adapter name with `mysql`.&#10;# Examples for PostgreSQL, SQLite3 and SQL Server can be found at the end.&#10;# Line indentation must be 2 spaces (no tabs).&#10;&#10;production:&#10;  adapter: mysql2&#10;  database: redmine&#10;  host: localhost&#10;  username: root&#10;  password: &#34;&#34;&#10;  encoding: utf8&#10;&#10;development:&#10;  adapter: mysql2&#10;  database: redmine_development&#10;  host: localhost&#10;  username: root&#10;  password: &#34;&#34;&#10;  encoding: utf8&#10;&#10;# Warning: The database defined as &#34;test&#34; will be erased and&#10;# re-generated from your development database when you run &#34;rake&#34;.&#10;# Do not set this db to the same as development or production.&#10;test:&#10;# Default setup is given for MySQL with ruby1.9. If you&#39;re running Redmine&#10;# with MySQL and ruby1.8, replace the adapter name with `mysql`.&#10;# Examples for PostgreSQL, SQLite3 and SQL Server can be found at the end.&#10;# Line indentation must be 2 spaces (no tabs).&#10;&#10;production:&#10;   adapter: mysql2&#10;  database: redmine&#10;  host: localhost&#10;  username: root&#10;  password: &#34;&#34;&#10;  encoding: utf8&#10;&#10;development:&#10;  adapter: mysql2&#10;  database: redmine_development&#10;  host: localhost&#10;  username: root&#10;  password: &#34;&#34;&#10;  encoding: utf8&#10;&#10;# Warning: The database defined as &#34;test&#34; will be erased and&#10;# re-generated from your development database when you run &#34;rake&#34;.&#10;# Do not set this db to the same as development or production.&#10;test:&#10;  adapter: mysql2&#10;  database: redmine_test&#10;  host: localhost&#10;  username: root&#10;  password: &#34;&#34;&#10;  encoding: utf8&#10;&#10;# PostgreSQL configuration example&#10;#production:&#10;#  adapter: postgresql&#10;#  database: redmine&#10;#  host: localhost&#10;#  username: postgres&#10;#  password: &#34;postgres&#34;&#10; &#10;# SQLite3 configuration example&#10;#production:&#10;#  adapter: sqlite3&#10;#  database: db/redmine.sqlite3&#10; &#10;# SQL Server configuration example&#10;#production:&#10;#  adapter: sqlserver&#10;#  database: redmine&#10;#  host: localhost&#10;#  username: jenkins&#10;#  password: jenkins</span><br></pre></td></tr></table></figure></p>
<p>Enter name for database, enter username and password of the database.<br>Change this:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">production:&#10;  adapter: mysql2&#10;  database: redmine&#10;  host: localhost&#10;  username: root&#10;  password: &#34;&#34;&#10;  encoding: utf8</span><br></pre></td></tr></table></figure></p>
<p>To:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">production:&#10;  adapter: mysql2&#10;  database: redmine_db&#10;  host: localhost&#10;  username: redmine_admin&#10;  password: &#34;LmmBao@2014&#34;&#10;  encoding: utf8</span><br></pre></td></tr></table></figure></p>
<p> Press CTRL + O to save the file and CTRL + X to exit.</p>
<h3 id="Setting_up_Rails"><a href="#Setting_up_Rails" class="headerlink" title="Setting up Rails"></a>Setting up Rails</h3><p>Install the package library support for Rails using the Bundle.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /var/www/redmine&#10;gem install bundler&#10;bundle install&#10;rake generate_secret_token</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ config]# cd /var/www/redmine&#10;[root@iZ23lttzrggZ redmine]# gem install bundler&#10;Fetching: bundler-1.7.9.gem (100%)&#10;Successfully installed bundler-1.7.9&#10;Installing ri documentation for bundler-1.7.9&#10;1 gem installed&#10;[root@iZ23lttzrggZ redmine]# bundle install&#10;Don&#39;t run Bundler as root. Bundler can ask for sudo if it is needed, and installing your bundle as root will&#10;break this application for all non-root users on this machine.&#10;Fetching gem metadata from https://rubygems.org/.........&#10;Resolving dependencies...&#10;Installing rake 10.4.2&#10;Installing i18n 0.6.11&#10;Installing multi_json 1.10.1&#10;Installing activesupport 3.2.17</span><br></pre></td></tr></table></figure>
<p><strong>*When i run bundle install command, an error occurred while installing rmagick (2.13.4), and Bundler cannot continue.</strong><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rmagick-2.13.4 for inspection.&#10;Results logged to /usr/local/rvm/gems/ruby-1.9.3-p551/extensions/x86_64-linux/1.9.1/rmagick-2.13.4/gem_make.out&#10;An error occurred while installing rmagick (2.13.4), and Bundler cannot continue.&#10;Make sure that `gem install rmagick -v &#39;2.13.4&#39;` succeeds before bundling.&#10;[root@iZ23lttzrggZ redmine]# yum install ImageMagick-devel</span><br></pre></td></tr></table></figure></p>
<p>Get solution from<a href="http://stackoverflow.com/questions/5201689/rmagick-gem-install-cant-find-magick-config" target="_blank" rel="external">Stack Overflow</a><br><img src="http://i.imgur.com/J8Dq8l3.jpg" alt="Stack Overflow"><br>Then run bundle install again.<br>Success!!<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Installing rmagick 2.13.4&#10;Installing rubyzip 1.1.6&#10;Installing websocket 1.2.1&#10;Installing selenium-webdriver 2.44.0&#10;Installing shoulda-context 1.0.2&#10;Installing shoulda-matchers 1.4.1&#10;Installing shoulda 3.3.2&#10;Installing yard 0.8.7.6&#10;Your bundle is complete!&#10;Use `bundle show [gemname]` to see where a bundled gem is installed.&#10;Post-install message from rmagick:&#10;Please report any bugs. See https://github.com/gemhome/rmagick/compare/RMagick_2-13-2...master and https://github.com/rmagick/rmagick/issues/18&#10;[root@iZ23lttzrggZ redmine]#</span><br></pre></td></tr></table></figure></p>
<p><img src="http://i.imgur.com/jm5adwC.jpg" alt=""><br>The next, we create the database table for the Redmine application.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RAILS_ENV=production rake db:migrate&#10;RAILS_ENV=production rake redmine:load_default_data</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ redmine]# RAILS_ENV=production rake redmine:load_default_data&#10;&#10;Select language: ar, az, bg, bs, ca, cs, da, de, el, en, en-GB, es, et, eu, fa, fi, fr, gl, he, hr, hu, id, it, ja, ko, lt, lv, mk, mn, nl, no, pl, pt, pt-BR, ro, ru, sk, sl, sq, sr, sr-YU, sv, th, tr, uk, vi, zh, zh-TW [en] &#10;====================================&#10;Default configuration data loaded.&#10;[root@iZ23lttzrggZ redmine]#</span><br></pre></td></tr></table></figure>
<h3 id="Activate_FCGI"><a href="#Activate_FCGI" class="headerlink" title="Activate FCGI"></a>Activate FCGI</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /var/www/redmine/public&#10;mkdir plugin_assets&#10;cp dispatch.fcgi.example dispatch.fcgi&#10;cp htaccess.fcgi.example .htaccess</span><br></pre></td></tr></table></figure>
<h3 id="Setting_up_Apache_and_FastCGI"><a href="#Setting_up_Apache_and_FastCGI" class="headerlink" title="Setting up Apache and FastCGI"></a>Setting up Apache and FastCGI</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /var/www/&#10;rpm --import https://fedoraproject.org/static/0608B895.txt&#10;wget http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm&#10;rpm -ivh epel-release-6-8.noarch.rpm&#10;yum -y install mod_fcgid&#10;rm -rf epel-release-6-8.noarch.rpm</span><br></pre></td></tr></table></figure>
<h3 id="Creating_Files_Directory"><a href="#Creating_Files_Directory" class="headerlink" title="Creating Files Directory"></a>Creating Files Directory</h3><p>This directory contains data files generated during the operation of Redmine as document or image file, we create a new directory in the “/opt”.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /opt/redmine/files&#10;chown -R apache:apache /opt/redmine&#10;cd /var/www/redmine/config&#10;cp configuration.yml.example configuration.yml&#10;nano configuration.yml</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> 94   # Absolute path to the directory where attachments are stored.&#10; 95   # The default is the &#39;files&#39; directory in your Redmine instance.&#10; 96   # Your Redmine instance needs to have write permission on this&#10; 97   # directory.&#10; 98   # Examples:&#10; 99   # attachments_storage_path: /var/redmine/files&#10;100   # attachments_storage_path: D:/redmine/files&#10;101   attachments_storage_path:</span><br></pre></td></tr></table></figure>
<p>Enter the directory path containing the data files you just created in the previous step into the line “attachments_storage_path”.</p>
<p>Note: You must add a space at the begin of the path “/opt/redmine/files” after character “:”<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> 94   # Absolute path to the directory where attachments are stored.&#10; 95   # The default is the &#39;files&#39; directory in your Redmine instance.&#10; 96   # Your Redmine instance needs to have write permission on this&#10; 97   # directory.&#10; 98   # Examples:&#10; 99   # attachments_storage_path: /var/redmine/files&#10;100   # attachments_storage_path: D:/redmine/files&#10;101   attachments_storage_path: /opt/redmine/files</span><br></pre></td></tr></table></figure></p>
<h3 id="Configuring_Email"><a href="#Configuring_Email" class="headerlink" title="Configuring Email"></a>Configuring Email</h3><p>Another very important function of Redmine is using email to notify members when the contents of each project changes, Redmine can use many different methods to send email that is Sendmail, SMTP, GMail …</p>
<p>To configure the email we will edit the configuration file.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /var/www/redmine/config/configuration.yml</span><br></pre></td></tr></table></figure></p>
<p>The simplest is you use features of the default SendMail in the Centos OS by settings :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">email_delivery:&#10; delivery_method: :sendmail</span><br></pre></td></tr></table></figure></p>
<p>Note : Do not use the Tab key to indent when editing the configuration file, you need to use the space bar on the keyboard.</p>
<p>If you use GMail’s SMTP, you need to register an email account with the login methods used password normal and disable two-step authentication by smart phone.</p>
<p>Enter your Gmail account as below :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">email_delivery:&#10; delivery_method: :smtp&#10; smtp_settings:&#10;      enable_starttls_auto: true&#10;      address: &#34;smtp.gmail.com&#34; &#10;      port: 587&#10;      domain: &#34;smtp.gmail.com&#34; &#10;      authentication: :plain&#10;      user_name: &#34;your_email@gmail.com&#34; &#10;      password: &#34;your_password&#34;</span><br></pre></td></tr></table></figure></p>
<p>Save the file configuration and exit.</p>
<h3 id="Create_Virtual_Host_for_Redmine"><a href="#Create_Virtual_Host_for_Redmine" class="headerlink" title="Create Virtual Host for Redmine"></a>Create Virtual Host for Redmine</h3><p>Create an Apache configuration file for the Redmine application at the port 80.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/httpd/conf.d/redmine.conf</span><br></pre></td></tr></table></figure></p>
<p>Copy the text below and paste into the editor window, note the information to change your domain name.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;VirtualHost *:80&#62;&#10;        ServerName your_domain&#10;        ServerAdmin your_domain@domain.com&#10;        DocumentRoot /var/www/redmine/public/&#10;        ErrorLog logs/redmine_error_log&#10;        &#60;Directory &#34;/var/www/redmine/public/&#34;&#62;&#10;                Options Indexes ExecCGI FollowSymLinks&#10;                Order allow,deny&#10;                Allow from all&#10;                AllowOverride all&#10;        &#60;/Directory&#62;&#10;&#60;/VirtualHost&#62;</span><br></pre></td></tr></table></figure>
<p>Save the file configuration and exit.</p>
<h3 id="Running_Redmine"><a href="#Running_Redmine" class="headerlink" title="Running Redmine"></a>Running Redmine</h3><p>Before execute Redmine in the first time, we must permission for the directory installed Redmine and restart Apache service.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /var/www&#10;chown -R apache:apache redmine&#10;chmod -R 755 redmine&#10;service httpd restart</span><br></pre></td></tr></table></figure></p>
<p><img src="http://i.imgur.com/xmLeYFY.jpg" alt=""><br>Redmine will run at the following address URL :<br><a href="http://your-domain" target="_blank" rel="external">http://your-domain</a><br>Login to system with an administrator account : admin / admin<br>You can change your password after successful login.<br>We can see Redmine has running but very primitive, in the next steps we will install the support plugins and customized Redmine to use professional.</p>
<h3 id="Install_Subversion"><a href="#Install_Subversion" class="headerlink" title="Install Subversion"></a>Install Subversion</h3><p>Subversion, also known as SVN, it is a version management system is very popular and easy to use, most programmers can use it competently.</p>
<p>We need to create a folder to store data for Redmine, the following command creates a directory and permissions for the Apache service.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /opt/repositories/svn&#10;chown -R apache:apache /opt/repositories/&#10;chmod 0755 /opt/repositories</span><br></pre></td></tr></table></figure></p>
<p>The following command install Subversion and the packages :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mod_dav_svn subversion subversion-ruby</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ /]# yum install mod_dav_svn subversion subversion-ruby&#10;Loaded plugins: security&#10;Setting up Install Process&#10;Resolving Dependencies&#10;--&#62; Running transaction check&#10;---&#62; Package mod_dav_svn.x86_64 0:1.6.11-10.el6_5 will be installed&#10;---&#62; Package subversion.x86_64 0:1.6.11-10.el6_5 will be installed&#10;---&#62; Package subversion-ruby.x86_64 0:1.6.11-10.el6_5 will be installed&#10;--&#62; Finished Dependency Resolution&#10;&#10;Dependencies Resolved&#10;&#10;==============================================================================================================&#10; Package                       Arch                 Version                          Repository          Size&#10;==============================================================================================================&#10;Installing:&#10; mod_dav_svn                   x86_64               1.6.11-10.el6_5                  base                79 k&#10; subversion                    x86_64               1.6.11-10.el6_5                  base               2.3 M&#10; subversion-ruby               x86_64               1.6.11-10.el6_5                  base               382 k&#10;&#10;Transaction Summary&#10;==============================================================================================================&#10;Install       3 Package(s)&#10;&#10;Total size: 2.7 M&#10;Total download size: 2.3 M&#10;Installed size: 13 M&#10;Is this ok [y/N]: y&#10;Downloading Packages:&#10;subversion-1.6.11-10.el6_5.x86_64.rpm                                                  | 2.3 MB     00:00     &#10;Running rpm_check_debug&#10;Running Transaction Test&#10;Transaction Test Succeeded&#10;Running Transaction&#10;  Installing : subversion-1.6.11-10.el6_5.x86_64                                                          1/3 &#10;  Installing : subversion-ruby-1.6.11-10.el6_5.x86_64                                                     2/3 &#10;  Installing : mod_dav_svn-1.6.11-10.el6_5.x86_64                                                         3/3 &#10;  Verifying  : subversion-ruby-1.6.11-10.el6_5.x86_64                                                     1/3 &#10;  Verifying  : mod_dav_svn-1.6.11-10.el6_5.x86_64                                                         2/3 &#10;  Verifying  : subversion-1.6.11-10.el6_5.x86_64                                                          3/3 &#10;&#10;Installed:&#10;  mod_dav_svn.x86_64 0:1.6.11-10.el6_5                     subversion.x86_64 0:1.6.11-10.el6_5                &#10;  subversion-ruby.x86_64 0:1.6.11-10.el6_5                &#10;&#10;Complete!&#10;[root@iZ23lttzrggZ /]#</span><br></pre></td></tr></table></figure>
<p>The next, we will create a directory and copy the file called “Redmine.pm”, it responsible for interface data repository with Redmine and it is written by Perl language programming.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/lib64/perl5/vendor_perl/Apache&#10;ln -s /var/www/redmine/extra/svn/Redmine.pm /usr/lib64/perl5/vendor_perl/Apache/Redmine.pm</span><br></pre></td></tr></table></figure></p>
<p>Note : If you are using 32 bit Centos, change the path “/usr/lib64” to “/usr/lib”</p>
<p>After installation is complete, from the Redmine application, go to the page Administration&gt; Settings&gt; Repositories to check the results.</p>
<p>To support the authentication and access to data repository for each member, we need to create a virtual host for the Apache service can access Redmine database.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/httpd/conf.d/subversion.conf</span><br></pre></td></tr></table></figure></p>
<p>Add the following lines to the end and still retain the old contents of the file :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PerlLoadModule Apache::Redmine&#10;&#60;Location /svn&#62;&#10;        DAV svn&#10;        SVNParentPath &#34;/opt/repositories/svn&#34; &#10;        SVNListParentPath on&#10;        Order deny,allow&#10;        Deny from all&#10;        Satisfy any&#10;        LimitXMLRequestBody 0&#10;        SVNPathAuthz off&#10;        PerlAccessHandler Apache::Authn::Redmine::access_handler&#10;        PerlAuthenHandler Apache::Authn::Redmine::authen_handler&#10;        AuthType Basic&#10;        AuthName &#34;Subversion Repository&#34; &#10;        Require valid-user&#10;        RedmineDSN &#34;DBI:mysql:database=redmine_db;host=localhost:3306&#34; &#10;        RedmineDbUser &#34;redmine_admin&#34; &#10;        RedmineDbPass &#34;your_password_database_redmine&#34; &#10;&#60;/Location&#62;</span><br></pre></td></tr></table></figure></p>
<p>Note : You need to change the password in the “RedmineDbPass” to correct the database password of Redmine.</p>
<p>At this point, we have finished the basic settings for Redmine.</p>
<p>Thank you!</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    

  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



        </div>

        


        

      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="http://ww3.sinaimg.cn/mw690/6ba3371bgw1ei1yg6iujij209l09rwg2.jpg" alt="ZhangYouzhi" itemprop="image"/>
          <p class="site-author-name" itemprop="name">ZhangYouzhi</p>
        </div>
        <p class="site-description motion-element" itemprop="description">Where there is a will, there is a way!</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">58</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">3</span>
              <span class="site-state-item-name">分类</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">35</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2015</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhangYouzhi</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    
    

  


  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  

  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  

  
  

</body>
</html>
