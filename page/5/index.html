<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description" content="Where there is a will, there is a way!">
<meta property="og:type" content="website">
<meta property="og:title" content="ZhangYouzhi's Blog">
<meta property="og:url" content="http://zhangyouzhi.com/page/5/index.html">
<meta property="og:site_name" content="ZhangYouzhi's Blog">
<meta property="og:description" content="Where there is a will, there is a way!">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZhangYouzhi's Blog">
<meta name="twitter:description" content="Where there is a will, there is a way!">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post',
    motion: true
  };
</script>

  <title> ZhangYouzhi's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">ZhangYouzhi's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
  <section id="posts" class="posts-expand">

    

    
    

    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/16/CentOS-install-redmine/" itemprop="url">
                  Install Redmine on Centos 6.5 - 64 bit
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-16T16:58:58+08:00" content="2014-12-16">
              2014-12-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h3 id="Update_the_System"><a href="#Update_the_System" class="headerlink" title="Update the System"></a>Update the System</h3><p>Copy and execute the following command to update the critical components of the system :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update</span><br></pre></td></tr></table></figure></p>
<p>After the update completed, we need to restart the system using the following command :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure></p>
<h3 id="Install_the_dependencies_packages"><a href="#Install_the_dependencies_packages" class="headerlink" title="Install the dependencies packages"></a>Install the dependencies packages</h3><p>These are the basic software packages for environment settings and utility tools to compile other packages in the next section.</p>
<p>Copy the block command and execute in the Putty Windows :</p>
<p>This is a long command line, copy all and implementation.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install nano zip unzip libyaml-devel zlib-devel curl-devel openssl-devel httpd-devel apr-devel apr-util-devel mysql-devel</span><br></pre></td></tr></table></figure></p>
<h3 id="Install_Apache_and_MySQL"><a href="#Install_Apache_and_MySQL" class="headerlink" title="Install Apache and MySQL"></a>Install Apache and MySQL</h3><p>Apache is a server application for communicating over the HTTP protocol. Apache runs on operating systems such as Unix, Linux, Microsoft Windows, and other operating systems.</p>
<p>Apache play an important role in the development of the internet and the world wide web.</p>
<p>MySQL is the database management free open source most popular on the world, MySQL has high speed, stability and ease of use, portability, operating on multiple operating systems offer a large system is very powerful utility functions.</p>
<p>With the speed and high security, MySQL is well suited for applications that access databases on the internet.</p>
<p>Use the following command to install :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install httpd mysql mysql-server</span><br></pre></td></tr></table></figure></p>
<p>Allow start services when OS boot :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig httpd on&#10;chkconfig mysqld on&#10;service httpd start&#10;service mysqld start</span><br></pre></td></tr></table></figure></p>
<p>Set the password for MySQL<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/mysql_secure_installation</span><br></pre></td></tr></table></figure></p>
<p>Because we not have a password for the root account so you press Enter to skip.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Enter current password for root (enter for none):</span><br></pre></td></tr></table></figure></p>
<p>Select Yes to set the password for the MySQL root account.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set root password? [Y/n] Y</span><br></pre></td></tr></table></figure></p>
<p>Enter and confirm your password, remove the anonymous user, select Yes<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Remove anonymous users? [Y/n] Y</span><br></pre></td></tr></table></figure></p>
<p>Allow remote login to MySQL as root account, select No.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Disallow root login remotely? [Y/n] n</span><br></pre></td></tr></table></figure></p>
<p>Delete the test database, select Yes<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Remove test database and access to it? [Y/n] Y</span><br></pre></td></tr></table></figure></p>
<p>Reload privilege tables, select Yes<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Reload privilege tables now? [Y/n] Y</span><br></pre></td></tr></table></figure></p>
<h3 id="Turn_off_SELinux"><a href="#Turn_off_SELinux" class="headerlink" title="Turn off SELinux"></a>Turn off SELinux</h3><p>SELinux is a security feature advanced for Linux operating system, when installing the system you need to turn off this feature to get the process done smoothly, after successful you can turn on back if you want.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/selinux/config</span><br></pre></td></tr></table></figure></p>
<p>Change the file content :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELINUX=disabled</span><br></pre></td></tr></table></figure></p>
<p>Press CTRL + O to save the file and press CTRL + X to exit.</p>
<h3 id="Set_up_the_Hostname"><a href="#Set_up_the_Hostname" class="headerlink" title="Set up the Hostname"></a>Set up the Hostname</h3><p>By default when installing a new OS Centos not set the hostname, so we need to setting with the command :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/hosts</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 localhost&#10;::1         localhost localhost.localdomain localhost6 localhost6.localdomain6&#10;10.168.226.151 iZ23lttzrggZ</span><br></pre></td></tr></table></figure>
<p>Add your domain name or host name that you set on both the command line, save the file and exit, the server name will be changed when restarting.</p>
<h3 id="Configuring_the_Firewall"><a href="#Configuring_the_Firewall" class="headerlink" title="Configuring the Firewall"></a>Configuring the Firewall</h3><p>We do not want to turn off the firewall because it’s quite important, so you need to add rules to allow port 80 for HTTP and port 443 for HTTPS.</p>
<p>In the Centos OS, you can configuration firewall by editing files iptables and ip6tables.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/sysconfig/iptables</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> # Firewall configuration written by system-config-firewall&#10;[root@iZ23lttzrggZ lmmbao]# vi /etc/sysconfig/iptables&#10;# Firewall configuration written by system-config-firewall&#10;# Manual customization of this file is not recommended&#10;*filter&#10;:INPUT ACCEPT [0:0]&#10;:FORWARD ACCEPT [0:0]&#10;:OUTPUT ACCEPT [0:0]&#10;-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT&#10;-A INPUT -p icmp -j ACCEPT&#10;-A INPUT -i lo -j ACCEPT&#10;-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT&#10;-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT&#10;-A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -j ACCEPT&#10;-A INPUT -j REJECT --reject-with icmp-host-prohibited&#10;-A FORWARD -j REJECT --reject-with icmp-host-prohibited&#10;COMMIT</span><br></pre></td></tr></table></figure>
<p>Press Enter to create a new line after the line of port 22, copy the following two commands and right click on the window to the Paste command.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT&#10;-A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -j ACCEPT</span><br></pre></td></tr></table></figure></p>
<p>Press CTRL + O to save the file and press CTRL + X to exit.</p>
<p>The same applies for IP6 firewall :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/sysconfig/ip6tables</span><br></pre></td></tr></table></figure></p>
<p>Add these lines to the file.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT&#10;-A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -j ACCEPT</span><br></pre></td></tr></table></figure></p>
<p>After you finish editing both files, run the commands to apply the new rules for firewall.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/iptables restart&#10;/etc/init.d/ip6tables restart</span><br></pre></td></tr></table></figure></p>
<p>Allow turn on the firewall when reboot the operating system.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig iptables on&#10;chkconfig ip6tables on</span><br></pre></td></tr></table></figure></p>
<p>Finally, we need to restart the system to apply the changes to the SELinux and Hostname.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure></p>
<h3 id="Install_PHP_and_phpMyAdmin"><a href="#Install_PHP_and_phpMyAdmin" class="headerlink" title="Install PHP and phpMyAdmin"></a>Install PHP and phpMyAdmin</h3><p>Because we use MySQL database management system, so we need to install phpMyAdmin program management.</p>
<p>phpMyAdmin is a free open source tool written by PHP language to manage MySQL database via a web browser.</p>
<p>It can create, modify or delete databases, tables, fields or records, perform SQL statements, or managing users and permissions.</p>
<p>The command to install PHP and the packages :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install php php-mysql php-gd php-imap php-ldap php-mbstring php-odbc php-pear php-xml php-xmlrpc php-pecl-apc php-soap</span><br></pre></td></tr></table></figure></p>
<p>Restarting the Apache service :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service httpd restart</span><br></pre></td></tr></table></figure></p>
<p>And install phpMyadmin :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm --import http://dag.wieers.com/rpm/packages/RPM-GPG-KEY.dag.txt&#10;yum install http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm&#10;yum -y install phpmyadmin</span><br></pre></td></tr></table></figure></p>
<p>Editing the virtual host file to allow remote login to the phpMyadmin.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  GNU nano 2.0.9                File: /etc/httpd/conf.d/phpmyadmin.conf                                       &#10;#&#10;#  Web application to manage MySQL&#10;#&#10;&#10;&#60;Directory &#34;/usr/share/phpmyadmin&#34;&#62;&#10;  Order Deny,Allow&#10;  Deny from all&#10;  Allow from 127.0.0.1&#10;&#60;/Directory&#62;&#10;&#10;Alias /phpmyadmin /usr/share/phpmyadmin&#10;Alias /phpMyAdmin /usr/share/phpmyadmin&#10;Alias /mysqladmin /usr/share/phpmyadmin</span><br></pre></td></tr></table></figure></p>
<p>Replace text “Allow from 127.0.0.1” to “Allow from all”, save the file and exit.</p>
<p>Editing the configuration file for the phpMyadmin<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /usr/share/phpmyadmin/config.inc.php</span><br></pre></td></tr></table></figure></p>
<p>Replace text :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$cfg[&#39;Servers&#39;][$i][&#39;auth_type&#39;] = &#39;cookie&#39;;</span><br></pre></td></tr></table></figure></p>
<p>To：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$cfg[&#39;Servers&#39;][$i][&#39;auth_type&#39;] = &#39;http&#39;;</span><br></pre></td></tr></table></figure></p>
<p>Save the file and exit, restarting the Apache service :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service httpd restart</span><br></pre></td></tr></table></figure></p>
<p>After successfully installed phpMyadmin, you can check at the address :<br><a href="http://your-domain/phpmyadmin" target="_blank" rel="external">http://your-domain/phpmyadmin</a><br>Login with account :  root / your_password<br>With Password has been set at step install MySQL database in the above.<br><img src="http://i.imgur.com/LKpTc2C.jpg" alt=""><br>Note: If you install the Redmine system on the PC or in a virtual machine which not on the dedicated server, we need to switch the application phpMyadmin to run on port 8080 because port 80 will be used for Redmine in the next steps.</p>
<p>We need add a port 8080 to the firewall and change the VirtualHost for phpMyadmin.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/sysconfig/iptables</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># Firewall configuration written by system-config-firewall&#10;# Manual customization of this file is not recommended&#10;*filter&#10;:INPUT ACCEPT [0:0]&#10;:FORWARD ACCEPT [0:0]&#10;:OUTPUT ACCEPT [0:0]&#10;-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT&#10;-A INPUT -p icmp -j ACCEPT&#10;-A INPUT -i lo -j ACCEPT&#10;-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT&#10;-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT&#10;-A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -j ACCEPT&#10;-A INPUT -j REJECT --reject-with icmp-host-prohibited&#10;-A FORWARD -j REJECT --reject-with icmp-host-prohibited&#10;COMMIT</span><br></pre></td></tr></table></figure>
<p>Add the command line :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT</span><br></pre></td></tr></table></figure></p>
<p>The same applies for IP6 firewall :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/sysconfig/ip6tables</span><br></pre></td></tr></table></figure></p>
<p>Add the command line :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT</span><br></pre></td></tr></table></figure></p>
<p>Restarting firewall service to allow the new port.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/iptables restart&#10;/etc/init.d/ip6tables restart</span><br></pre></td></tr></table></figure></p>
<p>Editing the VirtualHost file to run phpMyadmin on the port 8080<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/httpd/conf.d/phpmyadmin.conf</span><br></pre></td></tr></table></figure></p>
<p>change<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#&#10;#  Web application to manage MySQL&#10;# &#10;&#60;Directory &#34;/usr/share/phpmyadmin&#34;&#62;&#10;  Order Deny,Allow&#10;  Deny from all&#10;  Allow from all&#10;&#60;/Directory&#62;&#10;Alias /phpmyadmin /usr/share/phpmyadmin&#10;Alias /phpMyAdmin /usr/share/phpmyadmin&#10;Alias /mysqladmin /usr/share/phpmyadmin</span><br></pre></td></tr></table></figure></p>
<p>to:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;VirtualHost *:8080&#62;&#10;    DocumentRoot /usr/share/phpmyadmin/&#10;    ServerName your_domain.com&#10;&#60;/VirtualHost&#62;</span><br></pre></td></tr></table></figure></p>
<p>Next, add the command to allows listening on the port 8080 in the file “httpd.conf”<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/httpd/conf/httpd.conf</span><br></pre></td></tr></table></figure></p>
<p>Add the command line :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Listen 8080</span><br></pre></td></tr></table></figure></p>
<p>Save the file and exit, restarting the Apache service :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service httpd restart</span><br></pre></td></tr></table></figure></p>
<p>Now, phpMyadmin will run on the port 8080 at the address :</p>
<p><a href="http://your-domain:8080" target="_blank" rel="external">http://your-domain:8080</a><br><img src="http://i.imgur.com/UP258Q3.jpg" alt=""></p>
<h3 id="Install_Ruby"><a href="#Install_Ruby" class="headerlink" title="Install Ruby"></a>Install Ruby</h3><p>Ruby is a object-oriented programming language, capable of reflection. Syntax inherited from Ada and Perl with object-oriented features of Smalltalk, and also share some features with Python, Lisp, Dylan and CLU, Ruby is a single phase interpreter.</p>
<p>Ruby provides programming patterns, including functional programming, object-oriented, imperative, reflective, it uses dynamic variable and automatic memory management.</p>
<p>Install Ruby interpreter with version management program RVM.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\curl -L https://get.rvm.io | bash</span><br></pre></td></tr></table></figure></p>
<p>After successful, we will launch RVM<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile.d/rvm.sh</span><br></pre></td></tr></table></figure></p>
<p>The following command will list the versions of Ruby to install :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rvm list known</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ /]# source /etc/profile.d/rvm.sh&#10;[root@iZ23lttzrggZ /]# rvm list known&#10;# MRI Rubies&#10;[ruby-]1.8.6[-p420]&#10;[ruby-]1.8.7[-head] # security released on head&#10;[ruby-]1.9.1[-p431]&#10;[ruby-]1.9.2[-p330]&#10;[ruby-]1.9.3[-p551]&#10;[ruby-]2.0.0[-p598]&#10;[ruby-]2.1.4&#10;[ruby-]2.1[.5]&#10;[ruby-]2.1-head&#10;ruby-head&#10;&#10;# for forks use: rvm install ruby-head-&#60;name&#62; --url https://github.com/github/ruby.git --branch 2.1&#10;&#10;# JRuby&#10;jruby-1.6.8&#10;jruby[-1.7.17]&#10;jruby-head&#10;&#10;# Rubinius&#10;rbx-1.3.3&#10;rbx-2.0.0</span><br></pre></td></tr></table></figure>
<p>We choose the stable version [ruby-] 1.9.3 [-p551], and execute the following command :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rvm install 1.9.3</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby-1.9.3-p551 - #extracting rubygems-2.4.5....&#10;ruby-1.9.3-p551 - #removing old rubygems.........&#10;ruby-1.9.3-p551 - #installing rubygems-2.4.5..................&#10;ruby-1.9.3-p551 - #gemset created /usr/local/rvm/gems/ruby-1.9.3-p551@global&#10;ruby-1.9.3-p551 - #importing gemset /usr/local/rvm/gemsets/global.gems...........................................................&#10;ruby-1.9.3-p551 - #generating global wrappers........&#10;ruby-1.9.3-p551 - #gemset created /usr/local/rvm/gems/ruby-1.9.3-p551&#10;ruby-1.9.3-p551 - #importing gemsetfile /usr/local/rvm/gemsets/default.gems evaluated to empty gem list&#10;ruby-1.9.3-p551 - #generating default wrappers........&#10;ruby-1.9.3-p551 - #adjusting #shebangs for (gem irb erb ri rdoc testrb rake).&#10;Install of ruby-1.9.3-p551 - #complete</span><br></pre></td></tr></table></figure>
<p>The installation process is pretty long time, but you do not need any intervention, after successful, you check with the following command :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby -v</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ /]# ruby -v&#10;ruby 1.9.3p551 (2014-11-13 revision 48407) [x86_64-linux]&#10;[root@iZ23lttzrggZ /]#</span><br></pre></td></tr></table></figure>
<h3 id="Install_Rubygems"><a href="#Install_Rubygems" class="headerlink" title="Install Rubygems"></a>Install Rubygems</h3><p>Rubygems is a Ruby’s packages management program, very popular in applications written by Ruby language and the Ruby On Rails framework.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install rubygems</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ /]# yum -y install rubygems&#10;Loaded plugins: security&#10;Setting up Install Process&#10;Resolving Dependencies&#10;--&#62; Running transaction check&#10;---&#62; Package rubygems.noarch 0:1.3.7-5.el6 will be installed&#10;--&#62; Processing Dependency: ruby(abi) = 1.8 for package: rubygems-1.3.7-5.el6.noarch&#10;--&#62; Processing Dependency: ruby-rdoc for package: rubygems-1.3.7-5.el6.noarch&#10;--&#62; Processing Dependency: /usr/bin/ruby for package: rubygems-1.3.7-5.el6.noarch&#10;--&#62; Running transaction check&#10;---&#62; Package ruby.x86_64 0:1.8.7.374-3.el6_6 will be installed&#10;---&#62; Package ruby-libs.x86_64 0:1.8.7.374-3.el6_6 will be installed&#10;--&#62; Processing Dependency: libreadline.so.5()(64bit) for package: ruby-libs-1.8.7.374-3.el6_6.x86_64&#10;---&#62; Package ruby-rdoc.x86_64 0:1.8.7.374-3.el6_6 will be installed&#10;--&#62; Processing Dependency: ruby-irb = 1.8.7.374-3.el6_6 for package: ruby-rdoc-1.8.7.374-3.el6_6.x86_64&#10;--&#62; Running transaction check&#10;---&#62; Package compat-readline5.x86_64 0:5.2-17.1.el6 will be installed&#10;---&#62; Package ruby-irb.x86_64 0:1.8.7.374-3.el6_6 will be installed&#10;--&#62; Finished Dependency Resolution&#10;&#10;Dependencies Resolved&#10;&#10;==============================================================================================================&#10; Package                       Arch                Version                         Repository            Size&#10;==============================================================================================================&#10;Installing:&#10; rubygems                      noarch              1.3.7-5.el6                     base                 207 k&#10;Installing for dependencies:&#10; compat-readline5              x86_64              5.2-17.1.el6                    base                 130 k&#10; ruby                          x86_64              1.8.7.374-3.el6_6               updates              538 k&#10; ruby-irb                      x86_64              1.8.7.374-3.el6_6               updates              317 k&#10; ruby-libs                     x86_64              1.8.7.374-3.el6_6               updates              1.7 M&#10; ruby-rdoc                     x86_64              1.8.7.374-3.el6_6               updates              380 k&#10;&#10;Transaction Summary&#10;==============================================================================================================&#10;Install       6 Package(s)&#10;&#10;Total download size: 3.2 M&#10;Installed size: 11 M&#10;Downloading Packages:&#10;(1/6): compat-readline5-5.2-17.1.el6.x86_64.rpm                                        | 130 kB     00:00     &#10;(2/6): ruby-1.8.7.374-3.el6_6.x86_64.rpm                                               | 538 kB     00:00     &#10;(3/6): ruby-irb-1.8.7.374-3.el6_6.x86_64.rpm                                           | 317 kB     00:00     &#10;(4/6): ruby-libs-1.8.7.374-3.el6_6.x86_64.rpm                                          | 1.7 MB     00:00     &#10;(5/6): ruby-rdoc-1.8.7.374-3.el6_6.x86_64.rpm                                          | 380 kB     00:00     &#10;(6/6): rubygems-1.3.7-5.el6.noarch.rpm                                                 | 207 kB     00:00     &#10;--------------------------------------------------------------------------------------------------------------&#10;Total                                                                         3.8 MB/s | 3.2 MB     00:00     &#10;Running rpm_check_debug&#10;Running Transaction Test&#10;Transaction Test Succeeded&#10;Running Transaction&#10;  Installing : compat-readline5-5.2-17.1.el6.x86_64                                                       1/6 &#10;  Installing : ruby-libs-1.8.7.374-3.el6_6.x86_64                                                         2/6 &#10;  Installing : ruby-1.8.7.374-3.el6_6.x86_64                                                              3/6 &#10;  Installing : ruby-irb-1.8.7.374-3.el6_6.x86_64                                                          4/6 &#10;  Installing : ruby-rdoc-1.8.7.374-3.el6_6.x86_64                                                         5/6 &#10;  Installing : rubygems-1.3.7-5.el6.noarch                                                                6/6 &#10;  Verifying  : ruby-libs-1.8.7.374-3.el6_6.x86_64                                                         1/6 &#10;  Verifying  : compat-readline5-5.2-17.1.el6.x86_64                                                       2/6 &#10;  Verifying  : ruby-1.8.7.374-3.el6_6.x86_64                                                              3/6 &#10;  Verifying  : ruby-irb-1.8.7.374-3.el6_6.x86_64                                                          4/6 &#10;  Verifying  : rubygems-1.3.7-5.el6.noarch                                                                5/6 &#10;  Verifying  : ruby-rdoc-1.8.7.374-3.el6_6.x86_64                                                         6/6 &#10;&#10;Installed:&#10;  rubygems.noarch 0:1.3.7-5.el6                                                                               &#10;&#10;Dependency Installed:&#10;  compat-readline5.x86_64 0:5.2-17.1.el6                 ruby.x86_64 0:1.8.7.374-3.el6_6                     &#10;  ruby-irb.x86_64 0:1.8.7.374-3.el6_6                    ruby-libs.x86_64 0:1.8.7.374-3.el6_6                &#10;  ruby-rdoc.x86_64 0:1.8.7.374-3.el6_6                  &#10;&#10;Complete!&#10;[root@iZ23lttzrggZ /]#</span><br></pre></td></tr></table></figure>
<h3 id="Install_Passenger"><a href="#Install_Passenger" class="headerlink" title="Install Passenger"></a>Install Passenger</h3><p>The full name of the Passenger is Phusion Passenger, known as mod_rails or mod_rack, it is a web application intergrate with Apache and it can operate as a standalone web server support for the Ruby On Rails applications.</p>
<p>Execute the following command :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem install passenger</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ /]# gem install passenger&#10;Fetching: rack-1.5.2.gem (100%)&#10;Successfully installed rack-1.5.2&#10;Fetching: daemon_controller-1.2.0.gem (100%)&#10;Successfully installed daemon_controller-1.2.0&#10;Fetching: passenger-4.0.55.gem (100%)&#10;Building native extensions.  This could take a while...&#10;Successfully installed passenger-4.0.55&#10;unable to convert &#34;\x89&#34; from ASCII-8BIT to UTF-8 for test/multipart/binary, skipping&#10;Installing ri documentation for rack-1.5.2&#10;Installing ri documentation for daemon_controller-1.2.0&#10;Installing ri documentation for passenger-4.0.55&#10;3 gems installed&#10;[root@iZ23lttzrggZ /]#</span><br></pre></td></tr></table></figure>
<p>After last command. Execute the following command :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passenger-install-apache2-module</span><br></pre></td></tr></table></figure></p>
<p>执行过程：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--------------------------------------------&#10;Almost there!&#10;&#10;Please edit your Apache configuration file, and add these lines:&#10;&#10;   LoadModule passenger_module /usr/local/rvm/gems/ruby-1.9.3-p551/gems/passenger-4.0.55/buildout/apache2/mod_passenger.so&#10;   &#60;IfModule mod_passenger.c&#62;&#10;     PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-p551/gems/passenger-4.0.55&#10;     PassengerDefaultRuby /usr/local/rvm/gems/ruby-1.9.3-p551/wrappers/ruby&#10;   &#60;/IfModule&#62;&#10;&#10;After you restart Apache, you are ready to deploy any number of web&#10;applications on Apache, with a minimum amount of configuration!&#10;&#10;Press ENTER to continue.&#10;&#10;&#10;--------------------------------------------&#10;&#10;Deploying a web application: an example&#10;&#10;Suppose you have a web application in /somewhere. Add a virtual host to your&#10;Apache configuration file and set its DocumentRoot to /somewhere/public:&#10;&#10;   &#60;VirtualHost *:80&#62;&#10;      ServerName www.yourhost.com&#10;      # !!! Be sure to point DocumentRoot to &#39;public&#39;!&#10;      DocumentRoot /somewhere/public    &#10;      &#60;Directory /somewhere/public&#62;&#10;         # This relaxes Apache security settings.&#10;         AllowOverride all&#10;         # MultiViews must be turned off.&#10;         Options -MultiViews&#10;         # Uncomment this if you&#39;re on Apache &#62;= 2.4:&#10;         #Require all granted&#10;      &#60;/Directory&#62;&#10;   &#60;/VirtualHost&#62;&#10;&#10;And that&#39;s it! You may also want to check the Users Guide for security and&#10;optimization tips, troubleshooting and other useful information:&#10;&#10;  /usr/local/rvm/gems/ruby-1.9.3-p551/gems/passenger-4.0.55/doc/Users guide Apache.html&#10;  https://www.phusionpassenger.com/documentation/Users%20guide%20Apache.html&#10;&#10;Enjoy Phusion Passenger, a product of Phusion (www.phusion.nl) :-)&#10;https://www.phusionpassenger.com&#10;&#10;Phusion Passenger is a trademark of Hongli Lai &#38; Ninh Bui.&#10;[root@iZ23lttzrggZ /]#</span><br></pre></td></tr></table></figure></p>
<p>After completed, we copy a notification block in the window to create the configuration file in the next steps (select block notification and press C to copy).<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LoadModule passenger_module /usr/local/rvm/gems/ruby-1.9.3-p551/gems/passenger-4.0.55/buildout/apache2/mod_passenger.so&#10;&#60;IfModule mod_passenger.c&#62;&#10;   PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-p551/gems/passenger-4.0.55&#10;   PassengerDefaultRuby /usr/local/rvm/gems/ruby-1.9.3-p551/wrappers/ruby&#10;&#60;/IfModule&#62;</span><br></pre></td></tr></table></figure></p>
<p>Create a new virtual host file for Passenger :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/httpd/conf.d/passenger.conf</span><br></pre></td></tr></table></figure></p>
<p>Paste the command blocks into the empty file and save it, then restart the Apache service.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service httpd restart</span><br></pre></td></tr></table></figure></p>
<p><strong>Success!!!!!</strong><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ /]# service httpd restart&#10;Stopping httpd:                                            [  OK  ]&#10;Starting httpd:                                            [  OK  ]&#10;[root@iZ23lttzrggZ /]#</span><br></pre></td></tr></table></figure></p>
<h3 id="Create_Database_for_Redmine"><a href="#Create_Database_for_Redmine" class="headerlink" title="Create Database for Redmine"></a>Create Database for Redmine</h3><p>Use MySQLAdmin to create an empty database for Redmine, saved password to fill in the configuration file in the next steps.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql --user=root --password=root_password_mysql&#10;create database redmine_db character set utf8;&#10;create user &#39;redmine_admin&#39;@&#39;localhost&#39; identified by &#39;your_new_password&#39;;&#10;grant all privileges on redmine_db.* to &#39;redmine_admin&#39;@&#39;localhost&#39;;&#10;quit;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ /]# mysql --user=root --password=root_password_mysql&#10;Welcome to the MySQL monitor.  Commands end with ; or \g.&#10;Your MySQL connection id is 19&#10;Server version: 5.1.73 Source distribution&#10;&#10;Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.&#10;&#10;Oracle is a registered trademark of Oracle Corporation and/or its&#10;affiliates. Other names may be trademarks of their respective&#10;owners.&#10;&#10;Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.&#10;&#10;mysql&#62; create database redmine_db character set utf8;&#10;Query OK, 1 row affected (0.00 sec)&#10;&#10;mysql&#62; create user &#39;redmine_admin&#39;@&#39;localhost&#39; identified by &#39;your_new_password&#39;;&#10;Query OK, 0 rows affected (0.00 sec)&#10;&#10;mysql&#62; grant all privileges on redmine_db.* to &#39;redmine_admin&#39;@&#39;localhost&#39;;&#10;Query OK, 0 rows affected (0.00 sec)&#10;&#10;mysql&#62; quit;&#10;Bye&#10;[root@iZ23lttzrggZ /]#</span><br></pre></td></tr></table></figure>
<h3 id="Install_Redmine"><a href="#Install_Redmine" class="headerlink" title="Install Redmine"></a>Install Redmine</h3><p>Redmine is a main program of the project management system, we will download and install the program from the website of Redmine.</p>
<p>Download Redmine version 2.5.x to directory “/var/www” on the Centos OS.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /var/www&#10;wget http://www.redmine.org/releases/redmine-2.5.0.tar.gz</span><br></pre></td></tr></table></figure></p>
<p>Extract the folder and rename directory<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar xvfz redmine-2.5.0.tar.gz&#10;mv redmine-2.5.0 redmine&#10;rm -rf redmine-2.5.0.tar.gz</span><br></pre></td></tr></table></figure></p>
<p>Configuring the Database</p>
<p>The next, we need to configure the database was created from the above steps.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /var/www/redmine/config&#10;cp database.yml.example database.yml&#10;nano database.yml</span><br></pre></td></tr></table></figure></p>
<p>database.yml infomations:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># Default setup is given for MySQL with ruby1.9. If you&#39;re running Redmine&#10;# with MySQL and ruby1.8, replace the adapter name with `mysql`.&#10;# Examples for PostgreSQL, SQLite3 and SQL Server can be found at the end.&#10;# Line indentation must be 2 spaces (no tabs).&#10;&#10;production:&#10;  adapter: mysql2&#10;  database: redmine&#10;  host: localhost&#10;  username: root&#10;  password: &#34;&#34;&#10;  encoding: utf8&#10;&#10;development:&#10;  adapter: mysql2&#10;  database: redmine_development&#10;  host: localhost&#10;  username: root&#10;  password: &#34;&#34;&#10;  encoding: utf8&#10;&#10;# Warning: The database defined as &#34;test&#34; will be erased and&#10;# re-generated from your development database when you run &#34;rake&#34;.&#10;# Do not set this db to the same as development or production.&#10;test:&#10;# Default setup is given for MySQL with ruby1.9. If you&#39;re running Redmine&#10;# with MySQL and ruby1.8, replace the adapter name with `mysql`.&#10;# Examples for PostgreSQL, SQLite3 and SQL Server can be found at the end.&#10;# Line indentation must be 2 spaces (no tabs).&#10;&#10;production:&#10;   adapter: mysql2&#10;  database: redmine&#10;  host: localhost&#10;  username: root&#10;  password: &#34;&#34;&#10;  encoding: utf8&#10;&#10;development:&#10;  adapter: mysql2&#10;  database: redmine_development&#10;  host: localhost&#10;  username: root&#10;  password: &#34;&#34;&#10;  encoding: utf8&#10;&#10;# Warning: The database defined as &#34;test&#34; will be erased and&#10;# re-generated from your development database when you run &#34;rake&#34;.&#10;# Do not set this db to the same as development or production.&#10;test:&#10;  adapter: mysql2&#10;  database: redmine_test&#10;  host: localhost&#10;  username: root&#10;  password: &#34;&#34;&#10;  encoding: utf8&#10;&#10;# PostgreSQL configuration example&#10;#production:&#10;#  adapter: postgresql&#10;#  database: redmine&#10;#  host: localhost&#10;#  username: postgres&#10;#  password: &#34;postgres&#34;&#10; &#10;# SQLite3 configuration example&#10;#production:&#10;#  adapter: sqlite3&#10;#  database: db/redmine.sqlite3&#10; &#10;# SQL Server configuration example&#10;#production:&#10;#  adapter: sqlserver&#10;#  database: redmine&#10;#  host: localhost&#10;#  username: jenkins&#10;#  password: jenkins</span><br></pre></td></tr></table></figure></p>
<p>Enter name for database, enter username and password of the database.<br>Change this:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">production:&#10;  adapter: mysql2&#10;  database: redmine&#10;  host: localhost&#10;  username: root&#10;  password: &#34;&#34;&#10;  encoding: utf8</span><br></pre></td></tr></table></figure></p>
<p>To:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">production:&#10;  adapter: mysql2&#10;  database: redmine_db&#10;  host: localhost&#10;  username: redmine_admin&#10;  password: &#34;LmmBao@2014&#34;&#10;  encoding: utf8</span><br></pre></td></tr></table></figure></p>
<p> Press CTRL + O to save the file and CTRL + X to exit.</p>
<h3 id="Setting_up_Rails"><a href="#Setting_up_Rails" class="headerlink" title="Setting up Rails"></a>Setting up Rails</h3><p>Install the package library support for Rails using the Bundle.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /var/www/redmine&#10;gem install bundler&#10;bundle install&#10;rake generate_secret_token</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ config]# cd /var/www/redmine&#10;[root@iZ23lttzrggZ redmine]# gem install bundler&#10;Fetching: bundler-1.7.9.gem (100%)&#10;Successfully installed bundler-1.7.9&#10;Installing ri documentation for bundler-1.7.9&#10;1 gem installed&#10;[root@iZ23lttzrggZ redmine]# bundle install&#10;Don&#39;t run Bundler as root. Bundler can ask for sudo if it is needed, and installing your bundle as root will&#10;break this application for all non-root users on this machine.&#10;Fetching gem metadata from https://rubygems.org/.........&#10;Resolving dependencies...&#10;Installing rake 10.4.2&#10;Installing i18n 0.6.11&#10;Installing multi_json 1.10.1&#10;Installing activesupport 3.2.17</span><br></pre></td></tr></table></figure>
<p><strong>*When i run bundle install command, an error occurred while installing rmagick (2.13.4), and Bundler cannot continue.</strong><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p551/gems/rmagick-2.13.4 for inspection.&#10;Results logged to /usr/local/rvm/gems/ruby-1.9.3-p551/extensions/x86_64-linux/1.9.1/rmagick-2.13.4/gem_make.out&#10;An error occurred while installing rmagick (2.13.4), and Bundler cannot continue.&#10;Make sure that `gem install rmagick -v &#39;2.13.4&#39;` succeeds before bundling.&#10;[root@iZ23lttzrggZ redmine]# yum install ImageMagick-devel</span><br></pre></td></tr></table></figure></p>
<p>Get solution from<a href="http://stackoverflow.com/questions/5201689/rmagick-gem-install-cant-find-magick-config" target="_blank" rel="external">Stack Overflow</a><br><img src="http://i.imgur.com/J8Dq8l3.jpg" alt="Stack Overflow"><br>Then run bundle install again.<br>Success!!<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Installing rmagick 2.13.4&#10;Installing rubyzip 1.1.6&#10;Installing websocket 1.2.1&#10;Installing selenium-webdriver 2.44.0&#10;Installing shoulda-context 1.0.2&#10;Installing shoulda-matchers 1.4.1&#10;Installing shoulda 3.3.2&#10;Installing yard 0.8.7.6&#10;Your bundle is complete!&#10;Use `bundle show [gemname]` to see where a bundled gem is installed.&#10;Post-install message from rmagick:&#10;Please report any bugs. See https://github.com/gemhome/rmagick/compare/RMagick_2-13-2...master and https://github.com/rmagick/rmagick/issues/18&#10;[root@iZ23lttzrggZ redmine]#</span><br></pre></td></tr></table></figure></p>
<p><img src="http://i.imgur.com/jm5adwC.jpg" alt=""><br>The next, we create the database table for the Redmine application.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RAILS_ENV=production rake db:migrate&#10;RAILS_ENV=production rake redmine:load_default_data</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ redmine]# RAILS_ENV=production rake redmine:load_default_data&#10;&#10;Select language: ar, az, bg, bs, ca, cs, da, de, el, en, en-GB, es, et, eu, fa, fi, fr, gl, he, hr, hu, id, it, ja, ko, lt, lv, mk, mn, nl, no, pl, pt, pt-BR, ro, ru, sk, sl, sq, sr, sr-YU, sv, th, tr, uk, vi, zh, zh-TW [en] &#10;====================================&#10;Default configuration data loaded.&#10;[root@iZ23lttzrggZ redmine]#</span><br></pre></td></tr></table></figure>
<h3 id="Activate_FCGI"><a href="#Activate_FCGI" class="headerlink" title="Activate FCGI"></a>Activate FCGI</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /var/www/redmine/public&#10;mkdir plugin_assets&#10;cp dispatch.fcgi.example dispatch.fcgi&#10;cp htaccess.fcgi.example .htaccess</span><br></pre></td></tr></table></figure>
<h3 id="Setting_up_Apache_and_FastCGI"><a href="#Setting_up_Apache_and_FastCGI" class="headerlink" title="Setting up Apache and FastCGI"></a>Setting up Apache and FastCGI</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /var/www/&#10;rpm --import https://fedoraproject.org/static/0608B895.txt&#10;wget http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm&#10;rpm -ivh epel-release-6-8.noarch.rpm&#10;yum -y install mod_fcgid&#10;rm -rf epel-release-6-8.noarch.rpm</span><br></pre></td></tr></table></figure>
<h3 id="Creating_Files_Directory"><a href="#Creating_Files_Directory" class="headerlink" title="Creating Files Directory"></a>Creating Files Directory</h3><p>This directory contains data files generated during the operation of Redmine as document or image file, we create a new directory in the “/opt”.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /opt/redmine/files&#10;chown -R apache:apache /opt/redmine&#10;cd /var/www/redmine/config&#10;cp configuration.yml.example configuration.yml&#10;nano configuration.yml</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> 94   # Absolute path to the directory where attachments are stored.&#10; 95   # The default is the &#39;files&#39; directory in your Redmine instance.&#10; 96   # Your Redmine instance needs to have write permission on this&#10; 97   # directory.&#10; 98   # Examples:&#10; 99   # attachments_storage_path: /var/redmine/files&#10;100   # attachments_storage_path: D:/redmine/files&#10;101   attachments_storage_path:</span><br></pre></td></tr></table></figure>
<p>Enter the directory path containing the data files you just created in the previous step into the line “attachments_storage_path”.</p>
<p>Note: You must add a space at the begin of the path “/opt/redmine/files” after character “:”<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> 94   # Absolute path to the directory where attachments are stored.&#10; 95   # The default is the &#39;files&#39; directory in your Redmine instance.&#10; 96   # Your Redmine instance needs to have write permission on this&#10; 97   # directory.&#10; 98   # Examples:&#10; 99   # attachments_storage_path: /var/redmine/files&#10;100   # attachments_storage_path: D:/redmine/files&#10;101   attachments_storage_path: /opt/redmine/files</span><br></pre></td></tr></table></figure></p>
<h3 id="Configuring_Email"><a href="#Configuring_Email" class="headerlink" title="Configuring Email"></a>Configuring Email</h3><p>Another very important function of Redmine is using email to notify members when the contents of each project changes, Redmine can use many different methods to send email that is Sendmail, SMTP, GMail …</p>
<p>To configure the email we will edit the configuration file.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /var/www/redmine/config/configuration.yml</span><br></pre></td></tr></table></figure></p>
<p>The simplest is you use features of the default SendMail in the Centos OS by settings :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">email_delivery:&#10; delivery_method: :sendmail</span><br></pre></td></tr></table></figure></p>
<p>Note : Do not use the Tab key to indent when editing the configuration file, you need to use the space bar on the keyboard.</p>
<p>If you use GMail’s SMTP, you need to register an email account with the login methods used password normal and disable two-step authentication by smart phone.</p>
<p>Enter your Gmail account as below :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">email_delivery:&#10; delivery_method: :smtp&#10; smtp_settings:&#10;      enable_starttls_auto: true&#10;      address: &#34;smtp.gmail.com&#34; &#10;      port: 587&#10;      domain: &#34;smtp.gmail.com&#34; &#10;      authentication: :plain&#10;      user_name: &#34;your_email@gmail.com&#34; &#10;      password: &#34;your_password&#34;</span><br></pre></td></tr></table></figure></p>
<p>Save the file configuration and exit.</p>
<h3 id="Create_Virtual_Host_for_Redmine"><a href="#Create_Virtual_Host_for_Redmine" class="headerlink" title="Create Virtual Host for Redmine"></a>Create Virtual Host for Redmine</h3><p>Create an Apache configuration file for the Redmine application at the port 80.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/httpd/conf.d/redmine.conf</span><br></pre></td></tr></table></figure></p>
<p>Copy the text below and paste into the editor window, note the information to change your domain name.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;VirtualHost *:80&#62;&#10;        ServerName your_domain&#10;        ServerAdmin your_domain@domain.com&#10;        DocumentRoot /var/www/redmine/public/&#10;        ErrorLog logs/redmine_error_log&#10;        &#60;Directory &#34;/var/www/redmine/public/&#34;&#62;&#10;                Options Indexes ExecCGI FollowSymLinks&#10;                Order allow,deny&#10;                Allow from all&#10;                AllowOverride all&#10;        &#60;/Directory&#62;&#10;&#60;/VirtualHost&#62;</span><br></pre></td></tr></table></figure>
<p>Save the file configuration and exit.</p>
<h3 id="Running_Redmine"><a href="#Running_Redmine" class="headerlink" title="Running Redmine"></a>Running Redmine</h3><p>Before execute Redmine in the first time, we must permission for the directory installed Redmine and restart Apache service.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /var/www&#10;chown -R apache:apache redmine&#10;chmod -R 755 redmine&#10;service httpd restart</span><br></pre></td></tr></table></figure></p>
<p><img src="http://i.imgur.com/xmLeYFY.jpg" alt=""><br>Redmine will run at the following address URL :<br><a href="http://your-domain" target="_blank" rel="external">http://your-domain</a><br>Login to system with an administrator account : admin / admin<br>You can change your password after successful login.<br>We can see Redmine has running but very primitive, in the next steps we will install the support plugins and customized Redmine to use professional.</p>
<h3 id="Install_Subversion"><a href="#Install_Subversion" class="headerlink" title="Install Subversion"></a>Install Subversion</h3><p>Subversion, also known as SVN, it is a version management system is very popular and easy to use, most programmers can use it competently.</p>
<p>We need to create a folder to store data for Redmine, the following command creates a directory and permissions for the Apache service.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /opt/repositories/svn&#10;chown -R apache:apache /opt/repositories/&#10;chmod 0755 /opt/repositories</span><br></pre></td></tr></table></figure></p>
<p>The following command install Subversion and the packages :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mod_dav_svn subversion subversion-ruby</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23lttzrggZ /]# yum install mod_dav_svn subversion subversion-ruby&#10;Loaded plugins: security&#10;Setting up Install Process&#10;Resolving Dependencies&#10;--&#62; Running transaction check&#10;---&#62; Package mod_dav_svn.x86_64 0:1.6.11-10.el6_5 will be installed&#10;---&#62; Package subversion.x86_64 0:1.6.11-10.el6_5 will be installed&#10;---&#62; Package subversion-ruby.x86_64 0:1.6.11-10.el6_5 will be installed&#10;--&#62; Finished Dependency Resolution&#10;&#10;Dependencies Resolved&#10;&#10;==============================================================================================================&#10; Package                       Arch                 Version                          Repository          Size&#10;==============================================================================================================&#10;Installing:&#10; mod_dav_svn                   x86_64               1.6.11-10.el6_5                  base                79 k&#10; subversion                    x86_64               1.6.11-10.el6_5                  base               2.3 M&#10; subversion-ruby               x86_64               1.6.11-10.el6_5                  base               382 k&#10;&#10;Transaction Summary&#10;==============================================================================================================&#10;Install       3 Package(s)&#10;&#10;Total size: 2.7 M&#10;Total download size: 2.3 M&#10;Installed size: 13 M&#10;Is this ok [y/N]: y&#10;Downloading Packages:&#10;subversion-1.6.11-10.el6_5.x86_64.rpm                                                  | 2.3 MB     00:00     &#10;Running rpm_check_debug&#10;Running Transaction Test&#10;Transaction Test Succeeded&#10;Running Transaction&#10;  Installing : subversion-1.6.11-10.el6_5.x86_64                                                          1/3 &#10;  Installing : subversion-ruby-1.6.11-10.el6_5.x86_64                                                     2/3 &#10;  Installing : mod_dav_svn-1.6.11-10.el6_5.x86_64                                                         3/3 &#10;  Verifying  : subversion-ruby-1.6.11-10.el6_5.x86_64                                                     1/3 &#10;  Verifying  : mod_dav_svn-1.6.11-10.el6_5.x86_64                                                         2/3 &#10;  Verifying  : subversion-1.6.11-10.el6_5.x86_64                                                          3/3 &#10;&#10;Installed:&#10;  mod_dav_svn.x86_64 0:1.6.11-10.el6_5                     subversion.x86_64 0:1.6.11-10.el6_5                &#10;  subversion-ruby.x86_64 0:1.6.11-10.el6_5                &#10;&#10;Complete!&#10;[root@iZ23lttzrggZ /]#</span><br></pre></td></tr></table></figure>
<p>The next, we will create a directory and copy the file called “Redmine.pm”, it responsible for interface data repository with Redmine and it is written by Perl language programming.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/lib64/perl5/vendor_perl/Apache&#10;ln -s /var/www/redmine/extra/svn/Redmine.pm /usr/lib64/perl5/vendor_perl/Apache/Redmine.pm</span><br></pre></td></tr></table></figure></p>
<p>Note : If you are using 32 bit Centos, change the path “/usr/lib64” to “/usr/lib”</p>
<p>After installation is complete, from the Redmine application, go to the page Administration&gt; Settings&gt; Repositories to check the results.</p>
<p>To support the authentication and access to data repository for each member, we need to create a virtual host for the Apache service can access Redmine database.<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/httpd/conf.d/subversion.conf</span><br></pre></td></tr></table></figure></p>
<p>Add the following lines to the end and still retain the old contents of the file :<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PerlLoadModule Apache::Redmine&#10;&#60;Location /svn&#62;&#10;        DAV svn&#10;        SVNParentPath &#34;/opt/repositories/svn&#34; &#10;        SVNListParentPath on&#10;        Order deny,allow&#10;        Deny from all&#10;        Satisfy any&#10;        LimitXMLRequestBody 0&#10;        SVNPathAuthz off&#10;        PerlAccessHandler Apache::Authn::Redmine::access_handler&#10;        PerlAuthenHandler Apache::Authn::Redmine::authen_handler&#10;        AuthType Basic&#10;        AuthName &#34;Subversion Repository&#34; &#10;        Require valid-user&#10;        RedmineDSN &#34;DBI:mysql:database=redmine_db;host=localhost:3306&#34; &#10;        RedmineDbUser &#34;redmine_admin&#34; &#10;        RedmineDbPass &#34;your_password_database_redmine&#34; &#10;&#60;/Location&#62;</span><br></pre></td></tr></table></figure></p>
<p>Note : You need to change the password in the “RedmineDbPass” to correct the database password of Redmine.</p>
<p>At this point, we have finished the basic settings for Redmine.</p>
<p>Thank you!</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/11/win8-jdk8-install/" itemprop="url">
                  Win8下安装Jdk1.8
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-11T18:58:58+08:00" content="2014-12-11">
              2014-12-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="u5DE5_u5177/_u539F_u6599"><a href="#u5DE5_u5177/_u539F_u6599" class="headerlink" title="工具/原料"></a>工具/原料</h2><ol>
<li>Win8系统</li>
<li>JDK1.8</li>
</ol>
<h2 id="jdk_u5B89_u88C5"><a href="#jdk_u5B89_u88C5" class="headerlink" title="jdk安装"></a>jdk安装</h2><p>和windows安装其他软件一样，直接下一步，选择安装目录即可。先安装JDK，然后安装的JRE。我选的目录是：D:\Java</p>
<h2 id="u914D_u7F6E_u73AF_u5883_u53D8_u91CF"><a href="#u914D_u7F6E_u73AF_u5883_u53D8_u91CF" class="headerlink" title="配置环境变量"></a>配置环境变量</h2><ol>
<li>这里先右键“我的电脑”–&gt;“属性”–&gt;”高级系统设置”，如图<br><img src="http://i.imgur.com/wj9MIrI.jpg" alt=""></li>
<li>选择“环境变量”，鼠标定位到下面的框中，在系统变量（S）中选择“新建”，如图<br><img src="http://i.imgur.com/dKkf12g.jpg" alt=""><br>分别设置JAVA_HOME（JDK安装目录），PATH（JDK中bin目录），CLASSPATH（JDK目录下lib中的tools.jar和JRE目录下lib中的rt.jar），这里需要注意新建CLASSPATH时需要加上“.；”,两个jar包路径之间用分号相隔,如图<br>新建JAVA_HOME并作如下设置：<br>变量名：JAVA_HOME<br>变量值：D:\Java\jdk1.8.0_20<br>编辑Path,添加如下内容：<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">;%JAVA_HOME%\bin</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>新建CLASSPATH，并填入一下内容：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar</span><br></pre></td></tr></table></figure></p>
<h2 id="u6D4B_u8BD5"><a href="#u6D4B_u8BD5" class="headerlink" title="测试"></a>测试</h2><p>通过“cmd”命令打开DOS窗口，依次输入Java，Javaｃ，Java　-version 命令，如图所示即为安装正确。若提示“XXX不是内部命令”则需要重新安装配置。<br><img src="http://i.imgur.com/6v84qBD.jpg" alt=""><br><img src="http://i.imgur.com/jcQjbD2.jpg" alt=""><br><img src="http://i.imgur.com/BvXjpUW.jpg" alt=""></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/10/Linux-iptables-configuration/" itemprop="url">
                  Linux中iptables配置详细（转）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-10T20:58:58+08:00" content="2014-12-10">
              2014-12-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h3 id="u6587_u7AE0_u8F6C_u81EA_uFF1ALinux_u4E2Diptables_u914D_u7F6E_u8BE6_u7EC6"><a href="#u6587_u7AE0_u8F6C_u81EA_uFF1ALinux_u4E2Diptables_u914D_u7F6E_u8BE6_u7EC6" class="headerlink" title="文章转自：Linux中iptables配置详细"></a>文章转自：<a href="http://jsczxy2.iteye.com/blog/1436713" target="_blank" rel="external">Linux中iptables配置详细</a></h3><hr>
<p>无论如何，iptables是一个需要特别谨慎设置的东西，万一服务器不在你身边，而你贸然设置导致无法SSH，那就等着被老板骂吧，呵呵。。。</p>
<p>一下内容是为了防止这种情况发生而写的，当然很初级，不过一般服务器也够用了：</p>
<h3 id="1-__u9996_u5148_u4ECB_u7ECD_u4E00_u4E0B_u6307_u4EE4_u548C_u76F8_u5173_u914D_u7F6E_u6587_u4EF6"><a href="#1-__u9996_u5148_u4ECB_u7ECD_u4E00_u4E0B_u6307_u4EE4_u548C_u76F8_u5173_u914D_u7F6E_u6587_u4EF6" class="headerlink" title="1. 首先介绍一下指令和相关配置文件"></a>1. 首先介绍一下指令和相关配置文件</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#21551;&#21160;&#25351;&#20196;:service iptables start  &#10;&#37325;&#21551;&#25351;&#20196;:service iptables restart  &#10;&#20851;&#38381;&#25351;&#20196;:service iptables stop  &#10;  &#10;&#28982;&#21518;&#26159;&#30456;&#20851;&#37197;&#32622;:/etc/sysconfig/iptables  &#10;&#22914;&#20309;&#25805;&#20316;&#35813;&#37197;&#32622;&#21602;&#65311;  &#10;vim /etc/sysconfig/iptables  &#10;&#28982;&#21518;&#36827;&#21435;&#20462;&#25913;&#21363;&#21487;&#65292;&#20462;&#25913;&#23436;&#20102;&#24590;&#20040;&#21150;&#65311;&#36825;&#37324;&#24456;&#22810;&#20154;&#20250;&#24819;&#21040;/etc/rc.d/init.d/iptables save&#25351;&#20196;&#65292;&#20294;&#26159;&#19968;&#26086;&#20320;&#36825;&#20040;&#24178;&#20102;&#20320;&#21018;&#25165;&#30340;&#20462;&#25913;&#20869;&#23481;&#23601;&#30333;&#20570;&#20102;&#12290;&#12290;&#12290;  &#10;&#20855;&#20307;&#26041;&#27861;&#26159;&#65306;  &#10;&#21482;&#20462;&#25913;/etc/sysconfig/iptables &#20351;&#20854;&#29983;&#25928;&#30340;&#21150;&#27861;&#26159;&#20462;&#25913;&#22909;&#21518;&#20808;service iptables restart&#65292;&#28982;&#21518;&#25165;&#35843;&#29992;/etc/rc.d/init.d/iptables save&#65292;  &#10;&#22240;&#20026;/etc/rc.d/init.d/iptables save&#20250;&#22312;iptables&#26381;&#21153;&#21551;&#21160;&#26102;&#37325;&#26032;&#21152;&#36733;&#65292;&#35201;&#26159;&#22312;&#37325;&#21551;&#20043;&#21069;&#30452;&#25509;&#20808;&#35843;&#29992;&#20102;/etc/rc.d/init.d/iptables save&#37027;&#20040;&#20320;  &#10;&#30340;/etc/sysconfig/iptables &#37197;&#32622;&#23601;&#22238;&#28378;&#21040;&#19978;&#27425;&#21551;&#21160;&#26381;&#21153;&#30340;&#37197;&#32622;&#20102;&#65292;&#36825;&#28857;&#24517;&#39035;&#27880;&#24847;&#65281;&#65281;&#65281;</span><br></pre></td></tr></table></figure>
<h3 id="2-__u4E0B_u9762_u4ECB_u7ECD_u4E00_u4E9B_u6307_u4EE4_u7528_u6CD5_uFF08_u4E3B_u8981_u8FD8_u662Fman_iptables_u770B_u4E0B_u76F8_u5173_u8D44_u6599_u624D_u884C_uFF09"><a href="#2-__u4E0B_u9762_u4ECB_u7ECD_u4E00_u4E9B_u6307_u4EE4_u7528_u6CD5_uFF08_u4E3B_u8981_u8FD8_u662Fman_iptables_u770B_u4E0B_u76F8_u5173_u8D44_u6599_u624D_u884C_uFF09" class="headerlink" title="2. 下面介绍一些指令用法（主要还是man iptables看下相关资料才行）"></a>2. 下面介绍一些指令用法（主要还是man iptables看下相关资料才行）</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A&#65306;&#25351;&#23450;&#38142;&#21517;  &#10;-p&#65306;&#25351;&#23450;&#21327;&#35758;&#31867;&#22411;  &#10;-d&#65306;&#25351;&#23450;&#30446;&#26631;&#22320;&#22336;  &#10;--dport&#65306;&#25351;&#23450;&#30446;&#26631;&#31471;&#21475;&#65288;destination port &#30446;&#30340;&#31471;&#21475;&#65289;  &#10;--sport&#65306;&#25351;&#23450;&#28304;&#31471;&#21475;&#65288;source port &#28304;&#31471;&#21475;&#65289;  &#10;-j&#65306;&#25351;&#23450;&#21160;&#20316;&#31867;&#22411;</span><br></pre></td></tr></table></figure>
<h3 id="3-__u5982_u679C_u6211_u4E0D_u60F3_u4FEE_u6539_u6587_u4EF6_u76F4_u63A5_u6253_u547D_u4EE4_u53EF_u4EE5_u5417_uFF0C_u5F53_u7136_u6CA1_u95EE_u9898_uFF0C_u6B65_u9AA4_u5982_u4E0B_3A"><a href="#3-__u5982_u679C_u6211_u4E0D_u60F3_u4FEE_u6539_u6587_u4EF6_u76F4_u63A5_u6253_u547D_u4EE4_u53EF_u4EE5_u5417_uFF0C_u5F53_u7136_u6CA1_u95EE_u9898_uFF0C_u6B65_u9AA4_u5982_u4E0B_3A" class="headerlink" title="3. 如果我不想修改文件直接打命令可以吗，当然没问题，步骤如下:"></a>3. 如果我不想修改文件直接打命令可以吗，当然没问题，步骤如下:</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#20363;&#22914;&#25105;&#32473;SSH&#21152;&#25918;&#34892;&#30340;&#35821;&#21477;&#65306;  &#10;&#28155;&#21152;input&#35760;&#24405;&#65306; iptables -A INPUT -p tcp --dport 22 -j ACCEPT  &#10;&#28155;&#21152;output&#35760;&#24405;&#65306; iptables -A OUTPUT -p tcp --sport 22 -j ACCEPT  &#10;&#26368;&#21518;&#27880;&#24847;&#38656;&#35201;&#20877;&#25191;&#34892;&#19968;&#19979; /etc/init.d/iptables save&#65292;&#36825;&#26679;&#36825;&#20004;&#26465;&#35821;&#21477;&#23601;&#20445;&#23384;&#21040;&#21018;&#25165;&#37027;&#20010;/etc/sysconfig/iptables &#25991;&#20214;&#20013;&#20102;&#12290;</span><br></pre></td></tr></table></figure>
<h3 id="4-__u63A5_u4E0B_u6765_u8BF4_u660E_u4E00_u4E0B_u6B65_u9AA4_uFF0C_u5982_u679C_u673A_u5668_u4E0D_u5728_u6211_u8EAB_u8FB9_uFF0C_u6211_u53EA_u80FDSSH_u8FDB_u53BB_u505Aiptables_u89C4_u5219_uFF0C_u90A3_u4E48_u6211_u5FC5_u987B_u6CE8_u610F_u6BCF_u4E00_u6B65_uFF0C_u5343_u4E07_u522B_u641E_u9519_u4E86_uFF0C_u5426_u5219_u5C31SSH_u94FE_u63A5_u4E0D_u4E0A_u90FD_u6709_u53EF_u80FD_uFF01"><a href="#4-__u63A5_u4E0B_u6765_u8BF4_u660E_u4E00_u4E0B_u6B65_u9AA4_uFF0C_u5982_u679C_u673A_u5668_u4E0D_u5728_u6211_u8EAB_u8FB9_uFF0C_u6211_u53EA_u80FDSSH_u8FDB_u53BB_u505Aiptables_u89C4_u5219_uFF0C_u90A3_u4E48_u6211_u5FC5_u987B_u6CE8_u610F_u6BCF_u4E00_u6B65_uFF0C_u5343_u4E07_u522B_u641E_u9519_u4E86_uFF0C_u5426_u5219_u5C31SSH_u94FE_u63A5_u4E0D_u4E0A_u90FD_u6709_u53EF_u80FD_uFF01" class="headerlink" title="4. 接下来说明一下步骤，如果机器不在我身边，我只能SSH进去做iptables规则，那么我必须注意每一步，千万别搞错了，否则就SSH链接不上都有可能！"></a>4. 接下来说明一下步骤，如果机器不在我身边，我只能SSH进去做iptables规则，那么我必须注意每一步，千万别搞错了，否则就SSH链接不上都有可能！</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#39318;&#20808;&#35201;&#20570;&#30340;&#26159;&#32473;&#21681;&#30340;SSH&#36827;&#34892;ACCEPT&#37197;&#32622;&#65292;&#20197;&#20813;&#30452;&#25509;&#26080;&#27861;&#36830;&#25509;&#30340;&#24773;&#20917;&#21457;&#29983;:  &#10;1.&#22914;&#26524;SSH&#31471;&#21475;&#26159;22&#65288;&#36825;&#37324;&#19981;&#24314;&#35758;&#29992;&#40664;&#35748;&#31471;&#21475;&#26368;&#22909;&#25913;&#25481;SSH&#31471;&#21475;&#65289;&#10;iptables -A INPUT -p tcp --dport 22 -j ACCEPT&#10;iptables -A OUTPUT -p tcp --sport 22 -j ACCEPT&#10;&#27880;&#24847;&#35201;/etc/rc.d/init.d/iptables save&#65292;&#20197;&#19979;&#27599;&#19968;&#27493;&#37117;&#26368;&#22909;&#25191;&#34892;&#19968;&#36941;&#27492;&#35821;&#21477;&#65292;&#20197;&#19979;&#19981;&#20877;&#32047;&#36848;&#12290;  &#10;2.vim /etc/sysconfig/iptables&#30830;&#23450;&#26159;&#21542;&#24050;&#32463;&#21152;&#20837;&#37197;&#32622;&#65292;&#21487;&#20197;&#30340;&#35805;&#25191;&#34892;service iptables restart&#37325;&#21551;&#21518;&#29983;&#25928;&#12290;&#10;3.&#19979;&#38754;&#26159;&#24456;&#21361;&#38505;&#30340;&#25805;&#20316;&#65292;&#22914;&#26524;&#20320;&#31532;&#19968;&#27493;&#27809;&#20570;&#23601;&#20250;&#30452;&#25509;&#21487;&#33021;&#23548;&#33268;&#20320;&#36830;&#19981;&#19978;SSH&#65292;&#27492;&#27493;&#39588;&#21069;&#20999;&#35760;&#25191;&#34892;&#31532;&#19968;&#27493;&#65281;&#65281;&#65281;&#10;iptables -P INPUT DROP   &#10;iptables -P OUTPUT DROP   &#10;iptables -P FORWARD DROP  &#10;&#36825;&#20010;&#27493;&#39588;&#26159;&#25226;&#25152;&#26377;&#19981;&#31526;&#21512;&#33258;&#24049;&#37197;&#32622;&#30340;&#35268;&#21017;ACCEPT&#30340;&#36830;&#25509;&#20840;&#37096;DROP&#25481;&#65292;&#25191;&#34892;&#23436;&#20197;&#21518;&#22914;&#26524;&#21681;SSH&#36824;&#27809;&#25481;&#65292;&#37027;&#20040;&#35874;&#22825;&#35874;&#22320;&#65292;&#23433;&#20840;&#20102;&#65292;&#37325;&#21551;&#19979;iptables&#21518;&#32487;&#32493;&#19979;&#38754;&#30340;&#37197;&#32622;&#65281;&#10;4.&#19979;&#38754;&#21681;&#23601;&#19981;&#32454;&#35828;&#20102;&#65292;&#20855;&#20307;&#23601;&#26159;&#30475;&#33258;&#24049;&#26381;&#21153;&#22120;&#35201;&#24320;&#25918;&#21738;&#20123;&#31471;&#21475;&#25110;&#32773;&#26159;&#35201;&#35775;&#38382;&#21738;&#20123;&#31471;&#21475;&#26469;&#20570;&#20855;&#20307;&#30340;&#37197;&#32622;&#65292;&#19979;&#38754;&#26159;&#25105;&#33258;&#24049;&#30340;&#26426;&#22120;&#30340;&#37197;&#32622;:&#10;/etc/sysconfig/iptables&#25991;&#20214;&#37197;&#32622;&#22914;&#19979;:&#10;# Generated by iptables-save v1.4.7 on Fri Mar  2 19:59:43 2012&#10;*filter&#10;:INPUT DROP [0:0]&#10;:FORWARD DROP [0:0]&#10;:OUTPUT DROP [8:496]&#10;-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT&#10;#ping&#20351;&#29992;&#30340;&#31471;&#21475;&#10;-A INPUT -p icmp -j ACCEPT&#10;-A INPUT -i lo -j ACCEPT&#10;-A INPUT -s 127.0.0.1/32 -d 127.0.0.1/32 -j ACCEPT&#10;-A INPUT -s 192.168.2.200/32 -d 192.168.2.200/32 -j ACCEPT&#10;#&#20801;&#35768;&#26381;&#21153;&#22120;&#33258;&#24049;&#30340;SSH&#65288;&#23545;&#22806;&#37096;&#35831;&#27714;&#26469;&#35828;&#26381;&#21153;&#22120;&#26159;&#30446;&#26631;&#25152;&#20197;&#20351;&#29992;--dport&#65289;&#10;-A INPUT -p tcp -m tcp --dport 22 -j ACCEPT  &#10;#80&#31471;&#21475;&#19981;&#29992;&#35828;&#20102;&#21543;&#65292;&#26381;&#21153;&#22120;&#32593;&#31449;&#35775;&#38382;&#31471;&#21475;  &#10;-A INPUT -p tcp -m tcp --dport 80 -j ACCEPT  &#10;-A INPUT -p tcp -m tcp --dport 3306 -j ACCEPT  &#10;-A INPUT -p tcp -m tcp --dport 11211 -j ACCEPT  &#10;-A INPUT -p tcp -m tcp --dport 11212 -j ACCEPT  &#10;-A FORWARD -j REJECT --reject-with icmp-host-prohibited  &#10;#53&#31471;&#21475;&#26159;DNS&#30456;&#20851;&#65292;TCP&#21644;UDP&#37117;&#35201;&#37197;&#32622;  &#10;-A INPUT -p tcp -m tcp --dport 53 -j ACCEPT  &#10;-A INPUT -p udp -m udp --dport 53 -j ACCEPT  &#10;#ping&#20351;&#29992;&#30340;&#31471;&#21475;  &#10;-A OUTPUT -p icmp -j ACCEPT  &#10;-A OUTPUT -s 127.0.0.1/32 -d 127.0.0.1/32 -j ACCEPT  &#10;-A OUTPUT -s 192.168.2.200/32 -d 192.168.2.200/32 -j ACCEPT  &#10;#&#20801;&#35768;&#26381;&#21153;&#22120;SSH&#21040;&#20854;&#20182;&#26426;&#22120;&#65288;&#20351;&#29992;&#22806;&#37096;&#31471;&#21475;&#23601;&#20351;&#29992;--dport&#65289;  &#10;-A OUTPUT -p tcp -m tcp --dport 22 -j ACCEPT  &#10;#&#20801;&#35768;&#26381;&#21153;&#22120;&#33258;&#24049;&#30340;SSH&#65288;&#33258;&#24050;&#20026;&#28304;&#36755;&#20986;&#23601;&#20351;&#29992;--sport&#65289;  &#10;-A OUTPUT -p tcp -m tcp --sport 22 -j ACCEPT  &#10;#&#35775;&#38382;&#22806;&#37096;&#32593;&#31449;80&#31471;&#21475;&#65288;&#20351;&#29992;&#22806;&#37096;&#31471;&#21475;&#23601;&#20351;&#29992;--dport&#65289;  &#10;-A OUTPUT -p tcp -m tcp --dport 80 -j ACCEPT  &#10;#&#22914;&#26524;&#26381;&#21153;&#22120;&#38656;&#35201;&#35775;&#38382;&#22806;&#37096;&#32593;&#31449;&#65292;&#37027;&#20040;OUTPUT&#20063;&#38656;&#35201;&#37197;&#32622;53&#31471;&#21475;&#65288;&#20351;&#29992;&#22806;&#37096;&#31471;&#21475;&#23601;&#20351;&#29992;--dport&#65289;  &#10;-A OUTPUT -p tcp -m tcp --dport 53 -j ACCEPT  &#10;-A OUTPUT -p udp -m udp --dport 53 -j ACCEPT  &#10;#&#22914;&#26524;&#26377;&#35775;&#38382;&#22806;&#37096;&#37038;&#31665;&#65292;&#37027;&#20040;&#25171;&#24320;&#37038;&#31665;&#30456;&#20851;&#31471;&#21475;&#65288;&#20351;&#29992;&#22806;&#37096;&#31471;&#21475;&#23601;&#20351;&#29992;--dport&#65289;  &#10;-A OUTPUT -p tcp -m tcp --dport 465 -j ACCEPT  &#10;-A OUTPUT -p tcp -m tcp --dport 25 -j ACCEPT  &#10;-A OUTPUT -p tcp -m tcp --dport 110 -j ACCEPT  &#10;#&#26381;&#21153;&#22120;&#32593;&#31449;&#35775;&#38382;&#31471;&#21475;&#65288;&#33258;&#24050;&#20026;&#28304;&#36755;&#20986;&#23601;&#20351;&#29992;--sport&#65289;  &#10;-A OUTPUT -p tcp -m tcp --sport 80 -j ACCEPT  &#10;-A OUTPUT -p tcp -m tcp --sport 3306 -j ACCEPT  &#10;-A OUTPUT -p tcp -m tcp --sport 11211 -j ACCEPT  &#10;-A OUTPUT -p tcp -m tcp --sport 11212 -j ACCEPT  &#10;COMMIT&#10;# Completed on Fri Mar  2 19:59:43 2012</span><br></pre></td></tr></table></figure>
<h3 id="5-__u53EF_u80FD_u6709_u65F6_u5019_u9700_u8981_u5220_u9664_u89C4_u5219_uFF0C_u6700_u7B80_u5355_u5C31_u662F_u4FEE_u6539_u4E00_u4E0B/etc/sysconfig/iptables_u7136_u540Eservice_iptables_restart_2C_u6700_u540E/etc/rc-d/init-d/iptables_save_u5373_u53EF_u3002_u5F53_u7136_u4E5F_u53EF_u4EE5_u4F7F_u7528_u6307_u4EE4_u5B8C_u6210_3A"><a href="#5-__u53EF_u80FD_u6709_u65F6_u5019_u9700_u8981_u5220_u9664_u89C4_u5219_uFF0C_u6700_u7B80_u5355_u5C31_u662F_u4FEE_u6539_u4E00_u4E0B/etc/sysconfig/iptables_u7136_u540Eservice_iptables_restart_2C_u6700_u540E/etc/rc-d/init-d/iptables_save_u5373_u53EF_u3002_u5F53_u7136_u4E5F_u53EF_u4EE5_u4F7F_u7528_u6307_u4EE4_u5B8C_u6210_3A" class="headerlink" title="5. 可能有时候需要删除规则，最简单就是修改一下/etc/sysconfig/iptables然后service iptables restart,最后/etc/rc.d/init.d/iptables save即可。当然也可以使用指令完成:"></a>5. 可能有时候需要删除规则，最简单就是修改一下/etc/sysconfig/iptables然后service iptables restart,最后/etc/rc.d/init.d/iptables save即可。当然也可以使用指令完成:</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#22312;&#32593;&#19978;&#25214;&#20102;&#19968;&#19979;&#65292;&#21024;&#38500;&#35268;&#21017;&#30340;&#26041;&#27861;&#65306;  &#10;&#35821;&#27861;&#26159;&#65306; iptables -D chain rulenum [options]  &#10;&#20854;&#20013;&#65306; chain &#26159;&#38142;&#30340;&#24847;&#24605;&#65292;&#23601;&#26159;INPUT FORWARD &#20043;&#31867;&#30340;  &#10;rulenum &#26159;&#35268;&#21017;&#30340;&#32534;&#21495;&#12290;&#20174;1 &#24320;&#22987;&#12290;&#21487;&#20197;&#20351;&#29992;  --line-numbers &#21015;&#20986;&#35268;&#21017;&#30340;&#32534;&#21495;  &#10;   &#10;&#25152;&#20197;&#65292;&#20363;&#22914;&#19978;&#38754;&#35201;&#21024;&#38500;&#19968;&#20010;INPUT&#38142;&#30340;&#35268;&#21017;&#30340;&#35805;&#21487;&#20197;&#36825;&#26679;&#65306;iptables -D INPUT 3  &#10;&#24847;&#24605;&#26159;&#21024;&#38500;&#31532;3&#26465;&#35268;&#21017;&#12290;  &#10;&#36824;&#26377;&#31532;&#20108;&#31181;&#26041;&#27861;&#12290;&#31532;&#20108;&#31181;&#21150;&#27861;&#26159; -A &#21629;&#20196;&#30340;&#26144;&#23556;&#65292;&#19981;&#36807;&#29992;-D&#26367;&#25442;-A&#12290;&#24403;&#20320;&#30340;&#38142;&#20013;&#35268;&#21017;&#24456;&#22797;&#26434;&#65292;&#32780;&#20320;&#19981;&#24819;&#35745;&#31639;&#23427;&#20204;&#30340;&#32534;&#21495;&#30340;&#26102;&#20505;&#36825;&#23601;&#21313;&#20998;&#26377;&#29992;&#20102;&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;&#20320;&#22914;&#20309;&#29992;iptables -A.... &#35821;&#21477;&#23450;&#20041;&#20102;&#19968;&#20010;&#35268;&#21017;&#65292;&#21017;&#21024;&#38500;&#27492;&#35268;&#21017;&#26102;&#23601;&#29992; -D &#26469;&#20195;&#26367;- A  &#20854;&#20313;&#30340;&#37117;&#19981;&#21464;&#21363;&#21487;&#12290;&#10;======================  &#10;&#35828;&#19968;&#19979;&#19978;&#38754;&#30340; --line-numbers &#36873;&#39033;&#65292;&#22914;&#19979;&#38754;&#30340;&#21629;&#20196;&#65306;  &#10;iptables -L INPUT --line-numbers   &#21015;&#20986;INPUT &#38142;&#25152;&#26377;&#30340;&#35268;&#21017;  &#10;num  target     prot opt source               destination           &#10;1    REJECT     tcp  --  anywhere             anywhere            tcp dpt:microsoft-ds reject-with icmp-port-unreachable  &#10;2    REJECT     tcp  --  anywhere             anywhere            tcp dpt:135 reject-with icmp-port-unreachable  &#10;3    REJECT     tcp  --  anywhere             anywhere            tcp dpt:netbios-ssn reject-with icmp-port-unreachable  &#10;  &#10;...  &#10;...  &#10;&#21024;&#38500;&#25351;&#23450;&#34892;&#35268;&#21017;&#65306;  &#10;[root@localhost rc.d]# iptables -D INPUT 4</span><br></pre></td></tr></table></figure>
<h3 id="6-_u6700_u540E_u8865_u5145_u4E00_u4E0B_uFF0C_u5982_u679C_u60F3_u9488_u5BF9_u67D0IP_u8FDB_u884C_u5355_u72EC_u5F00_u653E_u7AEF_u53E3_u53EF_u4EE5_u5982_u4E0B_u914D_u7F6E_uFF1A"><a href="#6-_u6700_u540E_u8865_u5145_u4E00_u4E0B_uFF0C_u5982_u679C_u60F3_u9488_u5BF9_u67D0IP_u8FDB_u884C_u5355_u72EC_u5F00_u653E_u7AEF_u53E3_u53EF_u4EE5_u5982_u4E0B_u914D_u7F6E_uFF1A" class="headerlink" title="6.最后补充一下，如果想针对某IP进行单独开放端口可以如下配置："></a>6.最后补充一下，如果想针对某IP进行单独开放端口可以如下配置：</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#22914;&#26524;&#25105;&#38656;&#35201;&#23545;&#20869;&#32593;&#26576;&#26426;&#22120;&#21333;&#29420;&#24320;&#25918;mysql&#31471;&#21475;&#65292;&#24212;&#35813;&#22914;&#19979;&#37197;&#32622;&#65306;  &#10;iptables -A INPUT -s 192.168.2.6 -p tcp -m tcp --dport 3306 -j ACCEPT  &#10;iptables -A OUTPUT -d 192.168.2.6 -p tcp -m tcp --sport 3306 -j ACCEPT</span><br></pre></td></tr></table></figure>
<h3 id="7-_u5F7B_u5E95_u7981_u6B62_u67D0IP_u8BBF_u95EE_3A"><a href="#7-_u5F7B_u5E95_u7981_u6B62_u67D0IP_u8BBF_u95EE_3A" class="headerlink" title="7.彻底禁止某IP访问:"></a>7.彻底禁止某IP访问:</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#&#23631;&#34109;&#21333;&#20010;IP&#30340;&#21629;&#20196;&#26159;  &#10;iptables -I INPUT -s 123.45.6.7 -j DROP  &#10;#&#23553;&#25972;&#20010;&#27573;&#21363;&#20174;123.0.0.1&#21040;123.255.255.254&#30340;&#21629;&#20196;  &#10;iptables -I INPUT -s 123.0.0.0/8 -j DROP  &#10;#&#23553;IP&#27573;&#21363;&#20174;123.45.0.1&#21040;123.45.255.254&#30340;&#21629;&#20196;  &#10;iptables -I INPUT -s 124.45.0.0/16 -j DROP  &#10;#&#23553;IP&#27573;&#21363;&#20174;123.45.6.1&#21040;123.45.6.254&#30340;&#21629;&#20196;&#26159;  &#10;iptables -I INPUT -s 123.45.6.0/24 -j DROP  &#10;&#25351;&#20196;I&#26159;insert&#25351;&#20196; &#20294;&#26159;&#35813;&#25351;&#20196;&#20250;insert&#22312;&#27491;&#30830;&#20301;&#32622;&#24182;&#19981;&#20687;A&#25351;&#20196;&#30475;&#20320;&#33258;&#24049;&#30340;&#25490;&#24207;&#20301;&#32622;&#65292;&#22240;&#27492;&#29992;&#23631;&#34109;&#22240;&#20026;&#24517;&#39035;&#22312;&#19968;&#24320;&#22987;&#23601;&#35201;&#21152;&#36733;&#23631;&#34109;IP&#65292;&#25152;&#20197;&#24517;&#39035;&#20351;&#29992;I&#21629;&#20196;&#21152;&#36733;&#65292;&#28982;&#21518;&#27880;&#24847;&#25191;&#34892;/etc/rc.d/init.d/iptables save&#36827;&#34892;&#20445;&#23384;&#21518;&#37325;&#21551;&#26381;&#21153;&#21363;&#21487;</span><br></pre></td></tr></table></figure>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/10/CentOS-install-WpcapSrc/" itemprop="url">
                  CentOS安装rpcapd服务（WinPcap）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-10T19:58:58+08:00" content="2014-12-10">
              2014-12-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>因为需要用Wireshark进行远程抓包，需要在远程主机上安装相应的rpcapd服务。Windows上只要安装WinPcap软件就行了，它已经包含了rpcapd服务，只要启动就行了。但Linux上需要自己编译。<br><em>注：Wireshark支持remote packet capture protocol协议远程抓包，只要在远程主机上安装相应的rpcapd服务例程就可以。</em><br><strong>安装命令如下：</strong><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install glibc-static&#10;wget http://www.winpcap.org/install/bin/WpcapSrc_4_1_2.zip&#10;unzip WpcapSrc_4_1_2.zip&#10;cd winpcap/wpcap/libpcap&#10;chmod +x configure runlex.sh&#10;CFLAGS=-static ./configure&#10;make&#10;cd rpcapd&#10;make</span><br></pre></td></tr></table></figure></p>
<p>然后<br>./rpcapd -n<br>就运行rpcap服务了。</p>
<p><strong>但是，运行./rpcapd -n报如下错误</strong><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23gx7o02aZ rpcapd]# ./rpcapd -n&#10;Press CTRL + C to stop the server...&#10;socket(): Address family not supported by protocol (code 97)</span><br></pre></td></tr></table></figure></p>
<p><em>原因：在linux上，端口有可能没有开放，这时需要修改iptables服务的配置来开放2002端口。</em><br><strong>解决办法：</strong></p>
<ol>
<li><a href="http://zhangyouzhi.me/2014/12/10/centos-cannot-find-iptables-in-etcsysconfig/" target="_blank" rel="external">CentOS下/etc/sysconfig/下找不到iptables文件</a></li>
<li><a href="http://zhangyouzhi.me/2014/12/10/linux-iptables-configure/" target="_blank" rel="external">Linux中iptables配置详细（转）</a><br>参考<a href="http://zhangyouzhi.me/2014/12/10/linux-iptables-configure/" target="_blank" rel="external">Linux中iptables配置详细（转）</a>修改iptables服务的配置来开放2002端口。</li>
</ol>
<p>首先要做的是给咱的SSH进行ACCEPT配置，以免直接无法连接的情况发生:<br><strong>1. 如果SSH端口是22（这里不建议用默认端口最好改掉SSH端口）</strong><br>iptables -A INPUT -p tcp –dport 22 -j ACCEPT<br>iptables -A OUTPUT -p tcp –sport 22 -j ACCEPT<br>注意要/etc/rc.d/init.d/iptables save，以下每一步都最好执行一遍此语句，以下不再累述。<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23gx7o02aZ sysconfig]# iptables -A INPUT -p tcp --dport 22 -j ACCEPT&#10;[root@iZ23gx7o02aZ sysconfig]# iptables -A OUTPUT -p tcp --sport 22 -j ACCEPT&#10;[root@iZ23gx7o02aZ sysconfig]# /etc/rc.d/init.d/iptables save&#10;iptables: Saving firewall rules to /etc/sysconfig/iptables:[  OK  ]&#10;[root@iZ23gx7o02aZ sysconfig]#</span><br></pre></td></tr></table></figure></p>
<p><strong>2. 修改iptables开放2002端口</strong><br>iptables -A INPUT -p tcp –dport 2002 -j ACCEPT<br>iptables -A OUTPUT -p tcp –sport 2002 -j ACCEPT<br>最后注意需要再执行一下 /etc/init.d/iptables save，这样这两条语句就保存到刚才那个/etc/sysconfig/iptables 文件中了。<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23gx7o02aZ sysconfig]# iptables -A INPUT -p tcp --dport 2002 -j ACCEPT&#10;[root@iZ23gx7o02aZ sysconfig]# iptables -A OUTPUT -p tcp --sport 2002 -j ACCEPT&#10;[root@iZ23gx7o02aZ sysconfig]# /etc/init.d/iptables save&#10;iptables: Saving firewall rules to /etc/sysconfig/iptables:[  OK  ]&#10;[root@iZ23gx7o02aZ sysconfig]#</span><br></pre></td></tr></table></figure></p>
<p><strong>3. 查看iptables的内容</strong><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23gx7o02aZ sysconfig]# vi iptables&#10;&#10;  1 # Generated by iptables-save v1.4.7 on Wed Dec 10 21:20:39 2014&#10;  2 *filter&#10;  3 :INPUT ACCEPT [4602:266675]&#10;  4 :FORWARD ACCEPT [0:0]&#10;  5 :OUTPUT ACCEPT [5004:417513]&#10;  6 -A INPUT -p tcp -m tcp --dport 22 -j ACCEPT&#10;  7 -A INPUT -p tcp -m tcp --dport 2002 -j ACCEPT&#10;  8 -A OUTPUT -p tcp -m tcp --sport 22 -j ACCEPT&#10;  9 -A OUTPUT -p tcp -m tcp --sport 2002 -j ACCEPT&#10; 10 COMMIT&#10; 11 # Completed on Wed Dec 10 21:20:39 2014</span><br></pre></td></tr></table></figure></p>
<p><strong>4. 重启iptables</strong><br>重启指令:service iptables restart<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23gx7o02aZ sysconfig]# service iptables restart&#10;iptables: Setting chains to policy ACCEPT: filter          [  OK  ]&#10;iptables: Flushing firewall rules:                         [  OK  ]&#10;iptables: Unloading modules:                               [  OK  ]&#10;iptables: Applying firewall rules:                         [  OK  ]&#10;[root@iZ23gx7o02aZ sysconfig]#</span><br></pre></td></tr></table></figure></p>
<p><strong>5. 运行./rpcapd -n</strong><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23gx7o02aZ rpcapd]# ./rpcapd -n&#10;Press CTRL + C to stop the server...&#10;socket(): Address family supported by protocol (code 98)</span><br></pre></td></tr></table></figure></p>
<p><strong>修改成功！</strong></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/10/Vim-right-menu/" itemprop="url">
                  右键菜单添加Vim
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-10T10:58:58+08:00" content="2014-12-10">
              2014-12-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>将下面蓝色的内容保存为vim.reg，<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Windows Registry Editor Version 5.00&#10;[HKEY_CLASSES_ROOT\*\shell\Vim]&#10;@=&#34;Vim&#34;&#10;[HKEY_CLASSES_ROOT\*\shell\Vim\command]&#10;@=&#34;\&#34;D:\\vim73-x64\\vim73\\gvim.exe\&#34; -p --remote-tab-silent \&#34;%1\&#34;&#34;</span><br></pre></td></tr></table></figure></p>
<p>注意：其中D:\vim73-x64\vim73\gvim.exe\是你机器上安装gvim.exe的路径。Vim是你想在右键菜单显示的内容。<br>完成后双击运行就行。</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/09/Apache-httpd.conf-position/" itemprop="url">
                  Apache config 文件 httpd.conf 的位置
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-09T16:58:58+08:00" content="2014-12-09">
              2014-12-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>Apache config 文件 httpd.conf 的位置在/etc/httpd/conf 下。<br>查看命令如下：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[lmmbao@iZ23zmtjn2dZ conf]# ls&#10;extra httpd.conf magic&#10;[lmmbao@iZ23zmtjn2dZ conf]# pwd&#10;/etc/httpd/conf</span><br></pre></td></tr></table></figure></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/08/CentOS-vi-update/" itemprop="url">
                  CentOS 升级和使用Vi
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-08T18:18:18+08:00" content="2014-12-08">
              2014-12-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>在linux中用vi编辑和修改文件配置中没有彩色显示文件的内容，特别一些关键字不能彩色显示，给我们配置服务过程中造成极大的不方便。下面给出一种解决的方法。</p>
<h3 id="u7B2C_u4E00_u6B65_uFF1A_u53EF_u80FD_u662F_u56E0_u4E3Avi_u7684_u7248_u672C_u592A_u4F4E_uFF0C_u5E76_u4E14_u6CA1_u6709_u5F00_u542F_u9AD8_u4EAE_u663E_u793A_u3002"><a href="#u7B2C_u4E00_u6B65_uFF1A_u53EF_u80FD_u662F_u56E0_u4E3Avi_u7684_u7248_u672C_u592A_u4F4E_uFF0C_u5E76_u4E14_u6CA1_u6709_u5F00_u542F_u9AD8_u4EAE_u663E_u793A_u3002" class="headerlink" title="第一步：可能是因为vi的版本太低，并且没有开启高亮显示。"></a>第一步：可能是因为vi的版本太低，并且没有开启高亮显示。</h3><p>检查是否有更新, 更新一下最新版本的vi。<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23h8csloyZ ~]# yum install vim</span><br></pre></td></tr></table></figure></p>
<p>查下是否已经安装了vi<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23h8csloyZ ~]# rpm -<span class="keyword">qa</span>|<span class="keyword">grep</span> <span class="keyword">vim</span></span><br></pre></td></tr></table></figure></p>
<p>如果提示not install则需安装如下rpm包：<br>vim-enhance-版本号.rpm<br>vim-common-版本号.rpm<br>vim-minimal-版本号.rpm</p>
<h3 id="u7B2C_u4E8C_uFF1A_u7136_u540E_u4FEE_u6539__23vi_/etc/bashrc__u5728_u6700_u540E_u9762_u52A0_u5165_u201Calias_vi_3Dvim__u201D_u7136_u540Ewq_u4FDD_u5B58_u9000_u51FA_u3002"><a href="#u7B2C_u4E8C_uFF1A_u7136_u540E_u4FEE_u6539__23vi_/etc/bashrc__u5728_u6700_u540E_u9762_u52A0_u5165_u201Calias_vi_3Dvim__u201D_u7136_u540Ewq_u4FDD_u5B58_u9000_u51FA_u3002" class="headerlink" title="第二：然后修改 #vi /etc/bashrc 在最后面加入“alias vi=vim ”然后wq保存退出。"></a>第二：然后修改 #vi /etc/bashrc 在最后面加入“alias vi=vim ”然后wq保存退出。</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23h8csloyZ ~]# vi /etc/bashrc</span><br></pre></td></tr></table></figure>
<p>这样在shell里面敲入vi时候就自动打开vim了（vim是vi improve的简称）</p>
<h3 id="u7B2C_u4E09_uFF1A_u6700_u540E_u4FEE_u6539__23vi_/etc/vimrc__u5728_u5982_u4E0B_u8BED_u53E5_u4E2D_u52A0_u5165_u201Csyntax_on__u201D_uFF0C_u4E4B_u540E_u91CD_u542Fvi_uFF0C_u5C31_u53EF_u4EE5_u5F00_u542F_u9AD8_u4EAE_u663E_u793A_u4E86_u3002"><a href="#u7B2C_u4E09_uFF1A_u6700_u540E_u4FEE_u6539__23vi_/etc/vimrc__u5728_u5982_u4E0B_u8BED_u53E5_u4E2D_u52A0_u5165_u201Csyntax_on__u201D_uFF0C_u4E4B_u540E_u91CD_u542Fvi_uFF0C_u5C31_u53EF_u4EE5_u5F00_u542F_u9AD8_u4EAE_u663E_u793A_u4E86_u3002" class="headerlink" title="第三：最后修改 #vi /etc/vimrc 在如下语句中加入“syntax on ”，之后重启vi，就可以开启高亮显示了。"></a>第三：最后修改 #vi /etc/vimrc 在如下语句中加入“syntax on ”，之后重启vi，就可以开启高亮显示了。</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23h8csloyZ ~]# vi /etc/vimrc</span><br></pre></td></tr></table></figure>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> &amp;t_Co &gt; <span class="number">2</span> || <span class="built_in">has</span>(“gui_running”)</span><br><span class="line"><span class="keyword">syntax</span> <span class="keyword">on</span></span><br><span class="line"><span class="keyword">set</span> hlsearch</span><br><span class="line"><span class="keyword">endif</span></span><br></pre></td></tr></table></figure>
<p>注意：如果有的话则不必再添加。<br>有时要在 #vi /etc/vimrc 文件里按一下 esc–&gt;输入：syn on 即是重启运行vi<br>RedHat下显示彩色目录列表<br>打开/etc/bashrc<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23h8csloyZ ~]# vi /etc/bashrc</span><br></pre></td></tr></table></figure></p>
<p>加入如下一行:<br><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alias</span> <span class="keyword">ls</span>=<span class="string">"ls -color"</span></span><br></pre></td></tr></table></figure></p>
<h3 id="u7B2C_u56DB_uFF1A_u7528_init_6__u91CD_u542F_u4E00_u4E0Blinux__u670D_u52A1_u5668_u3002"><a href="#u7B2C_u56DB_uFF1A_u7528_init_6__u91CD_u542F_u4E00_u4E0Blinux__u670D_u52A1_u5668_u3002" class="headerlink" title="第四：用 init 6 重启一下linux 服务器。"></a>第四：用 init 6 重启一下linux 服务器。</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@iZ23h8csloyZ ~]# init 6</span><br></pre></td></tr></table></figure>
<p>重启完成后，应该可以高亮显示了。</p>
<p>让 Linux vi 显示关键字颜色-www.2cto.com-和vimrc配置<br>这需要安装vim-enhanced 包。<br>其实主要是vi本身是不带颜色的，vim带颜色<br>用命令:alias vi=vim 就就可使vi显示关键字颜色了。<br>以后vi就带颜色了。<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">syntax on &#8220;&#35821;&#27861;&#39640;&#20142;&#26174;&#31034;&#10;filetype indent on &#8220;&#25991;&#20214;&#33258;&#21160;&#32553;&#36827;&#10;set showcmd &#8221; Show (partial) command in status line.&#10;set showmatch &#8221; Show matching brackets.&#10;set incsearch &#8221; Incremental search&#10;set mouse=a &#8221; Enable mouse usage (all modes) in terminals&#10;set syn=cpp &#8220;&#35821;&#27861;&#39640;&#20142;&#10;set nu! &#8220;&#26174;&#31034;&#34892;&#21495;&#10;set hlsearch&#10;set nobackup &#8220;&#19981;&#20135;&#29983;&#22791;&#20221;&#25991;&#20214;&#10;set ruler &#8220;&#22312;&#32534;&#36753;&#36807;&#31243;&#20013;&#65292;&#22312;&#21491;&#19979;&#35282;&#26174;&#31034;&#20809;&#26631;&#20301;&#32622;&#30340;&#29366;&#24577;&#34892;&#10;colorscheme evening &#8220;&#35774;&#32622;&#37197;&#33394;&#26041;&#26696;&#10;set autoindent &#8220;&#20351;&#29992;&#33258;&#21160;&#23545;&#20854;&#65292;&#20063;&#23601;&#26159;&#25226;&#24403;&#21069;&#34892;&#30340;&#23545;&#20854;&#26684;&#24335;&#24212;&#29992;&#21040;&#19979;&#19968;&#34892;&#10;set smartindent &#8220;&#20381;&#25454;&#19978;&#38754;&#30340;&#23545;&#20854;&#26684;&#24335;&#65292;&#26234;&#33021;&#30340;&#36873;&#25321;&#23545;&#20854;&#26041;&#24335;&#10;set tabstop=4 &#8220;&#35774;&#32622;tab&#38190;&#20026;4&#20010;&#31354;&#26684;&#10;set shiftwidth=4 &#8220;&#35774;&#32622;&#24403;&#21069;&#34892;&#20043;&#38388;&#20132;&#38169;&#26102;&#20351;&#29992;4&#20010;&#31354;&#26684;&#10;set enc=utf-8 &#8220;&#35774;&#32622;&#32534;&#30721;&#10;set fenc=utf-8 &#8220;&#35774;&#32622;&#25991;&#20214;&#32534;&#30721;&#10;set fencs=utf-8,ucs-bom,gb18030,gbk,gb2312,cp936 &#8220;&#35774;&#32622;&#25991;&#20214;&#32534;&#30721;&#26816;&#27979;&#31867;&#22411;&#21450;&#25903;&#25345;&#26684;&#24335;&#10;set langmenu=zh_CN.UTF-8 &#8220;&#25351;&#23450;&#33756;&#21333;&#35821;&#35328;&#10;set helplang=cn &#8220;&#20013;&#25991;&#24110;&#21161;</span><br></pre></td></tr></table></figure></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/05/Markdown-use-introduce/" itemprop="url">
                  Markdown简明语法手册(二)（转）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-05T12:58:58+08:00" content="2014-12-05">
              2014-12-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>Markdown 是一种「电子邮件」风格的「标记语言」，我们强烈推荐所有写作者学习和掌握该语言。为什么？</p>
<p>在此，我们总结 Markdown 的优点如下：</p>
<ul>
<li>纯文本，所以兼容性极强，可以用所有文本编辑器打开。</li>
<li>让你专注于文字而不是排版。</li>
<li>格式转换方便，Markdown 的文本你可以轻松转换为 html、电子书等。</li>
<li>Markdown 的标记语法有极好的可读性。</li>
</ul>
<p>当然，我们既然如此推崇 Markdown ，也必定会教会你使用 Markdown ，这也是本文的目的所在。不过，<a href="http://wowubuntu.com/markdown/" target="_blank" rel="external">虽然 Markdown 的语法</a>已经足够简单，但是现有的 Markdown 语法说明更多的是写给 web 从业者看的，对于很多写作者来说，学习起来效率很低，现在，我们特地为写作者量身定做本指南，从写作者的实际需求出发，介绍写作者真正实用的常用格式，深入浅出、图文并茂地让您迅速掌握 Markdown 语法。</p>
<h1 id="u6807_u9898"><a href="#u6807_u9898" class="headerlink" title="标题"></a>标题</h1><p>这是最为常用的格式，在平时常用的的文本编辑器中大多是这样实现的：输入文本、选中文本、设置标题格式。</p>
<p>而在 Markdown 中，你只需要在文本前面加上 # 即可，同理、你还可以增加二级标题、三级标题、四级标题、五级标题和六级标题，总共六级，只需要增加  # 即可，标题字号相应降低。例如：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># &#19968;&#32423;&#26631;&#39064;&#10;## &#20108;&#32423;&#26631;&#39064;&#10;### &#19977;&#32423;&#26631;&#39064;&#10;#### &#22235;&#32423;&#26631;&#39064;&#10;##### &#20116;&#32423;&#26631;&#39064;&#10;###### &#20845;&#32423;&#26631;&#39064;</span><br></pre></td></tr></table></figure>
<p>注：# 和「一级标题」之间建议保留一个字符的空格，这是最标准的 Markdown 写法。</p>
<h1 id="u5217_u8868"><a href="#u5217_u8868" class="headerlink" title="列表"></a>列表</h1><p>列表格式也很常用，在 Markdown 中，你只需要在文字前面加上 - 就可以了，例如：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- &#25991;&#26412;1&#10;- &#25991;&#26412;2&#10;- &#25991;&#26412;3</span><br></pre></td></tr></table></figure></p>
<p>如果你希望有序列表，也可以在文字前面加上 1. 2. 3. 就可以了，例如：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1. &#25991;&#26412;1&#10;2. &#25991;&#26412;2&#10;3. &#25991;&#26412;3</span><br></pre></td></tr></table></figure></p>
<p>注：-、1.和文本之间要保留一个字符的空格。</p>
<p>列表案例截图如下：</p>
<h1 id="u94FE_u63A5_u548C_u56FE_u7247"><a href="#u94FE_u63A5_u548C_u56FE_u7247" class="headerlink" title="链接和图片"></a>链接和图片</h1><p>在 Markdown 中，插入链接不需要其他按钮，例如：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Blog](http://zhangyouzhi.me)</span><br></pre></td></tr></table></figure></p>
<p>在 Markdown 中，插入图片不需要其他按钮，例如：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](http://ww4.sinaimg.cn/bmiddle/aa397b7fjw1dzplsgpdw5j.jpg)</span><br></pre></td></tr></table></figure></p>
<p>注：插入图片的语法和链接的语法很像，只是前面多了一个 ！。<br><img src="http://ww4.sinaimg.cn/bmiddle/aa397b7fjw1dzplsgpdw5j.jpg" alt=""></p>
<h1 id="u5F15_u7528"><a href="#u5F15_u7528" class="headerlink" title="引用"></a>引用</h1><p>在我们写作的时候经常需要引用他人的文字，这个时候引用这个格式就很有必要了，在 Markdown 中，你只需要在你希望引用的文字前面加上 &gt; 就好了，例如：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#62; &#19968;&#30415;&#28783;&#65292; &#19968;&#29255;&#26127;&#40644;&#65307; &#19968;&#31616;&#20070;&#65292; &#19968;&#26479;&#28129;&#33590;&#12290; &#23432;&#30528;&#37027;&#19968;&#20221;&#28129;&#23450;&#65292; &#21697;&#35835;&#23646;&#20110;&#33258;&#24049;&#30340;&#23490;&#23518;&#12290; &#20445;&#25345;&#28129;&#23450;&#65292; &#25165;&#33021;&#27427;&#36175;&#21040;&#26368;&#32654;&#20029;&#30340;&#39118;&#26223;&#65281; &#20445;&#25345;&#28129;&#23450;&#65292; &#20154;&#29983;&#20174;&#27492;&#19981;&#20877;&#23490;&#23518;&#12290;&#10;&#27880;&#65306;&#62; &#21644;&#25991;&#26412;&#20043;&#38388;&#35201;&#20445;&#30041;&#19968;&#20010;&#23383;&#31526;&#30340;&#31354;&#26684;&#12290;</span><br></pre></td></tr></table></figure></p>
<p>最终显示的就是：</p>
<blockquote>
<p>一盏灯， 一片昏黄； 一简书， 一杯淡茶。 守着那一份淡定， 品读属于自己的寂寞。 保持淡定， 才能欣赏到最美丽的风景！ 保持淡定， 人生从此不再寂寞。<br>引用的案例截图：</p>
</blockquote>
<h1 id="u7C97_u4F53_u548C_u659C_u4F53"><a href="#u7C97_u4F53_u548C_u659C_u4F53" class="headerlink" title="粗体和斜体"></a>粗体和斜体</h1><p>Markdown 的粗体和斜体也非常简单，用两个 <em> 包含一段文本就是粗体的语法，用一个 </em> 包含一段文本就是斜体的语法。例如：</p>
<p> <em>一盏灯</em>， 一片昏黄；<strong>一简书</strong>， 一杯淡茶。 守着那一份淡定， 品读属于自己的寂寞。 保持淡定， 才能欣赏到最美丽的风景！ 保持淡定， 人生从此不再寂寞。<br>最终显示的就是下文，其中「一盏灯」是斜体，「一简书」是粗体：</p>
<p>一盏灯， 一片昏黄；一简书， 一杯淡茶。 守着那一份淡定， 品读属于自己的寂寞。 保持淡定， 才能欣赏到最美丽的风景！ 保持淡定， 人生从此不再寂寞。</p>
<p>粗体和斜体的案例截图：</p>
<h1 id="u8868_u683C"><a href="#u8868_u683C" class="headerlink" title="表格"></a>表格</h1><p>相关代码：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">| Tables        | Are           | Cool  |&#10;| ------------- |:-------------:| -----:|&#10;| col 3 is      | right-aligned | $1600 |&#10;| col 2 is      | centered      |   $12 |&#10;| zebra stripes | are neat      |    $1 |</span><br></pre></td></tr></table></figure></p>
<p>显示效果：</p>
<table>
<thead>
<tr>
<th>Tables</th>
<th style="text-align:center">Are</th>
<th style="text-align:right">Cool</th>
</tr>
</thead>
<tbody>
<tr>
<td>col 3 is</td>
<td style="text-align:center">right-aligned</td>
<td style="text-align:right">$1600</td>
</tr>
<tr>
<td>col 2 is</td>
<td style="text-align:center">centered</td>
<td style="text-align:right">$12</td>
</tr>
<tr>
<td>zebra stripes</td>
<td style="text-align:center">are neat</td>
<td style="text-align:right">$1</td>
</tr>
</tbody>
</table>
<p>相关代码：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dog | bird | cat&#10;----|------|----&#10;foo | foo  | foo&#10;bar | bar  | bar&#10;baz | baz  | baz</span><br></pre></td></tr></table></figure></p>
<p>显示效果：</p>
<table>
<thead>
<tr>
<th>dog</th>
<th>bird</th>
<th>cat</th>
</tr>
</thead>
<tbody>
<tr>
<td>foo</td>
<td>foo</td>
<td>foo</td>
</tr>
<tr>
<td>bar</td>
<td>bar</td>
<td>bar</td>
</tr>
<tr>
<td>baz</td>
<td>baz</td>
<td>baz</td>
</tr>
</tbody>
</table>
<h1 id="u663E_u793A_u94FE_u63A5_u4E2D_u5E26_u62EC_u53F7_u7684_u56FE_u7247"><a href="#u663E_u793A_u94FE_u63A5_u4E2D_u5E26_u62EC_u53F7_u7684_u56FE_u7247" class="headerlink" title="显示链接中带括号的图片"></a>显示链接中带括号的图片</h1><p>代码如下:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![][1]&#10;[1]: http://latex.codecogs.com/gif.latex?\prod%20\(n_&#123;i&#125;\)+1</span><br></pre></td></tr></table></figure></p>
<p>结语<br>以上几种格式是比较常用的格式，所以我们针对这些语法做了比较详细的说明。除这些之外，Markdown 还有其他语法，如想了解和学习更多，可以参考这篇<a href="http://wowubuntu.com/markdown/" target="_blank" rel="external">『Markdown 语法说明』</a>。</p>
<p>强烈建议您现在就立马用 Markdown 写一篇文章吧，体会一下 Markdown 的优雅之处！</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/04/http-post-get/" itemprop="url">
                  HTTP POST GET本质区别详解（转）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-04T18:18:58+08:00" content="2014-12-04">
              2014-12-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="u4E00__u539F_u7406_u533A_u522B"><a href="#u4E00__u539F_u7406_u533A_u522B" class="headerlink" title="一 原理区别"></a>一 原理区别</h2><p>一般在浏览器中输入网址访问资源都是通过GET方式；在FORM提交中，可以通过Method指定提交方式为GET或者POST，默认为GET提交。<br>Http定义了与服务器交互的不同方法，最基本的方法有4种，分别是<strong>GET，POST，PUT，DELETE。</strong><br>URL全称是资源描述符，我们可以这样认 为：一个URL地址，它用于描述一个网络上的资源，而HTTP中的<em>GET，POST，PUT，DELETE</em>就对应着对这个资源的<em>查，改，增，删</em>4个操作。到这里，大家应该有个大概的了解了，GET一般用于<strong>获取/查询</strong>资源信息，而POST一般用于<strong>更新</strong>资源信息(<strong>个人认为这是GET和POST的本质区别，也是协议设计者的本意，其它区别都是具体表现形式的差异</strong>)。</p>
<h3 id="u6839_u636EHTTP_u89C4_u8303_uFF0CGET_u7528_u4E8E_u4FE1_u606F_u83B7_u53D6_uFF0C_u800C_u4E14_u5E94_u8BE5_u662F_u5B89_u5168_u7684_u548C_u5E42_u7B49_u7684_u3002"><a href="#u6839_u636EHTTP_u89C4_u8303_uFF0CGET_u7528_u4E8E_u4FE1_u606F_u83B7_u53D6_uFF0C_u800C_u4E14_u5E94_u8BE5_u662F_u5B89_u5168_u7684_u548C_u5E42_u7B49_u7684_u3002" class="headerlink" title="根据HTTP规范，GET用于信息获取，而且应该是安全的和幂等的。"></a>根据HTTP规范，GET用于信息获取，而且应该是安全的和幂等的。</h3><ol>
<li>所谓安全的意味着该操作用于获取信息而非修改信息。换句话说，GET请求一般不应产生副作用。就是说，它仅仅是获取资源信息，就像数据库查询一样，不会修改，增加数据，不会影响资源的状态。<br><strong>注意：这里安全的含义仅仅是指是非修改信息。</strong></li>
<li>幂等的意味着对同一URL的多个请求应该返回同样的结果。这里我再解释一下幂等这个概念：<br>幂等（idempotent、idempotence）是一个数学或计算机学概念，常见于抽象代数中。<br>幂等有以下几种定义：<br>对于单目运算，如果一个运算对于在范围内的所有的一个数多次进行该运算所得的结果和进行一次该运算所得的结果是一样的，那么我们就称该运算是幂等的。比如绝对值运算就是一个例子，在实数集中，有abs(a) =abs(abs(a)) 。<br>对于双目运算，则要求当参与运算的两个值是等值的情况下，如果满足运算结果与参与运算的两个值相等，则称该运算幂等，如求两个数的最大值的函数，有在在实数集中幂等，即max(x,x)  =  x 。</li>
</ol>
<p>看完上述解释后，应该可以理解GET幂等的含义了。<br>但在实际应用中，以上2条规定并没有这么严格。引用别人文章的例子：比如，新闻站点的头版不断更新。虽然第二次请求会返回不同的一批新闻，该操 作仍然被认为是安全的和幂等的，因为它总是返回当前的新闻。从根本上说，如果目标是当用户打开一个链接时，他可以确信从自身的角度来看没有改变资源即可。</p>
<p>根据HTTP规范，POST表示可能修改变服务器上的资源的请求 。继续引用上面的例子：还是新闻以网站为例，读者对新闻发表自己的评论应该通过POST实现，因为在评论提交后站点的资源已经不同了，或者说资源被修改了。<br>上面大概说了一下HTTP规范中，GET和POST的一些原理性的问题。但在实际的做的时候，很多人却没有按照HTTP规范去做，导致这个问题的原因有很多，比如说：</p>
<ol>
<li>很多人贪方便，更新资源时用了GET，因为用POST必须要到FORM（表单），这样会麻烦一点。</li>
<li>对资源的增，删，改，查操作，其实都可以通过GET/POST完成，不需要用到PUT和DELETE。</li>
<li>另外一个是，早期的但是Web MVC框架设计者们并没有有意识地将URL当作抽象的资源来看待和设计 。还有一个较为严重的问题是传统的Web MVC框架基本上都只支持GET和POST两种HTTP方法，而不支持PUT和DELETE方法。<br><em>简单解释一下MVC：MVC本来是存在于Desktop程序中的，M是指数据模型，V是指用户界面，C则是控制器。使用MVC的目的是将M和V的实现代码分离，从而使同一个程序可以使用不同的表现形式。</em></li>
</ol>
<p>以上3点典型地描述了老一套的风格（没有严格遵守HTTP规范），随着架构的发展，现在出现REST(Representational State Transfer)，一套支持HTTP规范的新风格，这里不多说了，可以参考《RESTful Web Services》。</p>
<h2 id="u4E8C__u8868_u73B0_u5F62_u5F0F_u533A_u522B"><a href="#u4E8C__u8868_u73B0_u5F62_u5F0F_u533A_u522B" class="headerlink" title="二 表现形式区别"></a>二 表现形式区别</h2><p>搞清了两者的原理区别，我们再来看一下他们实际应用中的区别：<br>为了理解两者在传输过程中的不同，我们先看一下HTTP协议的格式：<br>HTTP请求：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;request line&#62;&#10;&#60;headers&#62;&#10;&#60;blank line&#62;&#10;&#60;request-body&#62;]</span><br></pre></td></tr></table></figure></p>
<p>在HTTP请求中，第一行必须是一个请求行（request line），用来说明请求类型、要访问的资源以及使用的HTTP版本。紧接着是一个首部（header）小节，用来说明服务器要使用的附加信息。在首部之后是一个空行，再此之后可以添加任意的其他数据[称之为主体（body）]。<br>GET与POST方法实例：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /books/?sex=man&#38;name=Professional HTTP/1.1&#10;Host: www.wrox.com&#10;User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.6)&#10;Gecko/20050225 Firefox/1.0.1&#10;Connection: Keep-Alive</span><br></pre></td></tr></table></figure></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POST / HTTP/1.1&#10;Host: www.wrox.com&#10;User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.6)&#10;Gecko/20050225 Firefox/1.0.1&#10;Content-Type: application/x-www-form-urlencoded&#10;Content-Length: 40&#10;Connection: Keep-Alive&#10;     &#65288;----&#27492;&#22788;&#31354;&#19968;&#34892;----&#65289;&#10;name=Professional%20Ajax&#38;publisher=Wiley</span><br></pre></td></tr></table></figure>
<p>有了以上对HTTP请求的了解和示例，我们再来看两种提交方式的区别：<br>（1）GET提交，请求的数据会附在URL之后（就是把数据放置在请求行（request line）中），以?分割URL和传输数据，多个参数用&amp;连接；例如：login.action?name=hyddd&amp;password=idontknow&amp;verify=%E4%BD%A0 %E5%A5%BD。Url的编码格式采用的是ASCII码，而不是Unicode，这也就是说你不能在Url中包含任何非ASCII字符，所有非ASCII字符均需要编码再传输，关于Url编码可参考：<a href="http://kb.cnblogs.com/page/133765/。" target="_blank" rel="external">http://kb.cnblogs.com/page/133765/。</a><br>POST提交：把提交的数据放置在是HTTP包的包体中。上文示例中红色字体标明的就是实际的传输数据。<br>因此，GET提交的数据会在地址栏中显示出来，而POST提交，地址栏不会改变<br>(2)传输数据的大小：首先声明：HTTP协议没有对传输的数据大小进行限制，HTTP协议规范也没有对URL长度进行限制。<br>而在实际开发中存在的限制主要有：<br>GET:特定浏览器和服务器对URL长度有限制，例如IE对URL长度的限制是2083字节(2K+35)。对于其他浏览器，如Netscape、FireFox等，理论上没有长度限制，其限制取决于操作系统的支持。<br>因此对于GET提交时，传输数据就会受到URL长度的限制。<br>POST:由于不是通过URL传值，理论上数据不受限。但实际各个WEB服务器会规定对post提交数据大小进行限制，Apache、IIS6都有各自的配置。<br>(3)安全性：<br>.POST的安全性要比GET的安全性高。注意：这里所说的安全性和上面GET提到的“安全”不是同个概念。上面“安全”的含义仅仅是不作数据修改，而这 里安全的含义是真正的Security的含义，比如：通过GET提交数据，用户名和密码将明文出现在URL上，因为(1)登录页面有可能被浏览器缓存，(2)其他人查看浏览器的历史纪录，那么别人就可以拿到你的账号和密码了，除此之外，使用GET提交数据还可能会造成Cross-site request forgery攻击。<br>(4)Http get,post,soap协议都是在http上运行的。<br>1）get：请求参数是作为一个key/value对的序列（查询字符串）附加到URL上的。<br>查询字符串的长度受到web浏览器和web服务器的限制（如IE最多支持2048个字符），不适合传输大型数据集同时，它很不安全。<br>2）post：请求参数是在http标题的一个不同部分（名为entity body）传输的，这一部分用来传输表单信息，因此必须将Content-type设置为:application/x-www-form-urlencoded。post设计用来支持web窗体上的用户字段，其参数也是作为key/value对传输。<br>但是：它不支持复杂数据类型，因为post没有定义传输数据结构的语义和规则。<br>3）soap：是http post的一个专用版本，遵循一种特殊的xml消息格式。<br>Content-type设置为: text/xml。任何数据都可以xml化。</p>
<h2 id="u4E09_HTTP_u54CD_u5E94"><a href="#u4E09_HTTP_u54CD_u5E94" class="headerlink" title="三 HTTP响应"></a>三 HTTP响应</h2><h3 id="1_uFF0EHTTP_u54CD_u5E94_u683C_u5F0F_uFF1A"><a href="#1_uFF0EHTTP_u54CD_u5E94_u683C_u5F0F_uFF1A" class="headerlink" title="1．HTTP响应格式："></a>1．HTTP响应格式：</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;status line&#62;&#10;&#60;headers&#62;&#10;&#60;blank line&#62;&#10;[&#60;response-body&#62;]</span><br></pre></td></tr></table></figure>
<p>在响应中唯一真正的区别在于第一行中用状态信息代替了请求信息。状态行（status line）通过提供一个状态码来说明所请求的资源情况。<br>HTTP响应实例：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK&#10;Date: Sat, 31 Dec 2005 23:59:59 GMT&#10;Content-Type: text/html;charset=ISO-8859-1&#10;Content-Length: 122&#10;&#65308;html&#65310;&#10;&#9;&#65308;head&#65310;&#10;&#9;&#9;&#65308;title&#65310;Wrox Homepage&#65308;/title&#65310;&#10;&#9;&#65308;/head&#65310;&#10;&#9;&#65308;body&#65310;&#10;&#9;&#9;&#65308;!-- body goes here --&#65310;&#10;&#9;&#65308;/body&#65310;&#10;&#65308;/html&#65310;</span><br></pre></td></tr></table></figure></p>
<h3 id="2_uFF0E_u6700_u5E38_u7528_u7684_u72B6_u6001_u7801_u6709_uFF1A"><a href="#2_uFF0E_u6700_u5E38_u7528_u7684_u72B6_u6001_u7801_u6709_uFF1A" class="headerlink" title="2．最常用的状态码有："></a>2．最常用的状态码有：</h3><p>◆200 (OK): 找到了该资源，并且一切正常。<br>◆304 (NOT MODIFIED): 该资源在上次请求之后没有任何修改。这通常用于浏览器的缓存机制。<br>◆401 (UNAUTHORIZED): 客户端无权访问该资源。这通常会使得浏览器要求用户输入用户名和密码，以登录到服务器。<br>◆403 (FORBIDDEN): 客户端未能获得授权。这通常是在401之后输入了不正确的用户名或密码。<br>◆404 (NOT FOUND): 在指定的位置不存在所申请的资源。</p>
<h2 id="u56DB__u5B8C_u6574_u793A_u4F8B_uFF1A"><a href="#u56DB__u5B8C_u6574_u793A_u4F8B_uFF1A" class="headerlink" title="四 完整示例："></a>四 完整示例：</h2><p>例子：<br><strong>HTTP GET</strong><br>发送:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /DEMOWebServices2.8/Service.asmx/CancelOrder?UserID=string&#38;PWD=string&#38;OrderConfirmation=string HTTP/1.1&#10;Host: api.efxnow.com</span><br></pre></td></tr></table></figure></p>
<p>回复:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK&#10;Content-Type: text/xml; charset=utf-8&#10;Content-Length: length&#10;&#10;&#60;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&#62;&#10;&#9;&#60;objPlaceOrderResponse xmlns=&#34;https://api.efxnow.com/webservices2.3&#34;&#62;&#10;&#9;&#9;&#60;Success&#62;boolean&#60;/Success&#62;&#10;&#9;&#9;&#60;ErrorDescription&#62;string&#60;/ErrorDescription&#62;&#10;&#9;&#9;&#60;ErrorNumber&#62;int&#60;/ErrorNumber&#62;&#10;&#9;&#9;&#60;CustomerOrderReference&#62;long&#60;/CustomerOrderReference&#62;&#10;&#9;&#9;&#60;OrderConfirmation&#62;string&#60;/OrderConfirmation&#62;&#10;&#9;&#9;&#60;CustomerDealRef&#62;string&#60;/CustomerDealRef&#62;&#10;&#9;&#60;/objPlaceOrderResponse&#62;</span><br></pre></td></tr></table></figure></p>
<p><strong>HTTP POST</strong><br>发送<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POST /DEMOWebServices2.8/Service.asmx/CancelOrder HTTP/1.1&#10;Host: api.efxnow.com&#10;Content-Type: application/x-www-form-urlencoded&#10;Content-Length: length&#10;&#10;UserID=string&#38;PWD=string&#38;OrderConfirmation=string</span><br></pre></td></tr></table></figure></p>
<p>回复<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK&#10;Content-Type: text/xml; charset=utf-8&#10;Content-Length: length&#10;&#10;&#60;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&#62;&#10;&#60;objPlaceOrderResponse xmlns=&#34;https://api.efxnow.com/webservices2.3&#34;&#62;&#10;&#60;Success&#62;boolean&#60;/Success&#62;&#10;&#60;ErrorDescription&#62;string&#60;/ErrorDescription&#62;&#10;&#60;ErrorNumber&#62;int&#60;/ErrorNumber&#62;&#10;&#60;CustomerOrderReference&#62;long&#60;/CustomerOrderReference&#62;&#10;&#60;OrderConfirmation&#62;string&#60;/OrderConfirmation&#62;&#10;&#60;CustomerDealRef&#62;string&#60;/CustomerDealRef&#62;&#10;&#60;/objPlaceOrderResponse&#62;</span><br></pre></td></tr></table></figure></p>
<p><strong>SOAP 1.2</strong><br>发送<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POST /DEMOWebServices2.8/Service.asmx HTTP/1.1&#10;Host: api.efxnow.com&#10;Content-Type: application/soap+xml; charset=utf-8&#10;Content-Length: length&#10;&#10;&#60;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&#62;&#10;&#60;soap12:Envelope xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xmlns:xsd=&#34;http://www.w3.org/2001/XMLSchema&#34; xmlns:soap12=&#34;http://www.w3.org/2003/05/soap-envelope&#34;&#62;&#10;&#60;soap12:Body&#62;&#10;    &#60;CancelOrder xmlns=&#34;https://api.efxnow.com/webservices2.3&#34;&#62;&#10;      &#60;UserID&#62;string&#60;/UserID&#62;&#10;      &#60;PWD&#62;string&#60;/PWD&#62;&#10;      &#60;OrderConfirmation&#62;string&#60;/OrderConfirmation&#62;&#10;    &#60;/CancelOrder&#62;&#10;&#60;/soap12:Body&#62;&#10;&#60;/soap12:Envelope&#62;</span><br></pre></td></tr></table></figure></p>
<p>回复<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK&#10;Content-Type: application/soap+xml; charset=utf-8&#10;Content-Length: length&#10;&#10;&#60;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&#62;&#10;&#60;soap12:Envelope xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xmlns:xsd=&#34;http://www.w3.org/2001/XMLSchema&#34; xmlns:soap12=&#34;http://www.w3.org/2003/05/soap-envelope&#34;&#62;&#10;&#60;soap12:Body&#62;&#10;    &#60;CancelOrderResponse xmlns=&#34;https://api.efxnow.com/webservices2.3&#34;&#62;&#10;      &#60;CancelOrderResult&#62;&#10;        &#60;Success&#62;boolean&#60;/Success&#62;&#10;        &#60;ErrorDescription&#62;string&#60;/ErrorDescription&#62;&#10;        &#60;ErrorNumber&#62;int&#60;/ErrorNumber&#62;&#10;        &#60;CustomerOrderReference&#62;long&#60;/CustomerOrderReference&#62;&#10;        &#60;OrderConfirmation&#62;string&#60;/OrderConfirmation&#62;&#10;        &#60;CustomerDealRef&#62;string&#60;/CustomerDealRef&#62;&#10;      &#60;/CancelOrderResult&#62;&#10;    &#60;/CancelOrderResponse&#62;&#10;&#60;/soap12:Body&#62;&#10;&#60;/soap12:Envelope&#62;</span><br></pre></td></tr></table></figure></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/12/03/pts-use-guide/" itemprop="url">
                  性能测试服务-PTS使用说明
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2014-12-03T18:18:58+08:00" content="2014-12-03">
              2014-12-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工作/" itemprop="url" rel="index">
                    <span itemprop="name">工作</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="u6982_u89C8"><a href="#u6982_u89C8" class="headerlink" title="概览"></a>概览</h2><h3 id="u5305_u542B_u5185_u5BB9"><a href="#u5305_u542B_u5185_u5BB9" class="headerlink" title="包含内容"></a>包含内容</h3><p><img src="http://i.imgur.com/mgqbd9k.jpg" alt="概览"></p>
<p>环境：可选择已购买的ECS、RDS、SLB作为测试机使用。<br>脚本：脚本是执行性能测试的基础，脚本里包括需要压测的服务器地址、压测的url、压测的参数和压测的类型。<br>场景：场景需要绑定脚本来运行，一个场景绑定一个脚本，可在场景中设置并发压测用户数、施压模式。<br>任务：任务执行需要绑定场景，一个任务可以绑定多个场景，任务开始执行后可以实时查看性能指标。<br>结果：结果自动保存可随时查看</p>
<h3 id="u6D4B_u8BD5_u6D41_u7A0B"><a href="#u6D4B_u8BD5_u6D41_u7A0B" class="headerlink" title="测试流程"></a>测试流程</h3><p><img src="http://i.imgur.com/FWlt5b4.jpg" alt="测试流程"></p>
<p><strong>一套完整的的性能测试过程包括环境管理、脚本创建、场景创建、任务创建、任务执行和结果查看，按先后顺序执行。</strong></p>
<h2 id="u7BA1_u7406_u73AF_u5883"><a href="#u7BA1_u7406_u73AF_u5883" class="headerlink" title="管理环境"></a>管理环境</h2><ol>
<li>选择测试ECS<br>选择已经购买的ECS，点击确定后添加测试ECS。添加完成后，也可以进行移除和管理操作。</li>
<li>选择测试RDS<br>选择已经购买的RDS，点击确定后添加测试RDS。添加完成后，也可以进行移除和管理操作。</li>
<li>选择测试SLB<br>选择已经购买的SLB，点击确定后添加测试SLB。添加完成后，也可以进行移除和管理操作。</li>
</ol>
<h2 id="u6D4B_u8BD5_u811A_u672C"><a href="#u6D4B_u8BD5_u811A_u672C" class="headerlink" title="测试脚本"></a>测试脚本</h2><h3 id="u65B0_u589E_u811A_u672C"><a href="#u65B0_u589E_u811A_u672C" class="headerlink" title="新增脚本"></a>新增脚本</h3><ol>
<li>填写脚本名：如 lmmbao_test</li>
<li>脚本描述：如 Test lmmbao APP</li>
<li>参数文件：新建csv文件，用Excel打开编辑，内容如下：<br><img src="http://i.imgur.com/uCIj1Xe.jpg" alt="参数文件csv"></li>
<li>添加事务：如lmmbao_test<br><img src="http://i.imgur.com/7vAyNM2.png" alt="新增脚本"><br>脚本内容：<a href="http://lmmbao.com/login/user_edit.htm?login/user_edit.htm?phone=%%_demotest.csv:phone%%" target="_blank" rel="external">http://lmmbao.com/login/user_edit.htm?login/user_edit.htm?phone=%%_demotest.csv:phone%%</a><br><em>Tips：因lmmbao.com 绑定的域名不在阿里云的ECS上，所以这里我用SLB_1的IP地址测试：<br><a href="http://42.120.60.9:82/login/user_edit.htm?phone=%%_demotest.csv:phone%%" target="_blank" rel="external">http://42.120.60.9:82/login/user_edit.htm?phone=%%_demotest.csv:phone%%</a></em></li>
<li>事务的高级属性：<br>编辑脚本时可使用高级属性来设置脚本请求的header和body信息。<br>点击高级属性进入高级属性设置：<br><img src="http://i.imgur.com/fddrMhZ.jpg" alt="事务高级设置"><br>Header设置：<br><img src="http://i.imgur.com/r7C9sK8.jpg" alt="header设置"><br>Body设置：<br>当请求类型为post时，可以设置body。<br><img src="http://i.imgur.com/mjTLBdn.jpg" alt="body设置"></li>
<li>快速启动：<br>点击测试脚本列表的快速启动按钮即可打开快速启动。<br>脚本编写完成后可通过脚本列表上的快速启动运行脚本，系统会自动创建脚本对应的场景与任务。<br><img src="http://i.imgur.com/KpiYmvW.jpg" alt="快速启动"></li>
</ol>
<h2 id="u6D4B_u8BD5_u573A_u666F"><a href="#u6D4B_u8BD5_u573A_u666F" class="headerlink" title="测试场景"></a>测试场景</h2><h3 id="u65B0_u589E_u573A_u666F"><a href="#u65B0_u589E_u573A_u666F" class="headerlink" title="新增场景"></a>新增场景</h3><ol>
<li>选择脚本：选择已添加的脚本。如选择lmmbao_getDaren_test</li>
<li>填写场景名：如lmmbao_getDaren_test</li>
<li>选择施压模式并填写并发用户量</li>
<li>日志级别：即压测进程日志级别配置。日志级别有WARN、ERRO、INFO。</li>
<li>场景描述：输入场景描述，如获取达人列表。</li>
</ol>
<h2 id="u6D4B_u8BD5_u4EFB_u52A1"><a href="#u6D4B_u8BD5_u4EFB_u52A1" class="headerlink" title="测试任务"></a>测试任务</h2><h3 id="u65B0_u589E_u4EFB_u52A1"><a href="#u65B0_u589E_u4EFB_u52A1" class="headerlink" title="新增任务"></a>新增任务</h3><ol>
<li>任务名：输入任务名，少于20个字。如获取达人列表。</li>
<li>开始时间：输入开始时间，可选择当前时刻。</li>
<li>持续时间：输入持续时间。如10分钟。</li>
<li>选择监控机：可以选择已购买的ECS和RDS。</li>
<li>场景绑定：绑定已添加的场景。</li>
<li>执行任务：任务增加完成后，可以到任务列表，选择执行，即可执行任务。</li>
</ol>
<h2 id="u6D4B_u8BD5_u7ED3_u679C"><a href="#u6D4B_u8BD5_u7ED3_u679C" class="headerlink" title="测试结果"></a>测试结果</h2><h3 id="u7ED3_u679C_u8BE6_u60C5"><a href="#u7ED3_u679C_u8BE6_u60C5" class="headerlink" title="结果详情"></a>结果详情</h3><ol>
<li>概览<br><img src="http://i.imgur.com/fJhQhf0.png" alt="概览"></li>
<li>业务指标<br><img src="http://i.imgur.com/CnsvQDm.png" alt="业务指标"></li>
<li>ECS指标<br><img src="http://i.imgur.com/LyFNbmY.png" alt="ECS指标"></li>
<li>RDS指标<br><img src="http://i.imgur.com/fPPRY5e.png" alt="RDS指标"></li>
</ol>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    

  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>



        </div>

        


        

      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="http://ww3.sinaimg.cn/mw690/6ba3371bgw1ei1yg6iujij209l09rwg2.jpg" alt="ZhangYouzhi" itemprop="image"/>
          <p class="site-author-name" itemprop="name">ZhangYouzhi</p>
        </div>
        <p class="site-description motion-element" itemprop="description">Where there is a will, there is a way!</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">59</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">3</span>
              <span class="site-state-item-name">分类</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">36</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2015</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZhangYouzhi</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    
    

  


  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  

  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  

  
  

</body>
</html>
